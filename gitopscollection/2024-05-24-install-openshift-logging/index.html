<!doctype html><html lang=en class="js csstransforms3d"><head><meta name=google-site-verification content="yq2Ib3doJVHVlEW2wtHap5WY54JhS2CCvI40y30F0FI"><meta name=color-scheme content="dark light"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.141.0"><meta name=description content="Installing OpenShift Logging using a GitOps approach."><meta name=author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=keywords content="Logging,OpenShift,OCP,GitOps,Argo CD,Storage,S3,Object Storage"><meta name=title content="Installing OpenShift Logging using GitOps"><meta name=robots content="index, follow"><meta charset=utf-8><meta name=language content="English"><link rel=canonical href=https://blog.stderr.at/gitopscollection/2024-05-24-install-openshift-logging/><meta property="og:title" content="Installing OpenShift Logging using GitOps"><meta property="og:description" content="Installing OpenShift Logging using a GitOps approach."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.stderr.at/gitopscollection/2024-05-24-install-openshift-logging/"><meta property="og:site_name" content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta property="article:published_time" content="2024-05-24T00:00:00Z"><meta property="article:modified_time" content="2025-12-02T17:46:24+01:00"><meta property="article:section" content="OpenShift"><meta property="article:tag" content="Logging"><meta property="article:tag" content="OpenShift"><meta property="article:tag" content="OCP"><meta property="article:tag" content="GitOps"><meta property="article:tag" content="Argo CD"><meta property="article:tag" content="Storage"><meta property="article:tag" content="S3"><meta property="article:tag" content="Object Storage"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Installing OpenShift Logging using GitOps"><meta name=twitter:description content="Installing OpenShift Logging using a GitOps approach."><meta name=article:author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=article:tag content="technical blog, OpenShift, GitOps"><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","headline":"Installing OpenShift Logging using GitOps","description":"Installing OpenShift Logging using a GitOps approach.","url":"https:\/\/blog.stderr.at\/gitopscollection\/2024-05-24-install-openshift-logging\/","datePublished":"2024-05-24T00:00:00Z","dateModified":"2025-12-02T17:46:24\u002b01:00","author":{"@type":"Person","name":"Toni Schmidbauer \u0026 Thomas Jungbauer"},"about":["OpenShift","GitOps"],"publisher":{"@type":"Organization","name":"TechBlog about OpenShift\/Ansible\/Satellite and much more","url":"https:\/\/blog.stderr.at\/"}}</script><link rel=icon href=/images/favicon.ico type=image/png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-180x180.png><link rel=apple-touch-icon sizes=128x128 href=/images/apple-touch-icon-128x128.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-touch-icon-72x72.png><link rel=apple-touch-icon href=/images/apple-touch-icon-57x57.png><link rel="shortcut icon" href=/images/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><title>Installing OpenShift Logging using GitOps :: TechBlog about OpenShift/Ansible/Satellite and much more</title>
<link rel=manifest href=/manifest.json><meta name=theme-color content="#317EFB"><link href=/css/fontawesome-all.min.css?1765084635 rel=stylesheet><link href=/css/featherlight.min.css?1765084635 rel=stylesheet><link href=/css/theme-yaub-modular.css?1765084635 rel=stylesheet><script src=/js/jquery-3.7.1.min.js?1765084635></script><script src=/js/jquery.waypoints.min.js?1765084635></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/gitopscollection/2024-05-24-install-openshift-logging/><button onclick=scrollTopAnimated() id=myBtn class="top-btn button fa fa-arrow-up" title="Go to top"></button>
<span class=read-progress></span><nav id=sidebar><div id=header-wrapper><button id=sidebar-toggle class=sidebar-toggle-btn title="Toggle Sidebar"><svg class="sidebar-toggle-icon" viewBox="0 0 32 32"><path d="M22 31a.997.997.0 01-.707-.293L7.647 17.061a1.501 1.501.0 010-2.122L21.293 1.293a1 1 0 111.414 1.414L9.414 16l13.293 13.293A1 1 0 0122 31z"/></svg></button><div id=header><a class="padding-topnav logo-link" href=/><svg class="logo" width="200" height="100" viewBox="0 0 200 136.34417133812047"><defs id="SvgjsDefs3490"/><g id="SvgjsG3491" featurekey="symbolFeature-0" transform="matrix(0.8888888888888888,0,0,0.8888888888888888,55.55511135525174,-24.034717135959202)" fill="#d2d2d2"><g xmlns="http://www.w3.org/2000/svg"><g><g><g><path fill="#d2d2d2" d="M75.195 72.96c-.619.0-1.241-.21-1.75-.64-1.146-.967-1.291-2.681-.324-3.827L88.73 50 73.122 31.507c-.967-1.146-.822-2.859.324-3.827 1.146-.968 2.859-.823 3.827.323L94.36 48.248c.854 1.012.854 2.492.0 3.503L77.272 71.995C76.735 72.632 75.968 72.96 75.195 72.96z"/></g></g></g><g><g><g><path fill="#d2d2d2" d="M24.805 72.96c-.772.0-1.539-.328-2.076-.964L5.641 51.752c-.854-1.012-.854-2.492.0-3.503l17.088-20.245c.967-1.146 2.681-1.291 3.827-.324 1.146.967 1.291 2.681.324 3.827L11.269 50.001l15.609 18.492c.967 1.146.823 2.859-.323 3.827C26.045 72.749 25.423 72.96 24.805 72.96z"/></g></g></g><g><path fill="#d2d2d2" d="M37.325 72.96c-.492.0-.99-.134-1.438-.414-1.271-.796-1.657-2.471-.861-3.742L60.37 28.315c.796-1.271 2.472-1.656 3.743-.861 1.271.796 1.657 2.471.861 3.742L39.63 71.685C39.115 72.508 38.23 72.96 37.325 72.96z"/></g></g></g><g id="SvgjsG3492" featurekey="nameFeature-0" transform="matrix(1.6473784183020483,0,0,1.6473784183020483,0.5930603781937029,42.15399158589206)" fill="#d2d2d2"><path d="m6.72 11.44 6.68 11.28 6.64-11.28h7l-10.6 17.6V40h-6.28V28.88l-10.52-17.44h7.08zm38.535.0L55.935 40h-6.52l-2.16-6.36h-10.68L34.335 40h-6.36l10.84-28.56h6.44zM41.935 18.48l-3.72 10.48h7.4l-3.6-10.48h-.08zm27.175-7.04-39062e-9 17.88c0 2.1067.47332 3.6467 1.42 4.62s2.4334 1.46 4.46 1.46c2.1867.0 3.72-.48668 4.6-1.46s1.32-2.5133 1.32-4.62V11.44h6.28v17.88c0 3.5733-1.02 6.36-3.06 8.36s-5.0868 3-9.14 3c-4.1332.0-7.1932-1-9.18-3s-2.98-4.7868-2.98-8.36V11.44h6.28zm41.495.0c6.0532.0 9.08 2.3466 9.08 7.04.0 2.6933-1.2933 4.6932-3.88 6 1.76.50668 3.0733 1.3934 3.94 2.66s1.3 2.7934 1.3 4.58c0 2.56-.92668 4.58-2.78 6.06s-4.2868 2.22-7.3 2.22h-13.84V11.44h13.48zM109.80499999999999 23c2.5333.0 3.8-1.1333 3.8-3.4.0-2.1867-1.4133-3.28-4.24-3.28h-5.96V23h6.4zm.359999999999999 12.12c3.0667.0 4.6-1.2533 4.6-3.76.0-2.72-1.4933-4.08-4.48-4.08h-6.88v7.84h6.76z"/></g></svg><div class=inline-flex><span class="animate-typewriter overflow-hidden whitespace-nowrap">Yet another useless blog<span class="ml-2 -translate-y-2 animate-blink">_</span></span></div></a></div><div class=searchbox><form action=/search/ method=GET id=sidebar-search-form><label for=sidebar-search><i class="fas fa-search"></i></label>
<input type=search id=sidebar-search name=q placeholder=Search... autocomplete=off>
<span id=sidebar-search-clear style=display:none><i class="fas fa-times"></i></span></form></div><script>(function(){const e=document.getElementById("sidebar-search"),t=document.getElementById("sidebar-search-clear");e.addEventListener("input",function(){t.style.display=this.value?"block":"none"}),t.addEventListener("click",function(n){n.preventDefault(),e.value="",t.style.display="none",e.focus()})})()</script></div><div class=highlightable><ul class=topics><li data-nav-id=/whatss-new/ title="What's New" class=dd-item><a href=/whatss-new/ class=has-children><span class=menu-title>What's New</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/whatss-new/2025-11-10-whatsnew-420/ title="What's new in OpenShift, 4.20 Edition" class=dd-item><a href=/whatss-new/2025-11-10-whatsnew-420/>What's new in OpenShift, 4.20 Edition</a></li></ul></li><li data-nav-id=/compliance/ title=Compliance class=dd-item><a href=/compliance/ class=has-children><span class=menu-title>Compliance</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/compliance/2021/07/oc-compliance-command-line-plugin/ title="oc compliance command line plugin" class=dd-item><a href=/compliance/2021/07/oc-compliance-command-line-plugin/>oc compliance command line plugin</a></li><li data-nav-id=/compliance/2021/07/compliance-operator/ title="Compliance Operator" class=dd-item><a href=/compliance/2021/07/compliance-operator/>Compliance Operator</a></li></ul></li><li data-nav-id=/gitopscollection/ title="GitOps Episodes" class="dd-item
parent"><a href=/gitopscollection/ class=has-children><span class=menu-title>GitOps Episodes</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/gitopscollection/2023-12-11-gitops-intro/ title="Introducing the GitOps Approach" class=dd-item><a href=/gitopscollection/2023-12-11-gitops-intro/>Introducing the GitOps Approach</a></li><li data-nav-id=/gitopscollection/2023-12-28-gitops-repostructure/ title="GitOps - Choosing the right Git repository structure" class=dd-item><a href=/gitopscollection/2023-12-28-gitops-repostructure/>GitOps - Choosing the right Git repository structure</a></li><li data-nav-id=/gitopscollection/2024-02-02-setup-argocd/ title="Setup OpenShift GitOps/Argo CD" class=dd-item><a href=/gitopscollection/2024-02-02-setup-argocd/>Setup OpenShift GitOps/Argo CD</a></li><li data-nav-id=/gitopscollection/2024-04-02-configure_app_of_apps/ title="Configure App-of-Apps" class=dd-item><a href=/gitopscollection/2024-04-02-configure_app_of_apps/>Configure App-of-Apps</a></li><li data-nav-id=/gitopscollection/2024-04-25-installing-compliance-operator/ title="Setup & Configure Compliance Operator using GitOps" class=dd-item><a href=/gitopscollection/2024-04-25-installing-compliance-operator/>Setup & Configure Compliance Operator using GitOps</a></li><li data-nav-id=/gitopscollection/2024-04-28-installing-advanced-cluster-security/ title="Setup & Configure Advanced Cluster Security using GitOps" class=dd-item><a href=/gitopscollection/2024-04-28-installing-advanced-cluster-security/>Setup & Configure Advanced Cluster Security using GitOps</a></li><li data-nav-id=/gitopscollection/2024-05-17-configure-minio-buckets/ title="Configure Buckets in MinIO using GitOps" class=dd-item><a href=/gitopscollection/2024-05-17-configure-minio-buckets/>Configure Buckets in MinIO using GitOps</a></li><li data-nav-id=/gitopscollection/2024-05-24-install-openshift-logging/ title="Installing OpenShift Logging using GitOps" class="dd-item active"><a href=/gitopscollection/2024-05-24-install-openshift-logging/>Installing OpenShift Logging using GitOps</a></li><li data-nav-id=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ title="Multiple Sources for Applications in Argo CD" class=dd-item><a href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/>Multiple Sources for Applications in Argo CD</a></li><li data-nav-id=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/ title="Update Cluster Version using GitOps approach" class=dd-item><a href=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/>Update Cluster Version using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-07-04-managing-certificates-with-gitops/ title="Managing Certificates using GitOps approach" class=dd-item><a href=/gitopscollection/2024-07-04-managing-certificates-with-gitops/>Managing Certificates using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-10-13-using-post-renderer/ title="Using Kustomize to post render a Helm Chart" class=dd-item><a href=/gitopscollection/2024-10-13-using-post-renderer/>Using Kustomize to post render a Helm Chart</a></li><li data-nav-id=/gitopscollection/2025-04-17-applicationset-defining-namespaces/ title="Using ApplicationSet with Matrix Generator and define individual Namespaces" class=dd-item><a href=/gitopscollection/2025-04-17-applicationset-defining-namespaces/>Using ApplicationSet with Matrix Generator and define individual Namespaces</a></li><li data-nav-id=/gitopscollection/2025-07-17-common-template-application/ title="Reusable Argo CD Application Helm Template" class=dd-item><a href=/gitopscollection/2025-07-17-common-template-application/>Reusable Argo CD Application Helm Template</a></li></ul></li><li data-nav-id=/openshift/ title=OpenShift class=dd-item><a href=/openshift/ class=has-children><span class=menu-title>OpenShift</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift/2025/08/a-second-look-into-the-kubernetes-gateway-api-on-openshift/ title="A second look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift/2025/08/a-second-look-into-the-kubernetes-gateway-api-on-openshift/>A second look into the Kubernetes Gateway API on OpenShift</a></li><li data-nav-id=/openshift/2025/08/a-first-look-into-the-kubernetes-gateway-api-on-openshift/ title="A first look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift/2025/08/a-first-look-into-the-kubernetes-gateway-api-on-openshift/>A first look into the Kubernetes Gateway API on OpenShift</a></li><li data-nav-id=/openshift/2025/06/cert-manager-policy-approver-in-openshift/ title="Cert-Manager Policy Approver in OpenShift" class=dd-item><a href=/openshift/2025/06/cert-manager-policy-approver-in-openshift/>Cert-Manager Policy Approver in OpenShift</a></li><li data-nav-id=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/ title="Single log out from Keycloak and OpenShift" class=dd-item><a href=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/>Single log out from Keycloak and OpenShift</a></li><li data-nav-id=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/ title="Step by Step - Using Keycloak Authentication in OpenShift" class=dd-item><a href=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/>Step by Step - Using Keycloak Authentication in OpenShift</a></li><li data-nav-id=/openshift/2024/11/introducing-adminnetworkpolicies/ title="Introducing AdminNetworkPolicies" class=dd-item><a href=/openshift/2024/11/introducing-adminnetworkpolicies/>Introducing AdminNetworkPolicies</a></li><li data-nav-id=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/ title="OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)" class=dd-item><a href=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/>OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)</a></li><li data-nav-id=/openshift/2023/11/running-falco-on-openshift-4.12/ title="Running Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023/11/running-falco-on-openshift-4.12/>Running Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/ title="Quay Deployment and Configuration using GitOps" class=dd-item><a href=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/>Quay Deployment and Configuration using GitOps</a></li><li data-nav-id=/openshift/2023/10/setting-up-falco-on-openshift-4.12/ title="Setting up Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023/10/setting-up-falco-on-openshift-4.12/>Setting up Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/10/how-to-force-a-machineconfig-rollout/ title="How to force a MachineConfig rollout" class=dd-item><a href=/openshift/2023/10/how-to-force-a-machineconfig-rollout/>How to force a MachineConfig rollout</a></li><li data-nav-id=/openshift/2023/03/operator-installation-with-argo-cd/ title="Operator installation with Argo CD" class=dd-item><a href=/openshift/2023/03/operator-installation-with-argo-cd/>Operator installation with Argo CD</a></li><li data-nav-id=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/ title="SSL Certificate Management for OpenShift on AWS" class=dd-item><a href=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/>SSL Certificate Management for OpenShift on AWS</a></li><li data-nav-id=/openshift/2022/11/using-serversideapply-with-argocd/ title="Using ServerSideApply with ArgoCD" class=dd-item><a href=/openshift/2022/11/using-serversideapply-with-argocd/>Using ServerSideApply with ArgoCD</a></li><li data-nav-id=/openshift/2022/08/secrets-management-vault-on-openshift/ title="Secrets Management - Vault on OpenShift" class=dd-item><a href=/openshift/2022/08/secrets-management-vault-on-openshift/>Secrets Management - Vault on OpenShift</a></li><li data-nav-id=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/ title="Overview of Red Hat's Multi Cloud Gateway (Noobaa)" class=dd-item><a href=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/>Overview of Red Hat's Multi Cloud Gateway (Noobaa)</a></li><li data-nav-id=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/ title="Secure your secrets with Sealed Secrets" class=dd-item><a href=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/>Secure your secrets with Sealed Secrets</a></li><li data-nav-id=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/ title="Understanding RWO block device handling in OpenShift" class=dd-item><a href=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/>Understanding RWO block device handling in OpenShift</a></li><li data-nav-id=/openshift/2021/01/writing-operator-using-ansible/ title="Writing Operator using Ansible" class=dd-item><a href=/openshift/2021/01/writing-operator-using-ansible/>Writing Operator using Ansible</a></li><li data-nav-id=/openshift/2020/12/thanos-querier-vs-thanos-querier/ title="Thanos Querier vs Thanos Querier" class=dd-item><a href=/openshift/2020/12/thanos-querier-vs-thanos-querier/>Thanos Querier vs Thanos Querier</a></li><li data-nav-id=/openshift/2020/08/gitops-argo-cd/ title="GitOps - Argo CD" class=dd-item><a href=/openshift/2020/08/gitops-argo-cd/>GitOps - Argo CD</a></li><li data-nav-id=/openshift/2020/04/openshift-pipelines-tekton-introduction/ title="OpenShift Pipelines - Tekton Introduction" class=dd-item><a href=/openshift/2020/04/openshift-pipelines-tekton-introduction/>OpenShift Pipelines - Tekton Introduction</a></li><li data-nav-id=/openshift/2020/04/helpful-oc-/-kubectl-commands/ title="Helpful oc / kubectl commands" class=dd-item><a href=/openshift/2020/04/helpful-oc-/-kubectl-commands/>Helpful oc / kubectl commands</a></li></ul></li><li data-nav-id=/day-2/ title="OpenShift Day-2" class=dd-item><a href=/day-2/ class=has-children><span class=menu-title>OpenShift Day-2</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/etcd/ title=etcd class=dd-item><a href=/day-2/etcd/ class=has-children><span class=menu-title>etcd</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/etcd/2022-01-29-automatedetcdbackup/ title="Automated ETCD Backup" class=dd-item><a href=/day-2/etcd/2022-01-29-automatedetcdbackup/>Automated ETCD Backup</a></li></ul></li><li data-nav-id=/day-2/labels_environmets/ title="Labels & Environments" class=dd-item><a href=/day-2/labels_environmets/ class=has-children><span class=menu-title>Labels & Environments</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/labels_environmets/2022-01-12-creatingenvironment/ title="Working with Environments" class=dd-item><a href=/day-2/labels_environmets/2022-01-12-creatingenvironment/>Working with Environments</a></li></ul></li><li data-nav-id=/day-2/observability/ title=Observability class=dd-item><a href=/day-2/observability/ class=has-children><span class=menu-title>Observability</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/ title="The Hitchhiker's Guide to Observability Introduction - Part 1" class=dd-item><a href=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/>The Hitchhiker's Guide to Observability Introduction - Part 1</a></li><li data-nav-id=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/ title="The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2" class=dd-item><a href=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/>The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2</a></li><li data-nav-id=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/ title="The Hitchhiker's Guide to Observability - Central Collector - Part 3" class=dd-item><a href=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/>The Hitchhiker's Guide to Observability - Central Collector - Part 3</a></li><li data-nav-id=/day-2/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/ title="The Hitchhiker's Guide to Observability - Example Applications - Part 4" class=dd-item><a href=/day-2/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/>The Hitchhiker's Guide to Observability - Example Applications - Part 4</a></li><li data-nav-id=/day-2/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/ title="The Hitchhiker's Guide to Observability - Understanding Traces - Part 5" class=dd-item><a href=/day-2/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/>The Hitchhiker's Guide to Observability - Understanding Traces - Part 5</a></li><li data-nav-id=/day-2/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/ title="The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6" class=dd-item><a href=/day-2/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/>The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6</a></li><li data-nav-id=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/ title="The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7" class=dd-item><a href=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/>The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7</a></li><li data-nav-id=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/ title="The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8" class=dd-item><a href=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/>The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8</a></li></ul></li><li data-nav-id=/day-2/pod-placement/ title="Pod Placement" class=dd-item><a href=/day-2/pod-placement/ class=has-children><span class=menu-title>Pod Placement</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/pod-placement/2021-08-26-podplacement-intro/ title=Introduction class=dd-item><a href=/day-2/pod-placement/2021-08-26-podplacement-intro/>Introduction</a></li><li data-nav-id=/day-2/pod-placement/2021-08-27-podplacement/ title=NodeSelector class=dd-item><a href=/day-2/pod-placement/2021-08-27-podplacement/>NodeSelector</a></li><li data-nav-id=/day-2/pod-placement/2021-08-28-affinity/ title="Pod Affinity/Anti-Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-28-affinity/>Pod Affinity/Anti-Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-29-node-affinity/ title="Node Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-29-node-affinity/>Node Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-30-taints/ title="Taints and Tolerations" class=dd-item><a href=/day-2/pod-placement/2021-08-30-taints/>Taints and Tolerations</a></li><li data-nav-id=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints" class=dd-item><a href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/>Topology Spread Constraints</a></li><li data-nav-id=/day-2/pod-placement/2021-09-01-descheduler/ title="Using Descheduler" class=dd-item><a href=/day-2/pod-placement/2021-09-01-descheduler/>Using Descheduler</a></li></ul></li></ul></li><li data-nav-id=/securesupplychain/ title="Secure Supply Chain" class=dd-item><a href=/securesupplychain/ class=has-children><span class=menu-title>Secure Supply Chain</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/securesupplychain/2023-06-15-securesupplychain-intro/ title="Introduction to a Secure Supply Chain" class=dd-item><a href=/securesupplychain/2023-06-15-securesupplychain-intro/>Introduction to a Secure Supply Chain</a></li><li data-nav-id=/securesupplychain/2023-06-16-securesupplychain-step1/ title="Step 1 - Listen to Events" class=dd-item><a href=/securesupplychain/2023-06-16-securesupplychain-step1/>Step 1 - Listen to Events</a></li><li data-nav-id=/securesupplychain/2023-06-17-securesupplychain-step2/ title="Step 2 - Pipelines" class=dd-item><a href=/securesupplychain/2023-06-17-securesupplychain-step2/>Step 2 - Pipelines</a></li><li data-nav-id=/securesupplychain/2023-06-18-securesupplychain-step3/ title="Step 3 - SonarQube" class=dd-item><a href=/securesupplychain/2023-06-18-securesupplychain-step3/>Step 3 - SonarQube</a></li><li data-nav-id=/securesupplychain/2023-06-19-securesupplychain-step4/ title="Step 4 - Verify Git Commit" class=dd-item><a href=/securesupplychain/2023-06-19-securesupplychain-step4/>Step 4 - Verify Git Commit</a></li><li data-nav-id=/securesupplychain/2023-06-20-securesupplychain-step5/ title="Step 5 - Build and Sign Image" class=dd-item><a href=/securesupplychain/2023-06-20-securesupplychain-step5/>Step 5 - Build and Sign Image</a></li><li data-nav-id=/securesupplychain/2023-06-21-securesupplychain-step6/ title="Step 6 - Scanning with ACS" class=dd-item><a href=/securesupplychain/2023-06-21-securesupplychain-step6/>Step 6 - Scanning with ACS</a></li><li data-nav-id=/securesupplychain/2023-06-22-securesupplychain-step7/ title="Step 7 - Generating a SBOM" class=dd-item><a href=/securesupplychain/2023-06-22-securesupplychain-step7/>Step 7 - Generating a SBOM</a></li><li data-nav-id=/securesupplychain/2023-06-23-securesupplychain-step8/ title="Step 8 - Updating Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-23-securesupplychain-step8/>Step 8 - Updating Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-24-securesupplychain-step9/ title="Step 9 - Linting Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-24-securesupplychain-step9/>Step 9 - Linting Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-25-securesupplychain-step10/ title="Step 10 - The Example Application" class=dd-item><a href=/securesupplychain/2023-06-25-securesupplychain-step10/>Step 10 - The Example Application</a></li><li data-nav-id=/securesupplychain/2023-06-26-securesupplychain-step11/ title="Step 11 - ACS Deployment Check" class=dd-item><a href=/securesupplychain/2023-06-26-securesupplychain-step11/>Step 11 - ACS Deployment Check</a></li><li data-nav-id=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature" class=dd-item><a href=/securesupplychain/2023-06-27-securesupplychain-step12/>Step 12 - Verify TLog Signature</a></li><li data-nav-id=/securesupplychain/2023-06-28-securesupplychain-step13/ title="Step 13 - Bring it to Production" class=dd-item><a href=/securesupplychain/2023-06-28-securesupplychain-step13/>Step 13 - Bring it to Production</a></li></ul></li><li data-nav-id=/general/ title=General class=dd-item><a href=/general/ class=has-children><span class=menu-title>General</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/general/2020/05/basic-usage-of-git/ title="Basic usage of git" class=dd-item><a href=/general/2020/05/basic-usage-of-git/>Basic usage of git</a></li><li data-nav-id=/general/2020/04/red-hat-satellite-cheat-sheet/ title="Red Hat Satellite Cheat Sheet" class=dd-item><a href=/general/2020/04/red-hat-satellite-cheat-sheet/>Red Hat Satellite Cheat Sheet</a></li></ul></li><li data-nav-id=/ansible/ title=Ansible class=dd-item><a href=/ansible/ class=has-children><span class=menu-title>Ansible</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/ansible/2021/11/ansible-style-guide/ title="Ansible Style Guide" class=dd-item><a href=/ansible/2021/11/ansible-style-guide/>Ansible Style Guide</a></li><li data-nav-id=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" class=dd-item><a href=/ansible/2021/10/automation-controller-and-ldap-authentication/>Automation Controller and LDAP Authentication</a></li><li data-nav-id=/ansible/2021/07/ansible-tower-and-downloading-collections/ title="Ansible Tower and downloading collections" class=dd-item><a href=/ansible/2021/07/ansible-tower-and-downloading-collections/>Ansible Tower and downloading collections</a></li><li data-nav-id=/ansible/2020/04/ansible-azure-resource-manager-example/ title="Ansible - Azure Resource Manager Example" class=dd-item><a href=/ansible/2020/04/ansible-azure-resource-manager-example/>Ansible - Azure Resource Manager Example</a></li><li data-nav-id=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ title="DO410 Ansible and Ansible Tower training notes" class=dd-item><a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/>DO410 Ansible and Ansible Tower training notes</a></li></ul></li><li data-nav-id=/service-mesh/ title="Service Mesh" class=dd-item><a href=/service-mesh/ class=has-children><span class=menu-title>Service Mesh</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/service-mesh/2020/05/enable-automatic-route-creation/ title="Enable Automatic Route Creation" class=dd-item><a href=/service-mesh/2020/05/enable-automatic-route-creation/>Enable Automatic Route Creation</a></li><li data-nav-id=/service-mesh/2020/05/authorization-rbac/ title="Authorization (RBAC)" class=dd-item><a href=/service-mesh/2020/05/authorization-rbac/>Authorization (RBAC)</a></li><li data-nav-id=/service-mesh/2020/04/deploy-example-bookinfo-application/ title="Deploy Example Bookinfo Application" class=dd-item><a href=/service-mesh/2020/04/deploy-example-bookinfo-application/>Deploy Example Bookinfo Application</a></li><li data-nav-id=/service-mesh/2020/04/service-mesh-1.1-released/ title="Service Mesh 1.1 released" class=dd-item><a href=/service-mesh/2020/04/service-mesh-1.1-released/>Service Mesh 1.1 released</a></li><li data-nav-id=/service-mesh/2020/04/authentication-jwt/ title="Authentication JWT" class=dd-item><a href=/service-mesh/2020/04/authentication-jwt/>Authentication JWT</a></li><li data-nav-id=/service-mesh/2020/04/mutual-tls-authentication/ title="Mutual TLS Authentication" class=dd-item><a href=/service-mesh/2020/04/mutual-tls-authentication/>Mutual TLS Authentication</a></li><li data-nav-id=/service-mesh/2020/04/fault-injection/ title="Fault Injection" class=dd-item><a href=/service-mesh/2020/04/fault-injection/>Fault Injection</a></li><li data-nav-id=/service-mesh/2020/04/limit-egress/external-traffic/ title="Limit Egress/External Traffic" class=dd-item><a href=/service-mesh/2020/04/limit-egress/external-traffic/>Limit Egress/External Traffic</a></li><li data-nav-id=/service-mesh/2020/04/advanced-routing-example/ title="Advanced Routing Example" class=dd-item><a href=/service-mesh/2020/04/advanced-routing-example/>Advanced Routing Example</a></li><li data-nav-id=/service-mesh/2020/04/routing-example/ title="Routing Example" class=dd-item><a href=/service-mesh/2020/04/routing-example/>Routing Example</a></li><li data-nav-id=/service-mesh/2020/03/ingress-with-custom-domain/ title="Ingress with custom domain" class=dd-item><a href=/service-mesh/2020/03/ingress-with-custom-domain/>Ingress with custom domain</a></li><li data-nav-id=/service-mesh/2020/03/ingress-traffic/ title="Ingress Traffic" class=dd-item><a href=/service-mesh/2020/03/ingress-traffic/>Ingress Traffic</a></li><li data-nav-id=/service-mesh/2020/03/deploy-microservices/ title="Deploy Microservices" class=dd-item><a href=/service-mesh/2020/03/deploy-microservices/>Deploy Microservices</a></li><li data-nav-id=/service-mesh/2020/03/installation/ title=Installation class=dd-item><a href=/service-mesh/2020/03/installation/>Installation</a></li></ul></li><li data-nav-id=/acs/ title="Advanced Cluster Security" class=dd-item><a href=/acs/ class=has-children><span class=menu-title>Advanced Cluster Security</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/acs/2021-12-11-acsauth/ title="Advanced Cluster Security - Authentication" class=dd-item><a href=/acs/2021-12-11-acsauth/>Advanced Cluster Security - Authentication</a></li></ul></li><li data-nav-id=/azure/ title=Azure class=dd-item><a href=/azure/ class=has-children><span class=menu-title>Azure</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/azure/2021-10-29-private-aro/ title="Stumbling into Azure Part II: Setting up a private ARO cluster" class=dd-item><a href=/azure/2021-10-29-private-aro/>Stumbling into Azure Part II: Setting up a private ARO cluster</a></li><li data-nav-id=/azure/2021-10-17-s2s-vpn/ title="Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing" class=dd-item><a href=/azure/2021-10-17-s2s-vpn/>Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing</a></li></ul></li><li data-nav-id=/java/ title=Java class=dd-item><a href=/java/ class=has-children><span class=menu-title>Java</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/java/2022-02-25-jpa-disconnected-entity/ title="Adventures in Java Land: JPA disconnected entities" class=dd-item><a href=/java/2022-02-25-jpa-disconnected-entity/>Adventures in Java Land: JPA disconnected entities</a></li></ul></li><li data-nav-id=/quay/ title=Quay class=dd-item><a href=/quay/ class=has-children><span class=menu-title>Quay</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/quay/2025-09-19-quay-integrate-keycloak/ title="Red Hat Quay Registry - Integrate Keycloak" class=dd-item><a href=/quay/2025-09-19-quay-integrate-keycloak/>Red Hat Quay Registry - Integrate Keycloak</a></li><li data-nav-id=/quay/2021-09-07-quay-upgrade-3.4/ title="Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator" class=dd-item><a href=/quay/2021-09-07-quay-upgrade-3.4/>Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator</a></li><li data-nav-id=/quay/2020-05-13-quay-tutorial1/ title="Red Hat Quay Registry - Overview and Installation" class=dd-item><a href=/quay/2020-05-13-quay-tutorial1/>Red Hat Quay Registry - Overview and Installation</a></li></ul></li><li data-nav-id=/legaldisclosure/ title="Legal Disclosure" class=dd-item><a href=/legaldisclosure/><span class=menu-title>Legal Disclosure</span></a></li><li data-nav-id=/rss/ title="RSS Feeds" class=dd-item><a href=/rss/><span class=menu-title>RSS Feeds</span></a></li></ul><section id=footer></section></div></nav><section id=body class=post-content><div id=overlay></div><aside id=toc-field class="hidden lg:block tableOfContentContainer"><header id=TableOfContentsHeader>What's on this Page</header><nav id=TableOfContents><ul><li><a href=#_prerequisites>Prerequisites</a></li><li><a href=#_introduction>Introduction</a></li><li><a href=#_installing_openshift_logging_stack>Installing OpenShift Logging Stack</a><ul><li><a href=#_analyzing_chart_yaml>Analyzing Chart.yaml</a></li><li><a href=#_configuration_of_the_chart>Configuration of the Chart</a></li><li><a href=#_installing_the_operator>Installing the Operator</a></li><li><a href=#_verifying_the_operator_deployment>Verifying the Operator Deployment</a></li><li><a href=#_creating_a_new_backingstore_for_openshift_data_foundation>Creating a new BackingStore for OpenShift Data Foundation</a></li><li><a href=#_generating_secret_for_lokistack>Generating Secret for LokiStack</a></li><li><a href=#_configuring_the_lokistack>Configuring the LokiStack</a></li><li><a href=#_configuring_clusterlogging>Configuring ClusterLogging</a></li></ul></li><li><a href=#_tips_and_tricks>Tips and Tricks</a></li><li><a href=#_conclusion>Conclusion</a></li></ul></nav><div id=navigation><a class=nav-prev href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ title="Multiple Sources for Applications in Argo CD"><i class="fa fa-chevron-left"></i></a>
<a class=nav-next href=/gitopscollection/2024-05-17-configure-minio-buckets/ title="Configure Buckets in MinIO using GitOps" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></aside><div class="padding highlightable"><header><div id=top-nav class=margin-bottom-15><section id=homelinks class=text-align-center><ul class="list-no-style margin-0 padding-0 overflow-hidden text-align-left vertical-align-middle"><li class="list-horizontal padding-left-15 padding-right-15"><a class=padding-topnav href=/><i class='fas fa-home'></i> Home</a></li><li class="dropdown list-horizontal left padding-left-15 padding-right-15"><div class="submenu left static inline-block"><a class=padding-topnav href=https://blog.stderr.at/authors><svg stroke="currentcolor" fill="#d2d2d2" stroke-width="0" viewBox="0 0 17 17" class="relative z-20 h-6 w-6" height="1em" width="1em"><g/><path d="M16.499 1.843 15.096.44c-.566-.566-1.555-.566-2.122.0L5.438 7.976l-1.722 5.287 5.249-1.765 7.534-7.534c.283-.283.439-.66.439-1.061s-.156-.777-.439-1.06zM5.584 10.758l.638-1.957 1.92 1.919-1.942.653-.616-.615zM6.832 7.996l3.986-3.986 2.11 2.11-3.986 3.986-2.11-2.11zm4.693-4.693.729-.729 2.11 2.11-.729.729-2.11-2.11zM15.792 3.257l-.72.721-2.11-2.11.72-.721c.19-.189.519-.189.707.0l1.403 1.403c.094.095.146.22.146.354s-.052.258-.146.353zM15 7.5h1V17H0V2h7.5v1H1v13h14V7.5z"/></svg> About Us<i class='fa fa-chevron-down padding-left-25rem' '></i></a><div class="absolute submenu-div"><a href=/authors/thomas-jungbauer class="submenu-style submenu-link display-block"><i></i>Thomas Jungbauer</a>
<a href=/authors/toni-schmidbauer class="submenu-style submenu-link display-block"><i></i>Toni Schmidbauer</a>
<a href=/legaldisclosure class="submenu-style submenu-link display-block"><i></i>Legal Disclosure</a></div></div></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/categories><i class='far fa-bookmark padding-right-25rem'></i> Catagories</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/tags><i class='fas fa-tags padding-right-25rem'></i> Tags</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/archive><i class='fas fa-box padding-right-25rem'></i> History</a></li><li class="list-horizontal right padding-left-15 padding-right-15"><a class=padding-topnav href=https://charts.stderr.at/><svg class="list-horizontal padding-right-25rem" fill="#d2d2d2" width="28" height="28" viewBox="0 0 256 297" class="mr-3 h-7 w-7 fill-current text-omega-500"><path d="m60.349 70.537-.811-.767a77.726 77.726.0 01-.278-.266c-7.589-7.29-13.462-15.721-17.01-25.685-.951-2.673-1.68-5.397-1.621-8.262l.012-.375c.012-.285.011-.571.031-.856.268-3.877 2.863-5.836 6.652-4.918 1.195.31 2.351.753 3.447 1.321 4.007 2.01 7.297 4.948 10.317 8.185l.312.336a67.685 67.685.0 0113.066 20.108c.068.177.146.35.234.518a.308.308.0 00.061.074l.212.181.064.057a106.079 106.079.0 0148.733-14.954l-.043-.218-.112-.585a11.87 11.87.0 00-.073-.35l-.041-.17a67.666 67.666.0 01-1.596-22.23 50.571 50.571.0 012.674-13.09 18.838 18.838.0 013.294-6.118 9.436 9.436.0 011.902-1.697 4.226 4.226.0 014.832-.034 10.393 10.393.0 013.513 4.049 31.912 31.912.0 013.165 8.828 67.672 67.672.0 011.277 19.852 57.502 57.502.0 01-2.1 11.976c.714.132 1.428.258 2.14.382l3.2.552c2.481.43 4.946.88 7.38 1.458a112.29 112.29.0 0112.296 3.611c4.059 1.49 8.03 3.211 11.891 5.155 2.227 1.11 4.39 2.346 6.564 3.612l1.866 1.09c.936.548 1.877 1.096 2.829 1.637l.08-.163.178-.354c.06-.125.118-.254.167-.387a65.359 65.359.0 0119.79-28.128 22.711 22.711.0 017.11-4.14c.717-.25 1.46-.42 2.213-.508 3.768-.431 5.35 1.94 5.628 4.771a18.011 18.011.0 01-.465 6.228 52.875 52.875.0 01-6.147 14.357l-.308.493c-3.982 6.435-8.69 12.247-14.633 16.98l-.46.362a2.62 2.62.0 00-.12.1l-.192.177-.24.228-.098.09a106.935 106.935.0 0115.996 18.576 6.594 6.594.0 01-1.016.179c-6.373.01-12.746-.011-19.12.028a2.408 2.408.0 01-1.908-1.017 88.947 88.947.0 00-53.039-27.999 86.23 86.23.0 00-17.453-.75l-.76.047a88.064 88.064.0 00-49.207 18.785l-.44.349a84.25 84.25.0 00-10.21 9.529 2.844 2.844.0 01-2.324 1.057 1482.46 1482.46.0 00-10.958-.026l-8.6.005c.029-.111.077-.245.144-.398l.09-.193a7.07 7.07.0 01.107-.211l.123-.23.14-.245.157-.262.171-.277.186-.292.306-.464.337-.493.241-.343.384-.535.134-.183.419-.564.292-.386.302-.394.472-.604.491-.616.338-.418.346-.42.352-.425.36-.426.365-.428.558-.644.378-.43.382-.428.386-.426.39-.425c1.896-2.049 3.859-4.036 5.86-6.045l2.013-2.019c.675-.677 1.353-1.36 2.033-2.052zm155.187 136.407a106.248 106.248.0 01-14.42 16.339l1.12.933a65.151 65.151.0 0120.26 28.96 20.823 20.823.0 011.325 8.673 8.954 8.954.0 01-.363 1.95l-.087.271a4.335 4.335.0 01-4.907 3.021 13.373 13.373.0 01-4.067-1.206 30.816 30.816.0 01-5.523-3.498 64.717 64.717.0 01-19.627-27.589l-.262-.713-.357-.922a117.082 117.082.0 01-15.045 8.426 109.274 109.274.0 01-16.052 5.85 112.816 112.816.0 01-17.025 3.24l.078.41.07.373c.023.12.047.234.073.348l.042.168a65.667 65.667.0 011.787 21.92 48.604 48.604.0 01-2.66 13.52 47.067 47.067.0 01-2.505 5.26 8.054 8.054.0 01-1.407 1.788c-2.394 2.471-5.253 2.492-7.586-.045a16.409 16.409.0 01-2.35-3.379c-1.85-3.474-2.803-7.252-3.483-11.104a70.293 70.293.0 01-.818-15.918 56.83 56.83.0 011.568-10.873l.167-.667c.085-.32.162-.644.224-.969a.292.292.0 00-.015-.132l-.067-.23a3.701 3.701.0 01-.021-.082A105.937 105.937.0 0174.9 236.033l-.56 1.24-.102.231a66.452 66.452.0 01-18.164 24.56l-.423.355a22.954 22.954.0 01-7.247 4.186 7.272 7.272.0 01-3.919.42 4.282 4.282.0 01-3.19-2.55l-.06-.15c-.783-1.894-.718-3.859-.478-5.815l.067-.51a33.355 33.355.0 012.59-8.572 67.669 67.669.0 0115.947-22.714l.556-.52c.093-.086.184-.173.275-.262.086-.124.16-.256.22-.394A107.611 107.611.0 0143.287 206.7l.19-.017.65-.062c.193-.018.369-.03.545-.03 5.06-.005 10.12.009 15.179-.008l3.794-.018a2.83 2.83.0 012.228.978 88.388 88.388.0 0023.1 17.07l.6.304a84.178 84.178.0 0029.898 8.887c28.343 2.755 52.723-5.838 73.142-25.777a4.599 4.599.0 013.605-1.47c2.947.036 5.896.044 8.844.042l5.896-.01 2.949-.002h1.523l.106.356zm-26.342-90.316c.373.0.742.006 1.109.013l1.093.022c.724.013 1.439.015 2.148-.026l.531-.039c1.802-.163 3.091.481 4.405 1.692 6.323 5.826 12.7 11.592 19.071 17.364l3.966 3.595.45.4.675.595.799-.68c.171-.147.339-.293.503-.443a19230.8 19230.8.0 0023.608-21.525 3.277 3.277.0 012.362-.995l.167.005c1.21.049 2.422.045 3.66.036l1.498-.011c.252-.002.506-.003.761-.003v63.38a.948.948.0 01-.097.021l-.14.02-.18.02-.22.02-.255.017-.447.026-.897.037-1.06.032-1.188.025-1.817.025-1.639.01-1.653.002-1.082-.005-1.3-.013-.978-.015-.686-.015-.637-.017-.762-.028-.496-.024-.424-.027-.239-.02-.2-.02a4.685 4.685.0 01-.087-.012l-.141-.022v-32.098l-.323-.153-16.383 14.942-16.516-14.879-.316.116-.007 2.679v29.509h-16.497c-.016-.053-.031-.251-.046-.58l-.017-.455-.017-.575-.024-1.076-.023-1.314-.03-2.093-.033-3.101-.047-5.884-.032-5.84-.027-7.156-.017-8.245-.002-5.379.009-6.732.013-3.813.023-4.033.025-2.81.025-1.825.022-1.095.015-.588.017-.47.018-.345c.003-.046.006-.088.01-.124zm-152.24.073h16.398c.013.042.026.18.039.406l.018.404.018.53.016.652.025 1.19.036 2.508.027 2.424.028 3.479.037 6.391.017 4.372.018 8.267.003 5.583-.006 6.347-.01 4.294-.02 4.749-.022 3.515-.035 3.555-.02 1.461-.014.844-.016.732-.017.616-.017.494-.018.365c-.01.15-.02.25-.03.295H36.996a277.08 277.08.0 01-.048-6.9l.009-3.445-.001-1.722-.004-1.707-.002-3.422.003-6.924H16.63v23.904a1.2 1.2.0 01-.116.027l-.162.026-.205.024-.383.035-.303.021-.706.04-.61.025-.904.03-.737.02-1.043.02-1.66.022-1.716.01H6.66l-1.384-.009-1.551-.022-.939-.02-.84-.027-.553-.024-.329-.017-.293-.019-.367-.03a7.294 7.294.0 01-.103-.011l-.172-.023a1.687 1.687.0 01-.128-.024v-63.324h16.564v22.37a.972.972.0 00.096.02l.138.021.177.02.336.028.415.026.665.033.576.022.635.02 1.423.036 1.864.032 1.135.014 1.761.014 1.789.006 2.343-.005 1.395-.01 1.308-.017 1.193-.022 1.05-.028.88-.035.433-.023.357-.026.192-.02a.93.93.0 00.08-.009l.133-.02.012-4.084.003-1.375.002-2.853-.002-14.142zm36.054 63.45v-63.262c.03-.01.09-.02.18-.028l.22-.018.14-.01.525-.025.682-.025.826-.024 1.308-.029 1.52-.027 1.704-.025 4.374-.046 2.123-.016 5.002-.026 3.952-.01 4.384.002 3.563.012 2.737.019 1.99.022 1.67.028.567.013.732.021.58.024.296.017.22.018.08.01v13.482c-.528.038-1.073.11-1.619.111l-9.63.007-11.413-.002v10.487h20.058v13.95h-19.88a3.407 3.407.0 00-.078.448l-.03.255-.026.294-.037.505-.023.375-.03.615-.026.666-.027.951-.016.747-.01.764-.008 1.028.003 1.264.008.73.009.467.01.45.021.632.026.573.02.345.022.311.025.274.014.122c.508.035 1.052.102 1.597.103l9.63.007 11.415-.002v13.426h-39.38zm58.17.024a5.015 5.015.0 01-.035-.479l-.016-.437-.015-.562-.014-.68-.02-1.231-.018-1.466-.03-3.56-.02-3.516-.019-5.581-.01-7.949.006-10.192.022-8.11.03-6.587.03-4.327.03-3.08.026-2.056.014-.877.022-1.109.016-.594.016-.472.017-.343c.009-.138.017-.226.026-.26h16.338v46.775l.503.03.46.028.431.023c.14.005.279.009.417.009l9.701.005 11.45-.001v16.6h-39.358z"/></svg> Helm Charts</a></li></ul></section><div class=sub-top-nav><div id=breadcrumbs class="display-inline float-unset" itemscope itemtype=http://schema.org/BreadcrumbList><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"><p class=hide>&nbsp;navi</p></i></a></span><span id=toc-menu><i class="fas fa-list-alt"><span class=hidden-toc>navigation</span></i></span>
<span class=links><span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/><span itemprop=name>YAUB Yet Another Useless Blog</span><meta itemprop=position content='1'></a></span> > <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/gitopscollection/><span itemprop=name>GitOps Episodes</span><meta itemprop=position content='2'></a></span> > Installing OpenShift Logging using GitOps</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#_prerequisites>Prerequisites</a></li><li><a href=#_introduction>Introduction</a></li><li><a href=#_installing_openshift_logging_stack>Installing OpenShift Logging Stack</a><ul><li><a href=#_analyzing_chart_yaml>Analyzing Chart.yaml</a></li><li><a href=#_configuration_of_the_chart>Configuration of the Chart</a></li><li><a href=#_installing_the_operator>Installing the Operator</a></li><li><a href=#_verifying_the_operator_deployment>Verifying the Operator Deployment</a></li><li><a href=#_creating_a_new_backingstore_for_openshift_data_foundation>Creating a new BackingStore for OpenShift Data Foundation</a></li><li><a href=#_generating_secret_for_lokistack>Generating Secret for LokiStack</a></li><li><a href=#_configuring_the_lokistack>Configuring the LokiStack</a></li><li><a href=#_configuring_clusterlogging>Configuring ClusterLogging</a></li></ul></li><li><a href=#_tips_and_tricks>Tips and Tricks</a></li><li><a href=#_conclusion>Conclusion</a></li></ul></nav></div></div><div class=social><a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.stderr.at%2fgitopscollection%2f2024-05-24-install-openshift-logging%2f" class="facebook no-highlight" aria-label="share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-facebook" width="24" height="24" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&amp;url=https%3a%2f%2fblog.stderr.at%2fgitopscollection%2f2024-05-24-install-openshift-logging%2f&amp;text=Installing%20OpenShift%20Logging%20using%20GitOps" class="twitter no-highlight" aria-label="share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-x" width="100" height="100" viewBox="0 0 30 30"><path d="M26.37 26l-8.795-12.822.015.012L25.52 4h-2.65l-6.46 7.48L11.28 4H4.33l8.211 11.971L12.54 15.97 3.88 26h2.65l7.182-8.322L19.42 26h6.95zM10.23 6l12.34 18h-2.1L8.12 6h2.11z"/></svg></div></div></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.stderr.at%2fgitopscollection%2f2024-05-24-install-openshift-logging%2f&amp;source=https%3a%2f%2fblog.stderr.at%2fgitopscollection%2f2024-05-24-install-openshift-logging%2f&amp;title=Installing%20OpenShift%20Logging%20using%20GitOps&amp;summary=Installing%20OpenShift%20Logging%20using%20GitOps" class="linkedin no-highlight" aria-label="share on Linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg></div></div></a><a href="whatsapp://send?text=Installing%20OpenShift%20Logging%20using%20GitOps%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aInstalling%20OpenShift%20Logging%20using%20a%20GitOps%20approach.%0a%0ahttps%3a%2f%2fblog.stderr.at%2fgitopscollection%2f2024-05-24-install-openshift-logging%2f%0a" class="whatsapp no-highlight" aria-label="share on Whatsapp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a href="mailto:?subject=TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more - Installing%20OpenShift%20Logging%20using%20GitOps.&amp;body=Installing%20OpenShift%20Logging%20using%20GitOps%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aInstalling%20OpenShift%20Logging%20using%20a%20GitOps%20approach.%0a%0ahttps%3a%2f%2fblog.stderr.at%2fgitopscollection%2f2024-05-24-install-openshift-logging%2f%0a" class="email no-highlight" aria-label="share on Email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg></div></div></a><a href=/rss/ class="rss no-highlight" aria-label=RSS><div class="resp-sharing-button resp-sharing-button--rss resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.731 455.731"><g><rect x="0" y="0" style="fill:transparent" width="455.731" height="455.731"/><g><path style="" d="M296.208 159.16C234.445 97.397 152.266 63.382 64.81 63.382v64.348c70.268.0 136.288 27.321 185.898 76.931 49.609 49.61 76.931 115.63 76.931 185.898h64.348C391.986 303.103 357.971 220.923 296.208 159.16z"/><path style="" d="M64.143 172.273v64.348c84.881.0 153.938 69.056 153.938 153.939h64.348c0-120.364-97.922-218.287-218.286-218.287z"/><circle style="" cx="109.833" cy="346.26" r="46.088"/></g></g></svg></div></div></a></div></div></div></header><div id=head-tags><div class=tags><a class=tag-link href=/tags/logging>Logging</a>
<a class=tag-link href=/tags/openshift>OpenShift</a>
<a class=tag-link href=/tags/ocp>OCP</a>
<a class=tag-link href=/tags/gitops>GitOps</a>
<a class=tag-link href=/tags/argo-cd>Argo CD</a>
<a class=tag-link href=/tags/storage>Storage</a>
<a class=tag-link href=/tags/s3>S3</a>
<a class=tag-link href=/tags/object-storage>Object Storage</a></div></div><div id=body-inner><h1 class="gradient-header article">Installing OpenShift Logging using GitOps</h1><div class="catagories tracked"><a id=textElement class="category-link no-highlight" href=/categories/openshift>OpenShift</a>
<a id=textElement class="category-link no-highlight" href=/categories/gitops>GitOps</a></div><p class=tracked><time class="f6 mv4 dib tracked" datetime=2024-05-24T00:00:00Z><strong>May 24, 2024</strong>
</time><span class=divider>-
</span><span class=author><a href=/authors/thomas-jungbauer><img class=avatar src=/img/authors/thomas-jungbauer.png alt="Thomas Jungbauer">
Thomas Jungbauer
</a>( Lastmod: 2025-12-02 )
</span><span class=divider>-
</span><span class=readtime><strong>16 min read</strong></span></p><div class=paragraph><p><a href=https://docs.openshift.com/container-platform/4.15/observability/logging/logging_release_notes/logging-5-9-release-notes.html target=_blank rel=noopener>OpenShift Logging</a> is one of the more complex things to install and configure on an OpenShift cluster. Not because the service or Operators are so complex to understand, but because of the dependencies logging has. Besides the logging operator itself, the Loki operator is required, the Loki operator requires access to an object storage, that might be configured or is already available.</p></div><div class=paragraph><p>In this article, I would like to demonstrate the configuration of the full stack using an object storage from OpenShift Data Foundation. This means:</p></div><div class=ulist><ul><li><p>Installing the logging operator into the namespace openshift-logging</p></li><li><p>Installing the Loki operator into the namespace openshift-operators-redhat</p></li><li><p>Creating a new BackingStore and BucketClass</p></li><li><p>Generating the Secret for Loki to authenticate against the object storage</p></li><li><p>Configuring the LokiStack resource</p></li><li><p>Configuring the ClusterLogging resource</p></li></ul></div><div class=paragraph><p>All steps will be done automatically. In case you have S3 storage available, or you are not using OpenShift Data Foundation, the setup will be a bit different. For example, you do not need to create a BackingStore or the Loki authentication Secret.</p></div><div class=sect1><h2 id=_prerequisites>Prerequisites</h2><div class=sectionbody><div class="olist arabic"><ol class=arabic><li><p>OpenShift 4</p></li><li><p>Argo CD (OpenShift GitOps) deployed</p></li><li><p>OpenShift Data Foundation (ODF) deployed and ready to provide object storage.</p></li><li><p>Enough available compute resources to deploy LokiStack. Verify the official <a href=https://docs.openshift.com/container-platform/4.15/observability/logging/log_storage/installing-log-storage.html target=_blank rel=noopener>OpenShift Logging documentation</a> to see which option might need which resources.</p></li></ol></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>For ODF it would be enough to deploy object storage only, instead of the full storage stack based on Ceph. In this case, the so-called <strong>MultiCloudObjectGateway</strong> option is used, which creates (virtualizes) object storage on top of an existing StorageClass</td></tr></tbody></table></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content>If ODF object storage based on Noobaa should be used, then it makes sense to think about the data retention process, which will take care of removing old data from the storage. It is recommended to configure this directly on the object storage, because this is much more compute-friendly, then letting OpenShift Logging take care of that. The configuration depends on the object storage vendor. In the case of Noobaa, I have prepared a separate article: <a href=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/>Noobaa Bucket Data Retention Lifecycle</a></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=_introduction>Introduction</h2><div class=sectionbody><div class=paragraph><p>The main resources of OpenShift Logging are the three custom resources: <strong>ClusterLogging</strong>, <strong>ClusterLogForwarder</strong> and <strong>LokiStack</strong>. The first two are provided by the OpenShift Logging Operator, the last one is provided by the Loki Operator. ClusterLogForwarder is an optional configuration. It allows us to forward logs to external destinations, such as Splunk, or to forward the OpenShift audit logs to Loki. (They are not stored by default). The LokiStack resource requires an available object storage to be able to start its workloads.</p></div><div class=paragraph><p>In my case, I would like to configure everything automatically. This means, that I also want to configure the object or S3 storage and create the required authentication secret for Loki without manual intervention. This can be easily done using ODF.</p></div><div class=paragraph><p>The <a href=/gitopscollection/2024-04-02-configure_app_of_apps/>Configure App-of-Apps</a> installed an Argo CD Application called <strong>in-cluster-setup-openshift-logging</strong>:</p></div><div class=imageblock><div class=content><img src="/gitopscollection/images/setup-openshift-logging.png?width=720px" alt="Argo CD Application: setup-openshift-logging"></div><div class=title>Figure 1. Argo CD Application: setup-openshift-logging</div></div><div class=paragraph><p>This Argo CD Application uses the following path to find the Helm Chart: <a href=https://github.com/tjungbauer/openshift-clusterconfig-gitops/blob/main/clusters/management-cluster/setup-openshift-logging target=_blank rel=noopener>setup-openshift-logging</a></p></div><div class=paragraph><p>This Helm chart is a <strong>wrapper chart</strong> that uses sub-charts as dependencies to install and configure the operator as well as to do some OpenShift Jobs on top, for example, creating the required Secret for LokiStack.</p></div><div class=paragraph><p>The deployment workflow will go through the sub-charts and look like the following:</p></div><div class=imageblock><div class=content><img src=/gitopscollection/images/logging-deployment-flow.png alt="Deployment Workflow"></div><div class=title>Figure 2. Deployment Workflow</div></div><div class=paragraph><p>While this looks quite huge and complex, the idea of the sub-charts is quite simple: Do a small specific task, that can be reused by other charts. For example, the NetworkObservability Operator also required an object storage and Loki. I can easily reuse the sub-charts without repeating the logic behind them.</p></div></div></div><div class=sect1><h2 id=_installing_openshift_logging_stack>Installing OpenShift Logging Stack</h2><div class=sectionbody><div class=sect2><h3 id=_analyzing_chart_yaml>Analyzing Chart.yaml</h3><div class=paragraph><p>Lets examine the <a href=https://github.com/tjungbauer/openshift-clusterconfig-gitops/blob/main/clusters/management-cluster/setup-openshift-logging/Chart.yaml target=_blank rel=noopener>Chart.yaml</a> file to see which dependencies are used:</p></div><div class=paragraph><p>The file looks like the following. The Chart has a lot of dependencies on sub-charts, that have been created to make specific, small and defined operations re-useable for multiple Charts. A total number of 6 sub-charts are used:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>dependencies:
  - name: helper-operator <i class=conum data-value=1></i><b>(1)</b>
    version: ~1.0.18
    repository: https://charts.stderr.at/
  - name: helper-status-checker <i class=conum data-value=2></i><b>(2)</b>
    version: ~4.0.0
    repository: https://charts.stderr.at/
    condition: helper-status-checker.enabled
  - name: openshift-logging <i class=conum data-value=3></i><b>(3)</b>
    version: ~2.0.0
    repository: https://charts.stderr.at/
  - name: helper-loki-bucket-secret <i class=conum data-value=4></i><b>(4)</b>
    version: ~1.0.0
    repository: https://charts.stderr.at/
    condition: helper-loki-bucket-secret.enabled
  - name: helper-objectstore <i class=conum data-value=5></i><b>(5)</b>
    version: ~1.0.0
    repository: https://charts.stderr.at/
    condition: helper-objectstore.enabled
  - name: helper-lokistack <i class=conum data-value=6></i><b>(6)</b>
    version: ~1.0.0
    repository: https://charts.stderr.at/
    condition: helper-lokistack.enabled</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Dependency: <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-operator target=_blank rel=noopener>Helper Operator</a></td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Dependency: <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-status-checker target=_blank rel=noopener>Helper Status Checker</a></td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Dependency: <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/openshift-logging target=_blank rel=noopener>OpenShift Logging</a></td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Dependency: <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-loki-bucket-secret target=_blank rel=noopener>Helper Loki Bucket Secret</a></td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Dependency: <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-objectstore target=_blank rel=noopener>Helper Objectstore</a></td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Dependency: <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-lokistack target=_blank rel=noopener>Helper Lokistack</a></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>Verify the READMEs of the different Charts for detailed information on how to configure them.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_configuration_of_the_chart>Configuration of the Chart</h3><div class=paragraph><p>To configure OpenShift Logging the <strong><a href=https://github.com/tjungbauer/openshift-clusterconfig-gitops/blob/main/clusters/management-cluster/setup-openshift-logging/values.yaml target=_blank rel=noopener>values file</a></strong> of the wrapper Chart must be prepared accordingly.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>The important thing here is, that any value that should be bypassed to a sub-chart is defined under the name of the sub-chart. For example, everything under <strong>helper-operator:</strong> will be sent to the helper-operator Chart and is used there for its configuration.</td></tr></tbody></table></div><div class=paragraph><p>Lets walk through the configuration for each sub-chart in the order they are required:</p></div></div><div class=sect2><h3 id=_installing_the_operator>Installing the Operator</h3><div class=paragraph><p>The first thing to do is to deploy the Operators themselves. For OpenShift Logging two Operators are required:</p></div><div class="olist arabic"><ol class=arabic><li><p>OpenShift Logging</p></li><li><p>Loki</p></li></ol></div><div class=paragraph><p>Loki might be installed already due to a different dependency. Maybe you have deployed the Network Observability Operator previously. In that case, OpenShift Logging is required only.</p></div><div class=paragraph><p>The Helm Chart <strong><a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-operator target=_blank rel=noopener>helper-operator</a></strong> is responsible for deploying the Operators. In the following example, I will deploy both Operators (Logging and Loki) and enable the console plugin for the OpenShift Logging operator:</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>The console plugin will only work when the whole stack, this means when Logging itself, has been rolled out.</td></tr></tbody></table></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>helper-operator:
  console_plugins: <i class=conum data-value=1></i><b>(1)</b>
    enabled: true
    plugins: <i class=conum data-value=2></i><b>(2)</b>
      - logging-view-plugin

  operators:
    cluster-logging-operator: <i class=conum data-value=3></i><b>(3)</b>
      enabled: true <i class=conum data-value=4></i><b>(4)</b>
      syncwave: &#39;0&#39; <i class=conum data-value=5></i><b>(5)</b>

      namespace: <i class=conum data-value=6></i><b>(6)</b>
        name: openshift-logging
        create: true
      subscription: <i class=conum data-value=7></i><b>(7)</b>
        channel: stable
        source: redhat-operators
        approval: Automatic
        operatorName: cluster-logging
        sourceNamespace: openshift-marketplace
      operatorgroup: <i class=conum data-value=8></i><b>(8)</b>
        create: true
        notownnamespace: false

    loki-operator: <i class=conum data-value=9></i><b>(9)</b>
      enabled: true
      namespace: <i class=conum data-value=10></i><b>(10)</b>
        name: openshift-operators-redhat
        create: true
      subscription: <i class=conum data-value=11></i><b>(11)</b>
        channel: stable-5.8
        approval: Automatic
        operatorName: loki-operator
        source: redhat-operators
        sourceNamespace: openshift-marketplace
      operatorgroup: <i class=conum data-value=12></i><b>(12)</b>
        create: true
        notownnamespace: true</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Activate Console Plugin. This will trigger a Kubernetes Job, that will modify the current list of console plugins and add the new plugin to it.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>List of plugins that should be added by the Job. The name of that plugin must be known. In the case of OpenShift Logging it is called <strong>logging-view-plugin</strong></td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Key of the first operator: <strong>cluster-logging-operator</strong>. Everything below here will define the settings for the Logging Operator.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Is this Operator enabled yes/no.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Syncwave for the Operator deployment. (Subscription and OperatorGroup etc.) This should be early enough for other tasks.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>The Namespace where the Operator shall be deployed and if this namespace shall be created.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Configuration of the Subscription resource. This defines the channel (version) that shall be used and whether the approval of the installPlan shall happen automatically or not.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>Configuration of the OperatorGroup. Typically, you will need one when you create a new Namespace. <em>Notownnamespace</em> defines whether or not the targetNamespace is configured for this Operator or if the Operator is available in any Namespace.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>Key of the second Operator: <strong>loki-operator</strong>. Everything below here will define the settings for the Logging Operator.</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>The Namespace where the Operator shall be deployed, must be <strong>openshift-operators-redhat</strong> and if this namespace shall be created.</td></tr><tr><td><i class=conum data-value=11></i><b>11</b></td><td>Configuration of the Subscription resource. This defines the channel (version) that shall be used and whether the approval of the installPlan shall happen automatically or not.</td></tr><tr><td><i class=conum data-value=12></i><b>12</b></td><td>Configuration of the OperatorGroup</td></tr></tbody></table></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content>The <strong>approval</strong> setting can either be <em>Automatic</em> or <em>Manual</em>. If the Operator requires approval to be installed, then this must either be done manually (via WebUI or CLI) or using the <strong>helper-status-checker</strong> chart which automatically can approve existing installPlans (explained in the next section). This is helpful, to automatically deploy the first version of the Operator without the need for manual intervention.</td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>Verify the README at <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-operator target=_blank rel=noopener>Helper Operator</a> to find additional possible configurations. Also, verify the separate article <a href=https://blog.stderr.at/openshift/2023/03/operator-installation-with-argo-cd/>Operator Installation with Argo CD</a> to understand why I am verifying the status of the Operator installation.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_verifying_the_operator_deployment>Verifying the Operator Deployment</h3><div class=paragraph><p>An Operator deployment can take some time and before you continue to configure the operators CRDs you must be sure that the installation finished successfully. Otherwise, the synchronization in Argo CD will fail because the CRD is not ready.</p></div><div class=paragraph><p>There are mainly two tactics to really verify the status of the Operator:</p></div><div class=ulist><ul><li><p>Simply retry a failed sync in Argo CD. This can be done automatically x-times.</p></li><li><p>Verify if the Operator installation succeeded by starting a Kubernetes Job that monitors the status.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>(Custom) Health checks in Argo CD proved to be not 100% accurate because sometimes the Operator says it is "Ready" but the CRD still cannot be configured for some seconds. Looking at you Compliance Operator .</td></tr></tbody></table></div><div class=paragraph><p>I chose the second option, simply because I could also add a second Job that approved pending installPlans in case the deployment was set to manual approval.</p></div><div class=paragraph><p>The Helm Chart <strong><a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-status-checker target=_blank rel=noopener>helper-status-checker</a></strong> has two main purposes:</p></div><div class="olist arabic"><ol class=arabic><li><p>Start a Kubernetes Job to verify the status of one or multiple Operator installation(s)</p></li><li><p>Optional: start a Kubernetes Job to approve the installPlan(s)</p></li></ol></div><div class=paragraph><p>An example configuration, that verifies two Operators, looks like the following:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>helper-status-checker:
  enabled: true <i class=conum data-value=1></i><b>(1)</b>
  approver: false <i class=conum data-value=2></i><b>(2)</b>

  # List of checks that shall be performed.
  checks:
    - operatorName: cluster-logging <i class=conum data-value=3></i><b>(3)</b>
      # -- OPTIONAL: Name of subscription that shall be approved. In some cases the name of the Subscription is different to the name of the operator.
      # @default --operatorName
      subscriptionName: cluster-logging-operator <i class=conum data-value=4></i><b>(4)</b>

      namespace: <i class=conum data-value=5></i><b>(5)</b>
        name: openshift-logging

      serviceAccount: <i class=conum data-value=6></i><b>(6)</b>
        name: &#34;status-checker-logging&#34;

    - operatorName: loki-operator <i class=conum data-value=7></i><b>(7)</b>
      namespace:
        name: openshift-operators-redhat

      serviceAccount:
        name: &#34;status-checker-loki&#34;</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Enable the status checker.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Enable the installPlan approver. Only required if the approval strategy for an Operator is set to <em>Manual</em>.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Verify the status of the first Operator <strong>cluster-logging</strong></td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Sometimes the name of the Subscription differs from the Operator name. Logging is such a case. To be able to find which Subscription should be verified, the subscriptionName must be defined here.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Namespace for OpenShift Logging</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Name of the ServiceAccount that will be created to verify the status of the logging operator.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Settings for the 2nd operator: Loki. This one is running in a different Namespace and must be verified there.</td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>Verify the README at <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-status-checker target=_blank rel=noopener>Helper Operator Status Checker</a> to find additional possible configurations.</td></tr></tbody></table></div><div class=paragraph><p>At this stage, the Operators have been deployed and they have been verified if the deployment was finished successfully.</p></div><div class=paragraph><p>Now the real complex part can start</p></div></div><div class=sect2><h3 id=_creating_a_new_backingstore_for_openshift_data_foundation>Creating a new BackingStore for OpenShift Data Foundation</h3><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>If you want to use a different storage solution or you have a bucket already, you can skip this section and simply create the LokiStack Secret manually.</td></tr></tbody></table></div><div class=paragraph><p>In the case that ODF is used and a BackingStore together with a BucketClass shall be created another sub-chart called <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-objectstore target=_blank rel=noopener>Helper ObjectStore</a> can be used.</p></div><div class=paragraph><p>It will help you to create a:</p></div><div class=ulist><ul><li><p>BackingStore</p></li><li><p>BucketClass</p></li><li><p>StorageClass</p></li><li><p>BucketClaim</p></li></ul></div><div class=paragraph><p>This fully automates the creation of the bucket and the required Class when using ODF. As a prerequisite, OpenShift Data Foundation (ODF) must be configured and available of course.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>This is completely optional. If you want to use a different storage solution and have the buckets ready, you can simply create the Secret that Loki requires to authenticate at the storage. In this case, you can ignore this and the next section.</td></tr></tbody></table></div><div class=paragraph><p>The following example will create a BackingStore with the size of 700Gi for our OpenShift Logging. A bucket named <strong>logging-bucket</strong> is created and can be used to store the logs.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>helper-objectstore:
  enabled: true
  syncwave: 1 <i class=conum data-value=1></i><b>(1)</b>
  backingstore_name: logging-backingstore <i class=conum data-value=2></i><b>(2)</b>
  backingstore_size: 700Gi <i class=conum data-value=3></i><b>(3)</b>
  limits_cpu: 500m <i class=conum data-value=4></i><b>(4)</b>
  limits_memory: 2Gi

  pvPool: <i class=conum data-value=5></i><b>(5)</b>
    numOfVolumes: 1
    type: pv-pool

  baseStorageClass: gp3-csi <i class=conum data-value=6></i><b>(6)</b>
  storageclass_name: logging-bucket-storage-class <i class=conum data-value=7></i><b>(7)</b>

  bucket: <i class=conum data-value=8></i><b>(8)</b>
    enabled: true
    name: logging-bucket
    namespace: openshift-logging
    syncwave: 2
    storageclass: logging-bucket-storage-class</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Syncwave to create the BackingStore.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Name of the Backingstore.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Size of the BackingStore. 700Gi is good enough for testing Logging. Keep in mind that data retention should be configured separately for <a href=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/>Noobaa</a>.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Limit for CPU and Memory for the Noobaa (BackingStore) pod. They might need to be adjusted since the original ones are quite small for bigger buckets.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Pool of Persistent Volumes. Currently <strong>pv-pool</strong> is supported by the chart only.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>The basic storage class that shall be used to virtualize ODF object storage on.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>The name of the StorageClass that will be created and used by the BackingStore.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>The configuration of the Bucket and its namespace and storageClass (defined at &lt;7>)</td></tr></tbody></table></div><div class=paragraph><p>Eventually, the BackingClass and the BucketClaim are created and ready.</p></div><div class=imageblock><div class=content><img src="/gitopscollection/images/logging-objectstore.png?width=720px" alt="Ready BackingStore and bound BucketClaim"></div><div class=title>Figure 3. Ready BackingStore and bound BucketClaim</div></div><div class=sect3><h4 id=_custom_argo_cd_health_check_for_backingstore>Custom Argo CD Health Check for BackingStore</h4><div class=paragraph><p>The creation of the BackingStore is a process that will take several minutes. Storage must be prepared, and several services must be started. To let Argo CD wait until the BackingStore is fully operational, instead of blindly continuing with the deployment of Loki and Logging, a custom <strong>Health Check</strong> in Argo CD might help.</p></div><div class=paragraph><p>The following health check should be placed into the Argo CD resource. Be aware, that there might be others already defined.</p></div><div class=paragraph><p>The status of the BackingStore resource inside Argo CD will continue <em>progressing</em> until the status of the resource becomes <em>Ready</em>.</p></div><div class=paragraph><p>Due to different syncwaves, Argo CD will wait for the Ready-status before it continues deploying Loki and Logging.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>  resourceHealthChecks:
    - check: |
        hs = {}
        if obj.status ~= nil then
          if obj.status.phase ~= nil then
            if obj.status.phase == &#34;Ready&#34; then
              hs.status = &#34;Healthy&#34;
              hs.message = obj.status.phase
              return hs
            end
          end
        end
        hs.status = &#34;Progressing&#34;
        hs.message = &#34;Waiting for BackinbgStore to complete&#34;
        return hs
      group: noobaa.io
      kind: BackingStore</code></pre></div></div></div></div><div class=sect2><h3 id=_generating_secret_for_lokistack>Generating Secret for LokiStack</h3><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>If you want to use a different storage solution or you have a bucket already, you can skip this section and simply create the LokiStack Secret manually.</td></tr></tbody></table></div><div class=paragraph><p>Creating the BackingStore and the BucketClaim will generate a Secret and a ConfigMap inside the target namespace. These hold the information about the connection to the object storage.
Both resources are named as the bucket.
The Secret contains the keys: AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY while the ConfigMap stores the information about the URL, region etc.</p></div><div class=paragraph><p>While this is all we need to connect to the object store, Loki itself unfortunately requires a different Secret with a specific format.
Before Loki can be configured, this Secret must be created, containing the keys: access_key_id, access_key_secret, bucketnames, endpoint and region (could be empty)</p></div><div class=paragraph><p>To automate the process another Helm Chart <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-loki-bucket-secret target=_blank rel=noopener>Helper Loki Bucket Secret</a> has been created (we have too few charts) that has the only task to wait until the object store has been created, read the ConfigMap and the Secret and create the required Secret for Loki for us. Easy </p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>helper-loki-bucket-secret:
  enabled: true
  syncwave: 3
  namespace: openshift-logging <i class=conum data-value=1></i><b>(1)</b>
  secretname: logging-loki-s3 <i class=conum data-value=2></i><b>(2)</b>

  bucket:
    name: logging-bucket <i class=conum data-value=3></i><b>(3)</b></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Namespace we are working in</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>The name of the Secret that shall be created</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>The name of the bucket that was created in the previous step to find the source information.</td></tr></tbody></table></div><div class=paragraph><p>A Kubernetes Job is created, that will mount the created Secret and ConfigMap, read their values and create the Secret we need. It will simply execute the following command:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>oc create secret generic {{ .secretname }} --from-literal access_key_id=${bucket_user} \
  --from-literal access_key_secret=${bucket_secret} \
  --from-literal bucketnames=${bucket_name} \
  --from-literal endpoint=https://${bucket_host} \
  --from-literal region=${bucket_region} \</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>This is completely optional. If you want to use a different storage solution and have the buckets ready, you can simply create the Secret (Sealed or inside a Vault) and put it into the wrapper chart. In this case, you can ignore this section.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_configuring_the_lokistack>Configuring the LokiStack</h3><div class=paragraph><p>Up until now, all we did was the deployment of the Operators, verifying if they were ready, creating the object storage and the Secret that will be required by Loki. At this point, we can configure Loki by creating the resource LokiStack. This will start a lot of Pods (depending on your selected size). Loki itself then takes care to push the logs into the object store and to query them etc.</p></div><div class=paragraph><p>Believe it or not, but there is another Helm Chart called <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-lokistack target=_blank rel=noopener>Helper LokiStack</a> this will configure the service as we need.
The configuration can become very big and the following example shows the main settings. Please consult the README of the Chart <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-lokistack target=_blank rel=noopener>Helper LokiStack</a> or the values file from our wrapper chart <a href=https://github.com/tjungbauer/openshift-clusterconfig-gitops/blob/main/clusters/management-cluster/setup-openshift-logging/values.yaml#L234-L395 target=_blank rel=noopener>setup-openshift-logging</a>. Especially, the pod placement using tolerations might be interesting, as it must be set per component individually.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>helper-lokistack:
  enabled: true <i class=conum data-value=1></i><b>(1)</b>
  name: logging-loki
  namespace: openshift-logging
  syncwave: 3

  # -- This is for log streams only, not the retention of the object store. Data retention must be configured on the bucket.
  global_retention_days: 4

  storage: <i class=conum data-value=2></i><b>(2)</b>
    # -- Size defines one of the supported Loki deployment scale out sizes.
    # Can be either:
    #   - 1x.demo
    #   - 1x.extra-small (Default)
    #   - 1x.small
    #   - 1x.medium
    # @default -- 1x.extra-small
    size: 1x.extra-small

    # Secret for object storage authentication. Name of a secret in the same namespace as the LokiStack custom resource.
    secret: <i class=conum data-value=3></i><b>(3)</b>
      name: logging-loki-s3

  # -- Storage class name defines the storage class for ingester/querier PVCs.
  # @default -- gp3-csi
  storageclassname: gp3-csi <i class=conum data-value=4></i><b>(4)</b>

  # -- Mode defines the mode in which lokistack-gateway component will be configured.
  # Can be either: static (default), dynamic, openshift-logging, openshift-network
  # @default -- static
  mode: openshift-logging <i class=conum data-value=5></i><b>(5)</b>

  # -- Control pod placement for LokiStack components. You can define a list of tolerations for the following components:
  # compactor, distributer, gateway, indexGateway, ingester, querier, queryFrontend, ruler
  podPlacements: {}</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Basic settings, like Namespace, name of the resource and syncwave.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Size of the LokiStack. Depending on the selected size more or less compute resources will be required. <strong>1x.demo</strong> is for testing only and is not supported for production workload.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Name of the Secret that was created in the previous step (or manually)</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>StorageClass that is required for additional workload. This is NOT the object storage.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Mode for the LokiStack Gateway to store the data. Possible values are static, dynamic, openshift-logging and openshift-network.</td></tr></tbody></table></div><div class=sect3><h4 id=_custom_argo_cd_health_check_for_lokistack>Custom Argo CD Health Check for LokiStack</h4><div class=paragraph><p>As for the BackingStore resource, the LokiStack resource can take a couple of minutes before it is ready. Moreover, it can easily break when there are not enough computing resources available in the cluster. Therefore, I suggest creating another custom health check for Argo CD, to let it wait until the resource is ready. Only when it is ready, Argo CD will continue with the synchronization. Add the following to the <strong>resourceHealthChecks</strong> in your Argo CD resource.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>    - check: |
        hs = {}
        if obj.status ~= nil and obj.status.conditions ~= nil then
            for i, condition in ipairs(obj.status.conditions) do
              if condition.type == &#34;Degraded&#34; and condition.reason == &#34;MissingObjectStorageSecret&#34; then <i class=conum data-value=1></i><b>(1)</b>
                  hs.status = &#34;Degraded&#34;
                  hs.message = &#34;Missing Bucket Secret&#34;
              end
              if condition.type == &#34;Pending&#34; and condition.reason == &#34;PendingComponents&#34; and condition.status == &#34;True&#34; then <i class=conum data-value=2></i><b>(2)</b>
                  hs.status = &#34;Progressing&#34;
                  hs.message = &#34;Some LokiStack components pending on dependencies&#34;
              end
              if condition.type == &#34;Ready&#34; and condition.reason == &#34;ReadyComponents&#34; then <i class=conum data-value=3></i><b>(3)</b>
                  hs.status = &#34;Healthy&#34;
                  hs.message = &#34;All components are ready&#34;
              end
            end
            return hs
        end
        hs.status = &#34;Progressing&#34; <i class=conum data-value=4></i><b>(4)</b>
        hs.message = &#34;Waiting for LokiStack to deploy.&#34;
        return hs
      group: loki.grafana.com
      kind: LokiStack</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>In LokiStack resources, if the fields 'status.conditions.condition.type' is "Degraded" and 'status.conditions.condition.reason' is MissingObjectStoreSecret then set the synchronization in Argo CD to <strong>Degraded</strong>.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>In LokiStack resources, if the fields 'status.conditions.condition.type' is "Pending" and 'status.conditions.condition.reason' is PendingComponents and 'status.conditions.condition.status' is True then set the synchronization in Argo CD to <strong>Progressing</strong>.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>In LokiStack resources, if the fields 'status.conditions.condition.type' is "Ready" and 'status.conditions.condition.reason' is ReadyComponents then set the synchronization in Argo CD to <strong>Healthy</strong>.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Per default set the status to <strong>Progressing</strong>.</td></tr></tbody></table></div></div></div><div class=sect2><h3 id=_configuring_clusterlogging>Configuring ClusterLogging</h3><div class=paragraph><p>Finally, the time  or should I say syncwave  has come to actually deploy the Logging components. The Operators are deployed, the object storage has been created and LokiStack is running.</p></div><div class=paragraph><p>The following settings will start the deployment of the ClusterLogging resource. As usual, please read the README of the Chart <a href=https://github.com/tjungbauer/helm-charts/tree/main/charts/openshift-logging target=_blank rel=noopener>OpenShift Logging</a> to find additional settings, such as tolerations etc.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>openshift-logging:

  loggingConfig:
    enabled: true
    syncwave: &#39;4&#39; <i class=conum data-value=1></i><b>(1)</b>

    logStore: <i class=conum data-value=2></i><b>(2)</b>
      type: lokistack

      lokistack: logging-loki

      visualization: <i class=conum data-value=3></i><b>(3)</b>
        type: ocp-console

      collection: <i class=conum data-value=4></i><b>(4)</b>
        type: vector</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>The next syncwave, should be after LokiStack deployment.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Define the logStore (LokiStack) and its type (Loki or Elasticsearch). Please note that Elasticsearch as storage is deprecated and will be removed in the future. In my chart, I already removed the support for Elasticsearch</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Type of virtualisation: should be <strong>ocp-console</strong> since Kibana and Elasticsearch are deprecated.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Type of collection: should be <strong>vector</strong> since Fluentd and Elasticsearch are deprecated.</td></tr></tbody></table></div><div class=paragraph><p>This will deploy the ClusterLogging resource and OpenShift Logging is finally deployed. In the WebUI of OpenShift, you should now see at Observe > Logs the log files for the cluster.</p></div><div class=imageblock><div class=content><img src="/gitopscollection/images/logging-installed.png?width=940px" alt="OpenShift Logging"></div><div class=title>Figure 4. OpenShift Logging</div></div><div class=paragraph><p>For individual Pods, a new tab called Aggregated Logs is available too:</p></div><div class=imageblock><div class=content><img src="/gitopscollection/images/logging-podtab.png?width=940px" alt="Aggregated Logs tab"></div><div class=title>Figure 5. Aggregated Logs tab</div></div><div class=sect3><h4 id=_custom_argo_cd_health_check_for_clusterlogging>Custom Argo CD Health Check for ClusterLogging</h4><div class=paragraph><p>One last thing to mention is the 3rd health check for Argo CD I usually configure that provides a proper response in the UI when the Logging stack is in a healthy state. The following will verify if the status is "Ready":</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>    - check: |
        hs = {}
        hs.status = &#34;Progressing&#34;
        hs.message = &#34;Progressing ClusterLogging&#34;
        if obj.status ~= nil and obj.status.conditions ~= nil then
            for i, condition in ipairs(obj.status.conditions) do
              if condition.type == &#34;Ready&#34; then
                  hs.status = &#34;Healthy&#34;
                  hs.message = &#34;ClusterLogging is ready&#34;
              end
            end
            return hs
        end
        return hs
      group: logging.openshift.io
      kind: ClusterLogging</code></pre></div></div></div></div></div></div><div class=sect1><h2 id=_tips_and_tricks>Tips and Tricks</h2><div class=sectionbody><div class=ulist><ul><li><p><strong>Anchors in yaml files</strong>: Several parameters in the values file will repeat themselves. For example, the name of the LokiStack resource. Typically, I define this as an anchor on the top of the yaml files and then reference it inside the file. This way I see these anchors at the top and can easily change them there:</p></li></ul></div><div class=paragraph><p>For example:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>lokistack: &amp;lokistackname logging-loki

[...]

helper-lokistack:
  [...]
  name: *lokistackname

openshift-logging:

  loggingConfig:
   [...]
    logStore:
      lokistack: *lokistackname</code></pre></div></div><div class=ulist><ul><li><p><strong>Object Storage Data Retention</strong>: The object storage is configured with a size of 700Gi, but without any lifecycle management. For object storage, the lifecycle (or data retention) is done on the bucket itself, not by the service. Please read the article <a href=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/>Noobaa Bucket Data Retention Lifecycle</a> to find out how to configure the data retention.</p></li></ul></div></div></div><div class=sect1><h2 id=_conclusion>Conclusion</h2><div class=sectionbody><div class=paragraph><p>OpenShift Logging with all its dependencies, especially when you also want to use OpenShift Data Foundation and automate the bucket creation, is for sure one of the most complex Argo CD Applications I have created. I wanted to create one Application that completely deploys Logging for me, without manual interference. It will become much easier when you do not need to create the ODF bucket and the Secret for Loki. However, in such a case you define the Bucket somewhere else and must create the Secret manually (and put it into the wrapper Helm Chart for example). So probably the effort just shifts to somewhere else.</p></div><div class=paragraph><p>I hope this article was somehow understandable. I am always happy for Feedback, GitHub issues or Pull Requests.</p></div><div class=paragraph><p>One last thing, OpenShift Logging also supports the <strong>forwarding of logs</strong>. This is currently not supported by the Helm Chart per se. I would suggest creating such a resource and storing it in the wrapper Chart. Just be sure that the syncwave is after the ClusterLogging deployment and it will install the resource accordingly.</p></div></div></div><div class=series-nav><div class=series-header><span class=series-icon><i class="fas fa-layer-group"></i></span>
<span class=series-title>GitOps Episodes</span>
<span class=series-progress>Part 8 of 14</span></div><div class=series-parts><a href=/gitopscollection/2023-12-11-gitops-intro/ class=series-part title="Introducing the GitOps Approach"><span class=part-number>1</span>
<span class=part-title>Introducing the GitOps Approach</span>
</a><a href=/gitopscollection/2023-12-28-gitops-repostructure/ class=series-part title="GitOps - Choosing the right Git repository structure"><span class=part-number>2</span>
<span class=part-title>GitOps - Choosing the right Git </span>
</a><a href=/gitopscollection/2024-02-02-setup-argocd/ class=series-part title="Setup OpenShift GitOps/Argo CD"><span class=part-number>3</span>
<span class=part-title>Setup OpenShift GitOps/Argo CD</span>
</a><a href=/gitopscollection/2024-04-02-configure_app_of_apps/ class=series-part title="Configure App-of-Apps"><span class=part-number>4</span>
<span class=part-title>Configure App-of-Apps</span>
</a><a href=/gitopscollection/2024-04-25-installing-compliance-operator/ class=series-part title="Setup & Configure Compliance Operator using GitOps"><span class=part-number>5</span>
<span class=part-title>Setup & Configure Compliance Operator </span>
</a><a href=/gitopscollection/2024-04-28-installing-advanced-cluster-security/ class=series-part title="Setup & Configure Advanced Cluster Security using GitOps"><span class=part-number>6</span>
<span class=part-title>Setup & Configure Advanced Cluster </span>
</a><a href=/gitopscollection/2024-05-17-configure-minio-buckets/ class=series-part title="Configure Buckets in MinIO using GitOps"><span class=part-number>7</span>
<span class=part-title>Configure Buckets in MinIO using GitOps</span>
</a><a href=/gitopscollection/2024-05-24-install-openshift-logging/ class="series-part current" title="Installing OpenShift Logging using GitOps"><span class=part-number>8</span>
<span class=part-title>Installing OpenShift Logging using </span>
</a><a href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ class=series-part title="Multiple Sources for Applications in Argo CD"><span class=part-number>9</span>
<span class=part-title>Multiple Sources for Applications in </span>
</a><a href=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/ class=series-part title="Update Cluster Version using GitOps approach"><span class=part-number>10</span>
<span class=part-title>Update Cluster Version using GitOps </span>
</a><a href=/gitopscollection/2024-07-04-managing-certificates-with-gitops/ class=series-part title="Managing Certificates using GitOps approach"><span class=part-number>11</span>
<span class=part-title>Managing Certificates using GitOps </span>
</a><a href=/gitopscollection/2024-10-13-using-post-renderer/ class=series-part title="Using Kustomize to post render a Helm Chart"><span class=part-number>12</span>
<span class=part-title>Using Kustomize to post render a Helm </span>
</a><a href=/gitopscollection/2025-04-17-applicationset-defining-namespaces/ class=series-part title="Using ApplicationSet with Matrix Generator and define individual Namespaces"><span class=part-number>13</span>
<span class=part-title>Using ApplicationSet with Matrix </span>
</a><a href=/gitopscollection/2025-07-17-common-template-application/ class=series-part title="Reusable Argo CD Application Helm Template"><span class=part-number>14</span>
<span class=part-title>Reusable Argo CD Application Helm </span></a></div><div class=series-nav-buttons><a href=/gitopscollection/2024-05-17-configure-minio-buckets/ class="series-btn series-prev"><i class="fas fa-arrow-left"></i> Previous: Configure Buckets in MinIO 
</a><a href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ class="series-btn series-next">Next: Multiple Sources for  <i class="fas fa-arrow-right"></i></a></div></div><hr class=related><div class=related-content><h3>See Also:</h3><ul><li class=related><a href=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/>The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8</a>
&ndash;
<time datetime=2025-12-06T00:00:00+0000><i>Dec 6, 2025</i></time><br><small><p class=related>In the previous articles, we deployed a distributed tracing infrastructure with TempoStack and OpenTelemetry Collector. We also deployed a Grafana instance to visualize the traces. The configuration was done in a way that allows everybody to read the traces. Every system:authenticated user is able to read ALL traces. This is usually not what you want. You want to limit trace access to only the appropriate namespace.
In this article, well limit the read access to traces. The users of the team-a namespace will only be able to see their own traces.</p></small></li><li class=related><a href=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/>The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7</a>
&ndash;
<time datetime=2025-12-04T00:00:00+0000><i>Dec 4, 2025</i></time><br><small><p class=related>While we have been using the integrated tracing UI in OpenShift, it is time to summon Grafana. Grafana is a visualization powerhouse that allows teams to build custom dashboards, correlate traces with logs and metrics, and gain deep insights into their applications. In this article, well deploy a dedicated Grafana instance for team-a in their namespace, configure a Tempo datasource, and create a dashboard to explore distributed traces.</p></small></li><li class=related><a href=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/>The Hitchhiker's Guide to Observability Introduction - Part 1</a>
&ndash;
<time datetime=2025-11-23T00:00:00+0000><i>Nov 23, 2025</i></time><br><small><p class=related>With this article I would like to summarize and, especially, remember my setup. This is Part 1 of a series of articles that I split up so it is easier to read and understand and not too long. Initially, there will be 6 parts, but I will add more as needed.</p></small></li><li class=related><a href=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/>The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2</a>
&ndash;
<time datetime=2025-11-24T00:00:00+0000><i>Nov 24, 2025</i></time><br><small><p class=related>After covering the fundamentals and architecture in Part 1, its time to get our hands dirty! This article walks through the complete implementation of a distributed tracing infrastructure on OpenShift.
Well deploy and configure the Tempo Operator and a multi-tenant TempoStack instance. For S3 storage we will use the integrated OpenShift Data Foundation. However, you can use whatever S3-compatible storage you have available.</p></small></li><li class=related><a href=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/>The Hitchhiker's Guide to Observability - Central Collector - Part 3</a>
&ndash;
<time datetime=2025-11-25T00:00:00+0000><i>Nov 25, 2025</i></time><br><small><p class=related>With the architecture defined in Part 1 and TempoStack deployed in Part 2, its time to tackle the heart of our distributed tracing system: the Central OpenTelemetry Collector. This is the critical component that sits between your application namespaces and TempoStack, orchestrating trace flow, metadata enrichment, and tenant routing.</p></small></li></ul></div><footer class=footline></footer></div></div><div id=navigation-bottom><a class="readme-a margin-right-5 margin-bottom-2 inline-flex relative no-highlight" href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ title="Multiple Sources for Applications in Argo CD"><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-left btn-bottom-prev"></i>
<span class=btn-bottom-text></span> Multiple Sources for Applications in Argo CD</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a><a class="readme-a inline-flex relative no-highlight" href=/gitopscollection/2024-05-17-configure-minio-buckets/ title="Configure Buckets in MinIO using GitOps" style=margin-right:0><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-right btn-bottom-next"></i>
<span class=btn-bottom-text></span> Configure Buckets in MinIO using GitOps</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a></div><div class=copyright><p>Copyright &copy; 2020 - 2025 Toni Schmidbauer & Thomas Jungbauer</p></div></section><script>(function(){$("document").ready(function(){var s=$(".read-progress").waypoint({handler:function(e){e=="down"?($(".read-progress").addClass("position-fixed"),$(".read-progress").css("top",0)):($(".read-progress").removeClass("position-fixed"),$(".read-progress").css("top"))}}),t=$(window).height(),e=$(".post-content").height();$(window).on("scroll",n),$(window).on("resize",function(){t=$(window).height(),e=$(".post-content").height(),n()});function n(){var s=$(this).scrollTop(),o=$(".post-content").offset().top,i=e-(e-(t-(o-s))),n=i/e*100,n=n>100?100:n;$(".read-progress").width(n+"%")}})})()</script><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1765084638></script><script src=/js/perfect-scrollbar.jquery.min.js?1765084638></script><script src=/js/jquery.sticky.js?1765084638></script><script src=/js/featherlight.min.js?1765084638></script><script src=/js/webp-upgrade.js?1765084638></script><script src=/js/highlight.min.js?1765084638></script><script>hljs.configure({ignoreUnescapedHTML:!0}),hljs.highlightAll()</script><script src=/js/modernizr.custom-3.6.0.js?1765084638></script><script src=/js/learn.js?1765084638></script><script src=/js/hugo-learn.js?1765084638></script><script src=/js/yaub.js?1765084638></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target.getAttribute("id");e.intersectionRatio>0&&(clearActiveStatesInTableOfContents(),document.querySelector(`aside nav li a[href="#${t}"]`).parentElement.classList.add("active"))})});document.querySelectorAll("h1[id],h2[id],h3[id]").forEach(t=>{e.observe(t)})});function clearActiveStatesInTableOfContents(){document.querySelectorAll("aside nav li").forEach(e=>{e.classList.remove("active")})}</script><script type=text/javascript>function scrollTopAnimated(){$("html, body").animate({scrollTop:"0"},500)}</script><script>function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(".article-box").click(function(){return window.location=$(this).attr("href"),$this.stopPropagation(),!1})</script><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("a.category-link");e.forEach(function(e){var t=e.textContent.trim().toLowerCase();t==="openshift"&&e.classList.add("openshift"),t==="compliance"&&e.classList.add("compliance"),t==="service mesh"&&e.classList.add("mesh"),t==="security"&&e.classList.add("security"),t==="other"&&e.classList.add("other"),t==="ansible"&&e.classList.add("ansible"),t==="supply chain"&&e.classList.add("cicd"),t==="gitops"&&e.classList.add("gitops"),t==="grafana"&&e.classList.add("grafana"),t==="tempo"&&e.classList.add("grafana"),t==="opentelemetry"&&e.classList.add("opentelemetry"),t==="advanced cluster security"&&e.classList.add("acs"),t==="quay"&&e.classList.add("quay")})})</script><script src=/js/js-yaml/js-yaml.min.js?1765084638></script><script src=/js/d3/d3-color.min.js?1765084638></script><script src=/js/d3/d3-dispatch.min.js?1765084638></script><script src=/js/d3/d3-drag.min.js?1765084638></script><script src=/js/d3/d3-ease.min.js?1765084638></script><script src=/js/d3/d3-interpolate.min.js?1765084638></script><script src=/js/d3/d3-selection.min.js?1765084638></script><script src=/js/d3/d3-timer.min.js?1765084638></script><script src=/js/d3/d3-transition.min.js?1765084638></script><script src=/js/d3/d3-zoom.min.js?1765084638></script><script src=/mermaid/mermaid.js?1765084638></script><script>window.relearn=window.relearn||{},window.relearn.themeUseMermaid=!0,window.relearn.mermaidConfig={securityLevel:"loose"},window.T_Reset_view="Reset view",window.T_View_reset="View reset",window.showToast=window.showToast||function(e){console.log("Toast:",e)},typeof mermaid!="undefined"&&mermaid.initialize({startOnLoad:!1,securityLevel:"loose",theme:"default"})</script><script>(function(){document.querySelectorAll('pre code[class*="language-"], pre code[class*="hljs"]').forEach(function(e){let t=null;const n=e.className.split(" ");for(const e of n){if(e.startsWith("language-")){t=e.replace("language-","");break}const s=["yaml","yml","bash","shell","sh","javascript","js","typescript","ts","python","py","go","golang","json","html","css","dockerfile","docker","ruby","rb","java","sql","xml","markdown","md","rust","rs","terraform","tf","hcl","ansible","helm","c","cpp","csharp","php","perl","lua","r","scala","kotlin","swift","groovy","powershell","ini","toml","nginx","apache","diff","plaintext","text","console","log"];if(s.includes(e.toLowerCase())){t=e;break}}if(t){const n=e.parentElement;if(n&&n.tagName==="PRE"){if(!n.parentElement.classList.contains("code-block-wrapper")){const e=document.createElement("div");e.className="code-block-wrapper",n.parentNode.insertBefore(e,n),e.appendChild(n)}const e=document.createElement("span");e.className="code-language-badge lang-"+t.toLowerCase(),e.textContent=t.toUpperCase(),n.parentElement.insertBefore(e,n)}}})})()</script><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/js/sw.js").then(function(e){console.log("ServiceWorker registered successfully with scope: ",e.scope)}).catch(function(e){console.log("ServiceWorker registration failed: ",e)})})</script></body></html>