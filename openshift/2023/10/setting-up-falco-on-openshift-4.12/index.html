<!doctype html><html lang=en class=no-js><head><script>document.documentElement.className=document.documentElement.className.replace("no-js","js")</script><meta name=google-site-verification content="yq2Ib3doJVHVlEW2wtHap5WY54JhS2CCvI40y30F0FI"><meta name=color-scheme content="dark light"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.152.2"><meta name=description content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta name=author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=keywords content><meta name=title content="Setting up Falco on OpenShift 4.12"><meta name=robots content="index, follow"><meta charset=utf-8><meta name=language content="English"><link rel=canonical href=https://blog.stderr.at/openshift/2023/10/setting-up-falco-on-openshift-4.12/><meta property="og:title" content="Setting up Falco on OpenShift 4.12"><meta property="og:description" content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.stderr.at/openshift/2023/10/setting-up-falco-on-openshift-4.12/"><meta property="og:site_name" content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta property="article:published_time" content="2023-10-23T00:00:00Z"><meta property="article:modified_time" content="2024-05-08T06:59:13+02:00"><meta property="article:section" content="OpenShift"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Setting up Falco on OpenShift 4.12"><meta name=twitter:description content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta name=article:author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=article:tag content="technical blog, OpenShift"><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","headline":"Setting up Falco on OpenShift 4.12","description":"TechBlog about OpenShift\/Ansible\/Satellite and much more","url":"https:\/\/blog.stderr.at\/openshift\/2023\/10\/setting-up-falco-on-openshift-4.12\/","datePublished":"2023-10-23T00:00:00Z","dateModified":"2024-05-08T06:59:13\u002b02:00","author":{"@type":"Person","name":"Toni Schmidbauer \u0026 Thomas Jungbauer"},"about":["OpenShift"],"publisher":{"@type":"Organization","name":"TechBlog about OpenShift\/Ansible\/Satellite and much more","url":"https:\/\/blog.stderr.at\/"}}</script><link rel=icon href=/images/favicon.ico type=image/png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-180x180.png><link rel=apple-touch-icon sizes=128x128 href=/images/apple-touch-icon-128x128.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-touch-icon-72x72.png><link rel=apple-touch-icon href=/images/apple-touch-icon-57x57.png><link rel="shortcut icon" href=/images/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><title>Setting up Falco on OpenShift 4.12 :: TechBlog about OpenShift/Ansible/Satellite and much more</title><link rel=manifest href=/manifest.json><meta name=theme-color content="#317EFB"><link href=/css/fontawesome-all.min.css?1765605256 rel=stylesheet><link href=/css/featherlight.min.css?1765605256 rel=stylesheet><link href=/css/theme-yaub-modular.css?1765605256 rel=stylesheet><script src=/js/jquery-3.7.1.min.js?1765605256></script><script src=/js/jquery.waypoints.min.js?1765605256></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/openshift/2023/10/setting-up-falco-on-openshift-4.12/><a href=#main-content class=skip-to-content>Skip to main content</a>
<button onclick=scrollTopAnimated() id=myBtn class="top-btn button fa fa-arrow-up" title="Go to top" aria-label="Go to top"></button>
<span class=read-progress></span><nav id=sidebar><div id=header-wrapper><button id=sidebar-toggle class=sidebar-toggle-btn title="Toggle Sidebar" aria-label="Toggle Sidebar">
<svg class="sidebar-toggle-icon" viewBox="0 0 32 32"><path d="M22 31a.997.997.0 01-.707-.293L7.647 17.061a1.501 1.501.0 010-2.122L21.293 1.293a1 1 0 111.414 1.414L9.414 16l13.293 13.293A1 1 0 0122 31z"/></svg></button><div id=header><a class="padding-topnav logo-link" href=/><svg class="logo" width="200" height="100" viewBox="0 0 200 136.34417133812047"><defs id="SvgjsDefs3490"/><g id="SvgjsG3491" featurekey="symbolFeature-0" transform="matrix(0.8888888888888888,0,0,0.8888888888888888,55.55511135525174,-24.034717135959202)" fill="#d2d2d2"><g xmlns="http://www.w3.org/2000/svg"><g><g><g><path fill="#d2d2d2" d="M75.195 72.96c-.619.0-1.241-.21-1.75-.64-1.146-.967-1.291-2.681-.324-3.827L88.73 50 73.122 31.507c-.967-1.146-.822-2.859.324-3.827 1.146-.968 2.859-.823 3.827.323L94.36 48.248c.854 1.012.854 2.492.0 3.503L77.272 71.995C76.735 72.632 75.968 72.96 75.195 72.96z"/></g></g></g><g><g><g><path fill="#d2d2d2" d="M24.805 72.96c-.772.0-1.539-.328-2.076-.964L5.641 51.752c-.854-1.012-.854-2.492.0-3.503l17.088-20.245c.967-1.146 2.681-1.291 3.827-.324 1.146.967 1.291 2.681.324 3.827L11.269 50.001l15.609 18.492c.967 1.146.823 2.859-.323 3.827C26.045 72.749 25.423 72.96 24.805 72.96z"/></g></g></g><g><path fill="#d2d2d2" d="M37.325 72.96c-.492.0-.99-.134-1.438-.414-1.271-.796-1.657-2.471-.861-3.742L60.37 28.315c.796-1.271 2.472-1.656 3.743-.861 1.271.796 1.657 2.471.861 3.742L39.63 71.685C39.115 72.508 38.23 72.96 37.325 72.96z"/></g></g></g><g id="SvgjsG3492" featurekey="nameFeature-0" transform="matrix(1.6473784183020483,0,0,1.6473784183020483,0.5930603781937029,42.15399158589206)" fill="#d2d2d2"><path d="m6.72 11.44 6.68 11.28 6.64-11.28h7l-10.6 17.6V40h-6.28V28.88l-10.52-17.44h7.08zm38.535.0L55.935 40h-6.52l-2.16-6.36h-10.68L34.335 40h-6.36l10.84-28.56h6.44zM41.935 18.48l-3.72 10.48h7.4l-3.6-10.48h-.08zm27.175-7.04-39062e-9 17.88c0 2.1067.47332 3.6467 1.42 4.62s2.4334 1.46 4.46 1.46c2.1867.0 3.72-.48668 4.6-1.46s1.32-2.5133 1.32-4.62V11.44h6.28v17.88c0 3.5733-1.02 6.36-3.06 8.36s-5.0868 3-9.14 3c-4.1332.0-7.1932-1-9.18-3s-2.98-4.7868-2.98-8.36V11.44h6.28zm41.495.0c6.0532.0 9.08 2.3466 9.08 7.04.0 2.6933-1.2933 4.6932-3.88 6 1.76.50668 3.0733 1.3934 3.94 2.66s1.3 2.7934 1.3 4.58c0 2.56-.92668 4.58-2.78 6.06s-4.2868 2.22-7.3 2.22h-13.84V11.44h13.48zM109.80499999999999 23c2.5333.0 3.8-1.1333 3.8-3.4.0-2.1867-1.4133-3.28-4.24-3.28h-5.96V23h6.4zm.359999999999999 12.12c3.0667.0 4.6-1.2533 4.6-3.76.0-2.72-1.4933-4.08-4.48-4.08h-6.88v7.84h6.76z"/></g></svg><div class=inline-flex><span class="animate-typewriter overflow-hidden whitespace-nowrap">Yet another useless blog<span class="ml-2 -translate-y-2 animate-blink">_</span></span></div></a></div></div><div id=sidebar-search><button class=sidebar-search-btn onclick=window.SearchModal&&window.SearchModal.open() title=Search aria-label="Open search">
<i class="fas fa-search"></i>
<span class=sidebar-search-text>Search...</span>
<kbd class=sidebar-search-kbd></kbd></button></div><div class=highlightable><ul class=topics><li data-nav-id=/whats-new/ title="What's New" class=dd-item><a href=/whats-new/ class=has-children><span class=menu-title><span class=news-badge-text>What's New</span></span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/whats-new/0000-00-00-helm-charts-changelog/ title="Helm Charts Repository Updates" class=dd-item><a href=/whats-new/0000-00-00-helm-charts-changelog/>Helm Charts Repository Updates</a></li><li data-nav-id=/whats-new/2025-11-10-whatsnew-420/ title="What's new in OpenShift, 4.20 Edition" class=dd-item><a href=/whats-new/2025-11-10-whatsnew-420/>What's new in OpenShift, 4.20 Edition</a></li></ul></li><li data-nav-id=/compliance/ title=Compliance class=dd-item><a href=/compliance/ class=has-children><span class=menu-title>Compliance</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/compliance/2021/07/oc-compliance-command-line-plugin/ title="oc compliance command line plugin" class=dd-item><a href=/compliance/2021/07/oc-compliance-command-line-plugin/>oc compliance command line plugin</a></li><li data-nav-id=/compliance/2021/07/compliance-operator/ title="Compliance Operator" class=dd-item><a href=/compliance/2021/07/compliance-operator/>Compliance Operator</a></li></ul></li><li data-nav-id=/gitopscollection/ title="GitOps Episodes" class=dd-item><a href=/gitopscollection/ class=has-children><span class=menu-title>GitOps Episodes</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/gitopscollection/2023-12-11-gitops-intro/ title="Introducing the GitOps Approach" class=dd-item><a href=/gitopscollection/2023-12-11-gitops-intro/>Introducing the GitOps Approach</a></li><li data-nav-id=/gitopscollection/2023-12-28-gitops-repostructure/ title="GitOps - Choosing the right Git repository structure" class=dd-item><a href=/gitopscollection/2023-12-28-gitops-repostructure/>GitOps - Choosing the right Git repository structure</a></li><li data-nav-id=/gitopscollection/2024-02-02-setup-argocd/ title="Setup OpenShift GitOps/Argo CD" class=dd-item><a href=/gitopscollection/2024-02-02-setup-argocd/>Setup OpenShift GitOps/Argo CD</a></li><li data-nav-id=/gitopscollection/2024-04-02-configure_app_of_apps/ title="Configure App-of-Apps" class=dd-item><a href=/gitopscollection/2024-04-02-configure_app_of_apps/>Configure App-of-Apps</a></li><li data-nav-id=/gitopscollection/2024-04-25-installing-compliance-operator/ title="Setup & Configure Compliance Operator using GitOps" class=dd-item><a href=/gitopscollection/2024-04-25-installing-compliance-operator/>Setup & Configure Compliance Operator using GitOps</a></li><li data-nav-id=/gitopscollection/2024-04-28-installing-advanced-cluster-security/ title="Setup & Configure Advanced Cluster Security using GitOps" class=dd-item><a href=/gitopscollection/2024-04-28-installing-advanced-cluster-security/>Setup & Configure Advanced Cluster Security using GitOps</a></li><li data-nav-id=/gitopscollection/2024-05-17-configure-minio-buckets/ title="Configure Buckets in MinIO using GitOps" class=dd-item><a href=/gitopscollection/2024-05-17-configure-minio-buckets/>Configure Buckets in MinIO using GitOps</a></li><li data-nav-id=/gitopscollection/2024-05-24-install-openshift-logging/ title="Installing OpenShift Logging using GitOps" class=dd-item><a href=/gitopscollection/2024-05-24-install-openshift-logging/>Installing OpenShift Logging using GitOps</a></li><li data-nav-id=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ title="Multiple Sources for Applications in Argo CD" class=dd-item><a href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/>Multiple Sources for Applications in Argo CD</a></li><li data-nav-id=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/ title="Update Cluster Version using GitOps approach" class=dd-item><a href=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/>Update Cluster Version using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-07-04-managing-certificates-with-gitops/ title="Managing Certificates using GitOps approach" class=dd-item><a href=/gitopscollection/2024-07-04-managing-certificates-with-gitops/>Managing Certificates using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-10-13-using-post-renderer/ title="Using Kustomize to post render a Helm Chart" class=dd-item><a href=/gitopscollection/2024-10-13-using-post-renderer/>Using Kustomize to post render a Helm Chart</a></li><li data-nav-id=/gitopscollection/2025-04-17-applicationset-defining-namespaces/ title="Using ApplicationSet with Matrix Generator and define individual Namespaces" class=dd-item><a href=/gitopscollection/2025-04-17-applicationset-defining-namespaces/>Using ApplicationSet with Matrix Generator and define individual Namespaces</a></li><li data-nav-id=/gitopscollection/2025-07-17-common-template-application/ title="Reusable Argo CD Application Helm Template" class=dd-item><a href=/gitopscollection/2025-07-17-common-template-application/>Reusable Argo CD Application Helm Template</a></li></ul></li><li data-nav-id=/openshift/ title=OpenShift class="dd-item
parent"><a href=/openshift/ class=has-children><span class=menu-title>OpenShift</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift/2025/08/a-second-look-into-the-kubernetes-gateway-api-on-openshift/ title="A second look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift/2025/08/a-second-look-into-the-kubernetes-gateway-api-on-openshift/>A second look into the Kubernetes Gateway API on OpenShift</a></li><li data-nav-id=/openshift/2025/08/a-first-look-into-the-kubernetes-gateway-api-on-openshift/ title="A first look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift/2025/08/a-first-look-into-the-kubernetes-gateway-api-on-openshift/>A first look into the Kubernetes Gateway API on OpenShift</a></li><li data-nav-id=/openshift/2025/06/cert-manager-policy-approver-in-openshift/ title="Cert-Manager Policy Approver in OpenShift" class=dd-item><a href=/openshift/2025/06/cert-manager-policy-approver-in-openshift/>Cert-Manager Policy Approver in OpenShift</a></li><li data-nav-id=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/ title="Single log out from Keycloak and OpenShift" class=dd-item><a href=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/>Single log out from Keycloak and OpenShift</a></li><li data-nav-id=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/ title="Step by Step - Using Keycloak Authentication in OpenShift" class=dd-item><a href=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/>Step by Step - Using Keycloak Authentication in OpenShift</a></li><li data-nav-id=/openshift/2024/11/introducing-adminnetworkpolicies/ title="Introducing AdminNetworkPolicies" class=dd-item><a href=/openshift/2024/11/introducing-adminnetworkpolicies/>Introducing AdminNetworkPolicies</a></li><li data-nav-id=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/ title="OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)" class=dd-item><a href=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/>OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)</a></li><li data-nav-id=/openshift/2023/11/running-falco-on-openshift-4.12/ title="Running Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023/11/running-falco-on-openshift-4.12/>Running Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/ title="Quay Deployment and Configuration using GitOps" class=dd-item><a href=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/>Quay Deployment and Configuration using GitOps</a></li><li data-nav-id=/openshift/2023/10/setting-up-falco-on-openshift-4.12/ title="Setting up Falco on OpenShift 4.12" class="dd-item active"><a href=/openshift/2023/10/setting-up-falco-on-openshift-4.12/>Setting up Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/10/how-to-force-a-machineconfig-rollout/ title="How to force a MachineConfig rollout" class=dd-item><a href=/openshift/2023/10/how-to-force-a-machineconfig-rollout/>How to force a MachineConfig rollout</a></li><li data-nav-id=/openshift/2023/03/operator-installation-with-argo-cd/ title="Operator installation with Argo CD" class=dd-item><a href=/openshift/2023/03/operator-installation-with-argo-cd/>Operator installation with Argo CD</a></li><li data-nav-id=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/ title="SSL Certificate Management for OpenShift on AWS" class=dd-item><a href=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/>SSL Certificate Management for OpenShift on AWS</a></li><li data-nav-id=/openshift/2022/11/using-serversideapply-with-argocd/ title="Using ServerSideApply with ArgoCD" class=dd-item><a href=/openshift/2022/11/using-serversideapply-with-argocd/>Using ServerSideApply with ArgoCD</a></li><li data-nav-id=/openshift/2022/08/secrets-management-vault-on-openshift/ title="Secrets Management - Vault on OpenShift" class=dd-item><a href=/openshift/2022/08/secrets-management-vault-on-openshift/>Secrets Management - Vault on OpenShift</a></li><li data-nav-id=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/ title="Overview of Red Hat's Multi Cloud Gateway (Noobaa)" class=dd-item><a href=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/>Overview of Red Hat's Multi Cloud Gateway (Noobaa)</a></li><li data-nav-id=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/ title="Secure your secrets with Sealed Secrets" class=dd-item><a href=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/>Secure your secrets with Sealed Secrets</a></li><li data-nav-id=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/ title="Understanding RWO block device handling in OpenShift" class=dd-item><a href=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/>Understanding RWO block device handling in OpenShift</a></li><li data-nav-id=/openshift/2021/01/writing-operator-using-ansible/ title="Writing Operator using Ansible" class=dd-item><a href=/openshift/2021/01/writing-operator-using-ansible/>Writing Operator using Ansible</a></li><li data-nav-id=/openshift/2020/12/thanos-querier-vs-thanos-querier/ title="Thanos Querier vs Thanos Querier" class=dd-item><a href=/openshift/2020/12/thanos-querier-vs-thanos-querier/>Thanos Querier vs Thanos Querier</a></li><li data-nav-id=/openshift/2020/08/gitops-argo-cd/ title="GitOps - Argo CD" class=dd-item><a href=/openshift/2020/08/gitops-argo-cd/>GitOps - Argo CD</a></li><li data-nav-id=/openshift/2020/04/openshift-pipelines-tekton-introduction/ title="OpenShift Pipelines - Tekton Introduction" class=dd-item><a href=/openshift/2020/04/openshift-pipelines-tekton-introduction/>OpenShift Pipelines - Tekton Introduction</a></li><li data-nav-id=/openshift/2020/04/helpful-oc-/-kubectl-commands/ title="Helpful oc / kubectl commands" class=dd-item><a href=/openshift/2020/04/helpful-oc-/-kubectl-commands/>Helpful oc / kubectl commands</a></li></ul></li><li data-nav-id=/day-2/ title="OpenShift Day-2" class=dd-item><a href=/day-2/ class=has-children><span class=menu-title>OpenShift Day-2</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/etcd/ title=etcd class=dd-item><a href=/day-2/etcd/ class=has-children><span class=menu-title>etcd</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/etcd/2022-01-29-automatedetcdbackup/ title="Automated ETCD Backup" class=dd-item><a href=/day-2/etcd/2022-01-29-automatedetcdbackup/>Automated ETCD Backup</a></li></ul></li><li data-nav-id=/day-2/labels_environmets/ title="Labels & Environments" class=dd-item><a href=/day-2/labels_environmets/ class=has-children><span class=menu-title>Labels & Environments</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/labels_environmets/2022-01-12-creatingenvironment/ title="Working with Environments" class=dd-item><a href=/day-2/labels_environmets/2022-01-12-creatingenvironment/>Working with Environments</a></li></ul></li><li data-nav-id=/day-2/observability/ title=Observability class=dd-item><a href=/day-2/observability/ class=has-children><span class=menu-title>Observability</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/ title="The Hitchhiker's Guide to Observability Introduction - Part 1" class=dd-item><a href=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/>The Hitchhiker's Guide to Observability Introduction - Part 1</a></li><li data-nav-id=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/ title="The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2" class=dd-item><a href=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/>The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2</a></li><li data-nav-id=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/ title="The Hitchhiker's Guide to Observability - Central Collector - Part 3" class=dd-item><a href=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/>The Hitchhiker's Guide to Observability - Central Collector - Part 3</a></li><li data-nav-id=/day-2/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/ title="The Hitchhiker's Guide to Observability - Example Applications - Part 4" class=dd-item><a href=/day-2/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/>The Hitchhiker's Guide to Observability - Example Applications - Part 4</a></li><li data-nav-id=/day-2/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/ title="The Hitchhiker's Guide to Observability - Understanding Traces - Part 5" class=dd-item><a href=/day-2/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/>The Hitchhiker's Guide to Observability - Understanding Traces - Part 5</a></li><li data-nav-id=/day-2/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/ title="The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6" class=dd-item><a href=/day-2/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/>The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6</a></li><li data-nav-id=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/ title="The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7" class=dd-item><a href=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/>The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7</a></li><li data-nav-id=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/ title="The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8" class=dd-item><a href=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/>The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8</a></li></ul></li><li data-nav-id=/day-2/pod-placement/ title="Pod Placement" class=dd-item><a href=/day-2/pod-placement/ class=has-children><span class=menu-title>Pod Placement</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/day-2/pod-placement/2021-08-26-podplacement-intro/ title=Introduction class=dd-item><a href=/day-2/pod-placement/2021-08-26-podplacement-intro/>Introduction</a></li><li data-nav-id=/day-2/pod-placement/2021-08-27-podplacement/ title=NodeSelector class=dd-item><a href=/day-2/pod-placement/2021-08-27-podplacement/>NodeSelector</a></li><li data-nav-id=/day-2/pod-placement/2021-08-28-affinity/ title="Pod Affinity/Anti-Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-28-affinity/>Pod Affinity/Anti-Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-29-node-affinity/ title="Node Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-29-node-affinity/>Node Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-30-taints/ title="Taints and Tolerations" class=dd-item><a href=/day-2/pod-placement/2021-08-30-taints/>Taints and Tolerations</a></li><li data-nav-id=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints" class=dd-item><a href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/>Topology Spread Constraints</a></li><li data-nav-id=/day-2/pod-placement/2021-09-01-descheduler/ title="Using Descheduler" class=dd-item><a href=/day-2/pod-placement/2021-09-01-descheduler/>Using Descheduler</a></li></ul></li></ul></li><li data-nav-id=/securesupplychain/ title="Secure Supply Chain" class=dd-item><a href=/securesupplychain/ class=has-children><span class=menu-title>Secure Supply Chain</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/securesupplychain/2023-06-15-securesupplychain-intro/ title="Introduction to a Secure Supply Chain" class=dd-item><a href=/securesupplychain/2023-06-15-securesupplychain-intro/>Introduction to a Secure Supply Chain</a></li><li data-nav-id=/securesupplychain/2023-06-16-securesupplychain-step1/ title="Step 1 - Listen to Events" class=dd-item><a href=/securesupplychain/2023-06-16-securesupplychain-step1/>Step 1 - Listen to Events</a></li><li data-nav-id=/securesupplychain/2023-06-17-securesupplychain-step2/ title="Step 2 - Pipelines" class=dd-item><a href=/securesupplychain/2023-06-17-securesupplychain-step2/>Step 2 - Pipelines</a></li><li data-nav-id=/securesupplychain/2023-06-18-securesupplychain-step3/ title="Step 3 - SonarQube" class=dd-item><a href=/securesupplychain/2023-06-18-securesupplychain-step3/>Step 3 - SonarQube</a></li><li data-nav-id=/securesupplychain/2023-06-19-securesupplychain-step4/ title="Step 4 - Verify Git Commit" class=dd-item><a href=/securesupplychain/2023-06-19-securesupplychain-step4/>Step 4 - Verify Git Commit</a></li><li data-nav-id=/securesupplychain/2023-06-20-securesupplychain-step5/ title="Step 5 - Build and Sign Image" class=dd-item><a href=/securesupplychain/2023-06-20-securesupplychain-step5/>Step 5 - Build and Sign Image</a></li><li data-nav-id=/securesupplychain/2023-06-21-securesupplychain-step6/ title="Step 6 - Scanning with ACS" class=dd-item><a href=/securesupplychain/2023-06-21-securesupplychain-step6/>Step 6 - Scanning with ACS</a></li><li data-nav-id=/securesupplychain/2023-06-22-securesupplychain-step7/ title="Step 7 - Generating a SBOM" class=dd-item><a href=/securesupplychain/2023-06-22-securesupplychain-step7/>Step 7 - Generating a SBOM</a></li><li data-nav-id=/securesupplychain/2023-06-23-securesupplychain-step8/ title="Step 8 - Updating Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-23-securesupplychain-step8/>Step 8 - Updating Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-24-securesupplychain-step9/ title="Step 9 - Linting Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-24-securesupplychain-step9/>Step 9 - Linting Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-25-securesupplychain-step10/ title="Step 10 - The Example Application" class=dd-item><a href=/securesupplychain/2023-06-25-securesupplychain-step10/>Step 10 - The Example Application</a></li><li data-nav-id=/securesupplychain/2023-06-26-securesupplychain-step11/ title="Step 11 - ACS Deployment Check" class=dd-item><a href=/securesupplychain/2023-06-26-securesupplychain-step11/>Step 11 - ACS Deployment Check</a></li><li data-nav-id=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature" class=dd-item><a href=/securesupplychain/2023-06-27-securesupplychain-step12/>Step 12 - Verify TLog Signature</a></li><li data-nav-id=/securesupplychain/2023-06-28-securesupplychain-step13/ title="Step 13 - Bring it to Production" class=dd-item><a href=/securesupplychain/2023-06-28-securesupplychain-step13/>Step 13 - Bring it to Production</a></li></ul></li><li data-nav-id=/general/ title=General class=dd-item><a href=/general/ class=has-children><span class=menu-title>General</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/general/2020/05/basic-usage-of-git/ title="Basic usage of git" class=dd-item><a href=/general/2020/05/basic-usage-of-git/>Basic usage of git</a></li><li data-nav-id=/general/2020/04/red-hat-satellite-cheat-sheet/ title="Red Hat Satellite Cheat Sheet" class=dd-item><a href=/general/2020/04/red-hat-satellite-cheat-sheet/>Red Hat Satellite Cheat Sheet</a></li></ul></li><li data-nav-id=/ansible/ title=Ansible class=dd-item><a href=/ansible/ class=has-children><span class=menu-title>Ansible</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/ansible/2021/11/ansible-style-guide/ title="Ansible Style Guide" class=dd-item><a href=/ansible/2021/11/ansible-style-guide/>Ansible Style Guide</a></li><li data-nav-id=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" class=dd-item><a href=/ansible/2021/10/automation-controller-and-ldap-authentication/>Automation Controller and LDAP Authentication</a></li><li data-nav-id=/ansible/2021/07/ansible-tower-and-downloading-collections/ title="Ansible Tower and downloading collections" class=dd-item><a href=/ansible/2021/07/ansible-tower-and-downloading-collections/>Ansible Tower and downloading collections</a></li><li data-nav-id=/ansible/2020/04/ansible-azure-resource-manager-example/ title="Ansible - Azure Resource Manager Example" class=dd-item><a href=/ansible/2020/04/ansible-azure-resource-manager-example/>Ansible - Azure Resource Manager Example</a></li><li data-nav-id=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ title="DO410 Ansible and Ansible Tower training notes" class=dd-item><a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/>DO410 Ansible and Ansible Tower training notes</a></li></ul></li><li data-nav-id=/service-mesh/ title="Service Mesh" class=dd-item><a href=/service-mesh/ class=has-children><span class=menu-title>Service Mesh</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/service-mesh/2020/05/enable-automatic-route-creation/ title="Enable Automatic Route Creation" class=dd-item><a href=/service-mesh/2020/05/enable-automatic-route-creation/>Enable Automatic Route Creation</a></li><li data-nav-id=/service-mesh/2020/05/authorization-rbac/ title="Authorization (RBAC)" class=dd-item><a href=/service-mesh/2020/05/authorization-rbac/>Authorization (RBAC)</a></li><li data-nav-id=/service-mesh/2020/04/deploy-example-bookinfo-application/ title="Deploy Example Bookinfo Application" class=dd-item><a href=/service-mesh/2020/04/deploy-example-bookinfo-application/>Deploy Example Bookinfo Application</a></li><li data-nav-id=/service-mesh/2020/04/service-mesh-1.1-released/ title="Service Mesh 1.1 released" class=dd-item><a href=/service-mesh/2020/04/service-mesh-1.1-released/>Service Mesh 1.1 released</a></li><li data-nav-id=/service-mesh/2020/04/authentication-jwt/ title="Authentication JWT" class=dd-item><a href=/service-mesh/2020/04/authentication-jwt/>Authentication JWT</a></li><li data-nav-id=/service-mesh/2020/04/mutual-tls-authentication/ title="Mutual TLS Authentication" class=dd-item><a href=/service-mesh/2020/04/mutual-tls-authentication/>Mutual TLS Authentication</a></li><li data-nav-id=/service-mesh/2020/04/fault-injection/ title="Fault Injection" class=dd-item><a href=/service-mesh/2020/04/fault-injection/>Fault Injection</a></li><li data-nav-id=/service-mesh/2020/04/limit-egress/external-traffic/ title="Limit Egress/External Traffic" class=dd-item><a href=/service-mesh/2020/04/limit-egress/external-traffic/>Limit Egress/External Traffic</a></li><li data-nav-id=/service-mesh/2020/04/advanced-routing-example/ title="Advanced Routing Example" class=dd-item><a href=/service-mesh/2020/04/advanced-routing-example/>Advanced Routing Example</a></li><li data-nav-id=/service-mesh/2020/04/routing-example/ title="Routing Example" class=dd-item><a href=/service-mesh/2020/04/routing-example/>Routing Example</a></li><li data-nav-id=/service-mesh/2020/03/ingress-with-custom-domain/ title="Ingress with custom domain" class=dd-item><a href=/service-mesh/2020/03/ingress-with-custom-domain/>Ingress with custom domain</a></li><li data-nav-id=/service-mesh/2020/03/ingress-traffic/ title="Ingress Traffic" class=dd-item><a href=/service-mesh/2020/03/ingress-traffic/>Ingress Traffic</a></li><li data-nav-id=/service-mesh/2020/03/deploy-microservices/ title="Deploy Microservices" class=dd-item><a href=/service-mesh/2020/03/deploy-microservices/>Deploy Microservices</a></li><li data-nav-id=/service-mesh/2020/03/installation/ title=Installation class=dd-item><a href=/service-mesh/2020/03/installation/>Installation</a></li></ul></li><li data-nav-id=/acs/ title="Advanced Cluster Security" class=dd-item><a href=/acs/ class=has-children><span class=menu-title>Advanced Cluster Security</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/acs/2021-12-11-acsauth/ title="Advanced Cluster Security - Authentication" class=dd-item><a href=/acs/2021-12-11-acsauth/>Advanced Cluster Security - Authentication</a></li></ul></li><li data-nav-id=/azure/ title=Azure class=dd-item><a href=/azure/ class=has-children><span class=menu-title>Azure</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/azure/2021-10-29-private-aro/ title="Stumbling into Azure Part II: Setting up a private ARO cluster" class=dd-item><a href=/azure/2021-10-29-private-aro/>Stumbling into Azure Part II: Setting up a private ARO cluster</a></li><li data-nav-id=/azure/2021-10-17-s2s-vpn/ title="Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing" class=dd-item><a href=/azure/2021-10-17-s2s-vpn/>Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing</a></li></ul></li><li data-nav-id=/java/ title=Java class=dd-item><a href=/java/ class=has-children><span class=menu-title>Java</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/java/2022-02-25-jpa-disconnected-entity/ title="Adventures in Java Land: JPA disconnected entities" class=dd-item><a href=/java/2022-02-25-jpa-disconnected-entity/>Adventures in Java Land: JPA disconnected entities</a></li></ul></li><li data-nav-id=/quay/ title=Quay class=dd-item><a href=/quay/ class=has-children><span class=menu-title>Quay</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/quay/2025-09-19-quay-integrate-keycloak/ title="Red Hat Quay Registry - Integrate Keycloak" class=dd-item><a href=/quay/2025-09-19-quay-integrate-keycloak/>Red Hat Quay Registry - Integrate Keycloak</a></li><li data-nav-id=/quay/2021-09-07-quay-upgrade-3.4/ title="Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator" class=dd-item><a href=/quay/2021-09-07-quay-upgrade-3.4/>Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator</a></li><li data-nav-id=/quay/2020-05-13-quay-tutorial1/ title="Red Hat Quay Registry - Overview and Installation" class=dd-item><a href=/quay/2020-05-13-quay-tutorial1/>Red Hat Quay Registry - Overview and Installation</a></li></ul></li><li data-nav-id=/helm-charts/ title="Helm Repository" class=dd-item><a href=/helm-charts/><span class=menu-title><i class='fas fa-dharmachakra'></i> Helm Repository</span></a></li><li data-nav-id=/legaldisclosure/ title="Legal Disclosure" class=dd-item><a href=/legaldisclosure/><span class=menu-title>Legal Disclosure</span></a></li><li data-nav-id=/rss/ title="RSS Feeds" class=dd-item><a href=/rss/><span class=menu-title>RSS Feeds</span></a></li></ul><div class=bookmarks-section id=bookmarks-section><h3 class=bookmarks-title><i class="fas fa-bookmark"></i>
Saved Articles
<span class=bookmarks-count style=display:none>0</span></h3><div class=bookmarks-empty id=bookmarks-empty><p>No saved articles yet.</p><p class=bookmarks-hint>Click the "Save" button on any article to bookmark it for later.</p></div><ul class=bookmarks-list id=bookmarks-list></ul><button class=bookmarks-clear-btn id=bookmarks-clear style=display:none>
<i class="fas fa-trash-alt"></i> Clear All</button></div><script>(function(){const t="blog-bookmarks";function n(){try{return JSON.parse(localStorage.getItem(t))||[]}catch{return[]}}function s(e){localStorage.setItem(t,JSON.stringify(e))}function o(t){let i=n();i=i.filter(e=>e.url!==t),s(i),e();const o=document.querySelector('.bookmark-btn[data-url="'+t+'"]');if(o){o.classList.remove("bookmarked");const e=o.querySelector(".bookmark-icon"),t=o.querySelector(".bookmark-text");e&&(e.classList.remove("fas"),e.classList.add("far")),t&&(t.textContent="Save")}}function e(){const e=n(),t=document.getElementById("bookmarks-list"),s=document.getElementById("bookmarks-empty"),i=document.getElementById("bookmarks-clear"),a=document.querySelector(".bookmarks-count");if(!t)return;if(a&&(a.textContent=e.length,a.style.display=e.length>0?"inline-block":"none"),e.length===0){t.innerHTML="",s&&(s.style.display="block"),i&&(i.style.display="none");return}s&&(s.style.display="none"),i&&(i.style.display="block"),t.innerHTML=e.map(e=>`
            <li class="bookmark-item">
                <a href="${e.url}" class="bookmark-link">
                    <span class="bookmark-item-title">${e.title}</span>
                    <span class="bookmark-item-meta">
                        <span class="bookmark-item-section">${e.section}</span>
                        ${e.date?'<span class="bookmark-item-date">'+e.date+"</span>":""}
                    </span>
                </a>
                <button class="bookmark-remove" data-url="${e.url}" title="Remove bookmark">
                    <i class="fas fa-times"></i>
                </button>
            </li>
        `).join(""),t.querySelectorAll(".bookmark-remove").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),o(this.dataset.url)})})}function i(){confirm("Remove all saved articles?")&&(localStorage.removeItem(t),e(),document.querySelectorAll(".bookmark-btn.bookmarked").forEach(e=>{e.classList.remove("bookmarked");const t=e.querySelector(".bookmark-icon"),n=e.querySelector(".bookmark-text");t&&(t.classList.remove("fas"),t.classList.add("far")),n&&(n.textContent="Save")}))}document.addEventListener("DOMContentLoaded",function(){e();const t=document.getElementById("bookmarks-clear");t&&t.addEventListener("click",i)}),window.addEventListener("storage",function(n){n.key===t&&e()}),window.addEventListener("bookmarks-changed",function(){e()})})()</script><section id=footer></section></div></nav><section id=body class=post-content><div id=overlay></div><aside id=toc-field class="hidden lg:block tableOfContentContainer"><header id=TableOfContentsHeader>What's on this Page</header><nav id=TableOfContents><ul><li><a href=#headline-1>First Try</a><ul><li><a href=#headline-2>Summary of problems</a></li></ul></li><li><a href=#headline-3>Fixing the Falco daemonset</a><ul><li><a href=#headline-4>UPDATE</a></li></ul></li><li><a href=#headline-5>Fixing falco-sidekick and falco-sidekick-ui</a></li><li><a href=#headline-6>Testing Falco</a><ul><li><a href=#headline-7>Creating an event</a></li></ul></li></ul></nav></aside><div id=navigation><a class="nav nav-prev" href=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/ title="Quay Deployment and Configuration using GitOps"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/openshift/2023/10/how-to-force-a-machineconfig-rollout/ title="How to force a MachineConfig rollout" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div><div id=main-content class="padding highlightable" tabindex=-1><header><div id=top-nav class=margin-bottom-15><section id=homelinks class=text-align-center><ul class="list-no-style margin-0 padding-0 overflow-hidden text-align-left vertical-align-middle"><li class="list-horizontal padding-left-15 padding-right-15"><a class=padding-topnav href=/><i class='fas fa-home'></i> Home</a></li><li class="dropdown list-horizontal left padding-left-15 padding-right-15"><div class="submenu left static inline-block"><a class=padding-topnav href=https://blog.stderr.at/authors><svg stroke="currentColor" fill="#d2d2d2" stroke-width="0" viewBox="0 0 17 17" class="relative z-20 h-6 w-6" height="1em" width="1em"><g/><path d="M16.499 1.843 15.096.44c-.566-.566-1.555-.566-2.122.0L5.438 7.976l-1.722 5.287 5.249-1.765 7.534-7.534c.283-.283.439-.66.439-1.061s-.156-.777-.439-1.06zM5.584 10.758l.638-1.957 1.92 1.919-1.942.653-.616-.615zM6.832 7.996l3.986-3.986 2.11 2.11-3.986 3.986-2.11-2.11zm4.693-4.693.729-.729 2.11 2.11-.729.729-2.11-2.11zM15.792 3.257l-.72.721-2.11-2.11.72-.721c.19-.189.519-.189.707.0l1.403 1.403c.094.095.146.22.146.354s-.052.258-.146.353zM15 7.5h1V17H0V2h7.5v1H1v13h14V7.5z"/></svg> About Us<i class='fa fa-chevron-down padding-left-25rem' '></i></a><div class="absolute submenu-div"><a href=/authors/thomas-jungbauer class="submenu-style submenu-link display-block"><i></i>Thomas Jungbauer</a>
<a href=/authors/toni-schmidbauer class="submenu-style submenu-link display-block"><i></i>Toni Schmidbauer</a>
<a href=/legaldisclosure class="submenu-style submenu-link display-block"><i></i>Legal Disclosure</a></div></div></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/categories><i class='far fa-bookmark padding-right-25rem'></i> Categories</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/tags><i class='fas fa-tags padding-right-25rem'></i> Tags</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/archive><i class='fas fa-box padding-right-25rem'></i> History</a></li><li class="list-horizontal right padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/helm-charts/><svg class="list-horizontal padding-right-25rem" fill="#d2d2d2" width="28" height="28" viewBox="0 0 256 297" class="mr-3 h-7 w-7 fill-current text-omega-500"><path d="m60.349 70.537-.811-.767a77.726 77.726.0 01-.278-.266c-7.589-7.29-13.462-15.721-17.01-25.685-.951-2.673-1.68-5.397-1.621-8.262l.012-.375c.012-.285.011-.571.031-.856.268-3.877 2.863-5.836 6.652-4.918 1.195.31 2.351.753 3.447 1.321 4.007 2.01 7.297 4.948 10.317 8.185l.312.336a67.685 67.685.0 0113.066 20.108c.068.177.146.35.234.518a.308.308.0 00.061.074l.212.181.064.057a106.079 106.079.0 0148.733-14.954l-.043-.218-.112-.585a11.87 11.87.0 00-.073-.35l-.041-.17a67.666 67.666.0 01-1.596-22.23 50.571 50.571.0 012.674-13.09 18.838 18.838.0 013.294-6.118 9.436 9.436.0 011.902-1.697 4.226 4.226.0 014.832-.034 10.393 10.393.0 013.513 4.049 31.912 31.912.0 013.165 8.828 67.672 67.672.0 011.277 19.852 57.502 57.502.0 01-2.1 11.976c.714.132 1.428.258 2.14.382l3.2.552c2.481.43 4.946.88 7.38 1.458a112.29 112.29.0 0112.296 3.611c4.059 1.49 8.03 3.211 11.891 5.155 2.227 1.11 4.39 2.346 6.564 3.612l1.866 1.09c.936.548 1.877 1.096 2.829 1.637l.08-.163.178-.354c.06-.125.118-.254.167-.387a65.359 65.359.0 0119.79-28.128 22.711 22.711.0 017.11-4.14c.717-.25 1.46-.42 2.213-.508 3.768-.431 5.35 1.94 5.628 4.771a18.011 18.011.0 01-.465 6.228 52.875 52.875.0 01-6.147 14.357l-.308.493c-3.982 6.435-8.69 12.247-14.633 16.98l-.46.362a2.62 2.62.0 00-.12.1l-.192.177-.24.228-.098.09a106.935 106.935.0 0115.996 18.576 6.594 6.594.0 01-1.016.179c-6.373.01-12.746-.011-19.12.028a2.408 2.408.0 01-1.908-1.017 88.947 88.947.0 00-53.039-27.999 86.23 86.23.0 00-17.453-.75l-.76.047a88.064 88.064.0 00-49.207 18.785l-.44.349a84.25 84.25.0 00-10.21 9.529 2.844 2.844.0 01-2.324 1.057 1482.46 1482.46.0 00-10.958-.026l-8.6.005c.029-.111.077-.245.144-.398l.09-.193a7.07 7.07.0 01.107-.211l.123-.23.14-.245.157-.262.171-.277.186-.292.306-.464.337-.493.241-.343.384-.535.134-.183.419-.564.292-.386.302-.394.472-.604.491-.616.338-.418.346-.42.352-.425.36-.426.365-.428.558-.644.378-.43.382-.428.386-.426.39-.425c1.896-2.049 3.859-4.036 5.86-6.045l2.013-2.019c.675-.677 1.353-1.36 2.033-2.052zm155.187 136.407a106.248 106.248.0 01-14.42 16.339l1.12.933a65.151 65.151.0 0120.26 28.96 20.823 20.823.0 011.325 8.673 8.954 8.954.0 01-.363 1.95l-.087.271a4.335 4.335.0 01-4.907 3.021 13.373 13.373.0 01-4.067-1.206 30.816 30.816.0 01-5.523-3.498 64.717 64.717.0 01-19.627-27.589l-.262-.713-.357-.922a117.082 117.082.0 01-15.045 8.426 109.274 109.274.0 01-16.052 5.85 112.816 112.816.0 01-17.025 3.24l.078.41.07.373c.023.12.047.234.073.348l.042.168a65.667 65.667.0 011.787 21.92 48.604 48.604.0 01-2.66 13.52 47.067 47.067.0 01-2.505 5.26 8.054 8.054.0 01-1.407 1.788c-2.394 2.471-5.253 2.492-7.586-.045a16.409 16.409.0 01-2.35-3.379c-1.85-3.474-2.803-7.252-3.483-11.104a70.293 70.293.0 01-.818-15.918 56.83 56.83.0 011.568-10.873l.167-.667c.085-.32.162-.644.224-.969a.292.292.0 00-.015-.132l-.067-.23a3.701 3.701.0 01-.021-.082A105.937 105.937.0 0174.9 236.033l-.56 1.24-.102.231a66.452 66.452.0 01-18.164 24.56l-.423.355a22.954 22.954.0 01-7.247 4.186 7.272 7.272.0 01-3.919.42 4.282 4.282.0 01-3.19-2.55l-.06-.15c-.783-1.894-.718-3.859-.478-5.815l.067-.51a33.355 33.355.0 012.59-8.572 67.669 67.669.0 0115.947-22.714l.556-.52c.093-.086.184-.173.275-.262.086-.124.16-.256.22-.394A107.611 107.611.0 0143.287 206.7l.19-.017.65-.062c.193-.018.369-.03.545-.03 5.06-.005 10.12.009 15.179-.008l3.794-.018a2.83 2.83.0 012.228.978 88.388 88.388.0 0023.1 17.07l.6.304a84.178 84.178.0 0029.898 8.887c28.343 2.755 52.723-5.838 73.142-25.777a4.599 4.599.0 013.605-1.47c2.947.036 5.896.044 8.844.042l5.896-.01 2.949-.002h1.523l.106.356zm-26.342-90.316c.373.0.742.006 1.109.013l1.093.022c.724.013 1.439.015 2.148-.026l.531-.039c1.802-.163 3.091.481 4.405 1.692 6.323 5.826 12.7 11.592 19.071 17.364l3.966 3.595.45.4.675.595.799-.68c.171-.147.339-.293.503-.443a19230.8 19230.8.0 0023.608-21.525 3.277 3.277.0 012.362-.995l.167.005c1.21.049 2.422.045 3.66.036l1.498-.011c.252-.002.506-.003.761-.003v63.38a.948.948.0 01-.097.021l-.14.02-.18.02-.22.02-.255.017-.447.026-.897.037-1.06.032-1.188.025-1.817.025-1.639.01-1.653.002-1.082-.005-1.3-.013-.978-.015-.686-.015-.637-.017-.762-.028-.496-.024-.424-.027-.239-.02-.2-.02a4.685 4.685.0 01-.087-.012l-.141-.022v-32.098l-.323-.153-16.383 14.942-16.516-14.879-.316.116-.007 2.679v29.509h-16.497c-.016-.053-.031-.251-.046-.58l-.017-.455-.017-.575-.024-1.076-.023-1.314-.03-2.093-.033-3.101-.047-5.884-.032-5.84-.027-7.156-.017-8.245-.002-5.379.009-6.732.013-3.813.023-4.033.025-2.81.025-1.825.022-1.095.015-.588.017-.47.018-.345c.003-.046.006-.088.01-.124zm-152.24.073h16.398c.013.042.026.18.039.406l.018.404.018.53.016.652.025 1.19.036 2.508.027 2.424.028 3.479.037 6.391.017 4.372.018 8.267.003 5.583-.006 6.347-.01 4.294-.02 4.749-.022 3.515-.035 3.555-.02 1.461-.014.844-.016.732-.017.616-.017.494-.018.365c-.01.15-.02.25-.03.295H36.996a277.08 277.08.0 01-.048-6.9l.009-3.445-.001-1.722-.004-1.707-.002-3.422.003-6.924H16.63v23.904a1.2 1.2.0 01-.116.027l-.162.026-.205.024-.383.035-.303.021-.706.04-.61.025-.904.03-.737.02-1.043.02-1.66.022-1.716.01H6.66l-1.384-.009-1.551-.022-.939-.02-.84-.027-.553-.024-.329-.017-.293-.019-.367-.03a7.294 7.294.0 01-.103-.011l-.172-.023a1.687 1.687.0 01-.128-.024v-63.324h16.564v22.37a.972.972.0 00.096.02l.138.021.177.02.336.028.415.026.665.033.576.022.635.02 1.423.036 1.864.032 1.135.014 1.761.014 1.789.006 2.343-.005 1.395-.01 1.308-.017 1.193-.022 1.05-.028.88-.035.433-.023.357-.026.192-.02a.93.93.0 00.08-.009l.133-.02.012-4.084.003-1.375.002-2.853-.002-14.142zm36.054 63.45v-63.262c.03-.01.09-.02.18-.028l.22-.018.14-.01.525-.025.682-.025.826-.024 1.308-.029 1.52-.027 1.704-.025 4.374-.046 2.123-.016 5.002-.026 3.952-.01 4.384.002 3.563.012 2.737.019 1.99.022 1.67.028.567.013.732.021.58.024.296.017.22.018.08.01v13.482c-.528.038-1.073.11-1.619.111l-9.63.007-11.413-.002v10.487h20.058v13.95h-19.88a3.407 3.407.0 00-.078.448l-.03.255-.026.294-.037.505-.023.375-.03.615-.026.666-.027.951-.016.747-.01.764-.008 1.028.003 1.264.008.73.009.467.01.45.021.632.026.573.02.345.022.311.025.274.014.122c.508.035 1.052.102 1.597.103l9.63.007 11.415-.002v13.426h-39.38zm58.17.024a5.015 5.015.0 01-.035-.479l-.016-.437-.015-.562-.014-.68-.02-1.231-.018-1.466-.03-3.56-.02-3.516-.019-5.581-.01-7.949.006-10.192.022-8.11.03-6.587.03-4.327.03-3.08.026-2.056.014-.877.022-1.109.016-.594.016-.472.017-.343c.009-.138.017-.226.026-.26h16.338v46.775l.503.03.46.028.431.023c.14.005.279.009.417.009l9.701.005 11.45-.001v16.6h-39.358z"/></svg> Helm Charts</a></li><li class="list-horizontal topnav-search-li"><button class=topnav-search-btn onclick=window.SearchModal&&window.SearchModal.open() title=Search aria-label="Open search">
<i class="fas fa-search"></i>
<kbd class=topnav-search-kbd></kbd></button></li></ul></section><div class=sub-top-nav><div id=breadcrumbs class="display-inline float-unset" itemscope itemtype=http://schema.org/BreadcrumbList><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle aria-label="Toggle Sidebar"><i class="fas fa-bars"><p class=hide>&nbsp;navi</p></i></a></span><span id=toc-menu aria-label="Table of Contents"><i class="fas fa-list-alt"><span class=hidden-toc>navigation</span></i></span>
<span class=links><span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/><span itemprop=name>YAUB Yet Another Useless Blog</span><meta itemprop=position content='1'></a></span> > <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/openshift/><span itemprop=name>OpenShift</span><meta itemprop=position content='2'></a></span> > Setting up Falco on OpenShift 4.12</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#headline-1>First Try</a><ul><li><a href=#headline-2>Summary of problems</a></li></ul></li><li><a href=#headline-3>Fixing the Falco daemonset</a><ul><li><a href=#headline-4>UPDATE</a></li></ul></li><li><a href=#headline-5>Fixing falco-sidekick and falco-sidekick-ui</a></li><li><a href=#headline-6>Testing Falco</a><ul><li><a href=#headline-7>Creating an event</a></li></ul></li></ul></nav></div></div><div class=social><a href="https://www.facebook.com/sharer/sharer.php?u=https%253A%252F%252Fblog.stderr.at%252Fopenshift%252F2023%252F10%252Fsetting-up-falco-on-openshift-4.12%252F" target=_blank rel="noopener noreferrer" class="facebook no-highlight" aria-label="share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-facebook" width="24" height="24" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a href="https://twitter.com/intent/tweet?url=https%253A%252F%252Fblog.stderr.at%252Fopenshift%252F2023%252F10%252Fsetting-up-falco-on-openshift-4.12%252F&amp;text=Setting%2bup%2bFalco%2bon%2bOpenShift%2b4.12" target=_blank rel="noopener noreferrer" class="twitter no-highlight" aria-label="share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-x" width="100" height="100" viewBox="0 0 30 30"><path d="M26.37 26l-8.795-12.822.015.012L25.52 4h-2.65l-6.46 7.48L11.28 4H4.33l8.211 11.971L12.54 15.97 3.88 26h2.65l7.182-8.322L19.42 26h6.95zM10.23 6l12.34 18h-2.1L8.12 6h2.11z"/></svg></div></div></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%253A%252F%252Fblog.stderr.at%252Fopenshift%252F2023%252F10%252Fsetting-up-falco-on-openshift-4.12%252F" target=_blank rel="noopener noreferrer" class="linkedin no-highlight" aria-label="share on LinkedIn"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg></div></div></a><a href="https://api.whatsapp.com/send?text=Setting%2bup%2bFalco%2bon%2bOpenShift%2b4.12%20https%253A%252F%252Fblog.stderr.at%252Fopenshift%252F2023%252F10%252Fsetting-up-falco-on-openshift-4.12%252F" target=_blank rel="noopener noreferrer" class="whatsapp no-highlight" aria-label="share on WhatsApp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a href="mailto:?subject=Setting%2bup%2bFalco%2bon%2bOpenShift%2b4.12&amp;body=Setting%2bup%2bFalco%2bon%2bOpenShift%2b4.12%250A%250A%2bFalco%2bis%2ba%2bsecurity%2btool%2bto%2bmonitor%2bkernel%2bevents%2blike%2bsystem%2bcalls%2bto%2bprovide%2breal-time%2balerts.%2bIn%2bthis%2bpost%2bI%2526%252339%253Bll%2bdocument%2bthe%2bsteps%2btaken%2bto%2bget%2bOpen%2bSource%2bFalco%2brunning%2bon%2ban%2bOpenShift%2b4.12%2b%25E2%2580%25A6%250A%250Ahttps%253A%252F%252Fblog.stderr.at%252Fopenshift%252F2023%252F10%252Fsetting-up-falco-on-openshift-4.12%252F" class="email no-highlight" aria-label="share via Email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg></div></div></a><a href=/rss/ class="rss no-highlight" aria-label=RSS><div class="resp-sharing-button resp-sharing-button--rss resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.731 455.731"><g><rect x="0" y="0" style="fill:transparent" width="455.731" height="455.731"/><g><path style="" d="M296.208 159.16C234.445 97.397 152.266 63.382 64.81 63.382v64.348c70.268.0 136.288 27.321 185.898 76.931 49.609 49.61 76.931 115.63 76.931 185.898h64.348C391.986 303.103 357.971 220.923 296.208 159.16z"/><path style="" d="M64.143 172.273v64.348c84.881.0 153.938 69.056 153.938 153.939h64.348c0-120.364-97.922-218.287-218.286-218.287z"/><circle style="" cx="109.833" cy="346.26" r="46.088"/></g></g></svg></div></div></a></div></div></div></header><div id=head-tags></div><div id=body-inner><h1 class="gradient-header article">Setting up Falco on OpenShift 4.12</h1><div class="categories tracked"><a id=textElement class="category-link no-highlight" href=/categories/openshift>OpenShift</a></div><p class="tracked article-meta"><span class=publish-date datetime=2023-10-23T00:00:00Z><i class="fas fa-calendar-alt"></i>
<strong>October 23, 2023</strong>
<span class=rev-date>(Rev: 2024-05-08)</span>
</span><span class=divider>-
</span><span class=author><a href=/authors/toni-schmidbauer><img class=avatar src=/img/authors/toni-schmidbauer.png alt="Toni Schmidbauer">
Toni Schmidbauer
</a></span><span class=divider>-
</span><span class=readtime title="2129 words"><i class="fas fa-clock"></i>
<strong>11 min read</strong>
<span class=word-count>(2129 words)</span></span><div class=bookmark-wrapper><button class=bookmark-btn data-url=/openshift/2023/10/setting-up-falco-on-openshift-4.12/ data-title="Setting up Falco on OpenShift 4.12" data-section=openshift data-date=2023-10-23 title="Save for later">
<i class="far fa-bookmark bookmark-icon"></i>
<span class=bookmark-text>Save</span>
</button>
<button class=print-btn onclick=window.print() title="Print this article">
<i class="fas fa-print"></i>
<span>Print</span>
</button>
<button class=reader-mode-toggle title="Toggle reader mode (R)" aria-pressed=false>
<i class="fas fa-book-reader"></i>
<span class=toggle-text>Reader Mode</span></button></div><script>(function(){const n="blog-bookmarks";function e(){try{return JSON.parse(localStorage.getItem(n))||[]}catch{return[]}}function i(e){localStorage.setItem(n,JSON.stringify(e))}function a(t){return e().some(e=>e.url===t)}function r(n){const r=n.dataset.url,l=n.dataset.title,d=n.dataset.section,u=n.dataset.date;let a=e();const c=a.findIndex(e=>e.url===r);c>-1?(a.splice(c,1),t(n,!1),s("Bookmark removed")):(a.unshift({url:r,title:l,section:d,date:u,savedAt:(new Date).toISOString()}),t(n,!0),s("Article saved!")),i(a),o(),window.dispatchEvent(new CustomEvent("bookmarks-changed"))}function t(e,t){const n=e.querySelector(".bookmark-icon"),s=e.querySelector(".bookmark-text");t?(e.classList.add("bookmarked"),n.classList.remove("far"),n.classList.add("fas"),s.textContent="Saved"):(e.classList.remove("bookmarked"),n.classList.remove("fas"),n.classList.add("far"),s.textContent="Save")}function s(e){const n=document.querySelector(".bookmark-toast");n&&n.remove();const t=document.createElement("div");t.className="bookmark-toast",t.innerHTML='<i class="fas fa-check"></i> '+e,document.body.appendChild(t),setTimeout(()=>t.classList.add("show"),10),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)},2e3)}function o(){const t=document.querySelector(".bookmarks-count");if(t){const n=e().length;t.textContent=n,t.style.display=n>0?"inline-block":"none"}}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".bookmark-btn");e&&(t(e,a(e.dataset.url)),e.addEventListener("click",function(e){e.preventDefault(),r(this)})),o()})})()</script></p><p><a href=https://falco.org/>Falco</a> is a security tool to monitor kernel events like system calls to
provide real-time alerts. In this post I'll document the steps taken
to get Open Source <a href=https://falco.org/>Falco</a> running on an OpenShift 4.12 cluster.</p><p><a href=https://blog.stderr.at/openshift/2023-10-23-openshift-falco/#headline-4>UPDATE</a>: Use the <code>falco-driver-loader-legacy</code> image for OpenShift 4.12 deployments.</p><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>First Try</h2><div id=outline-text-headline-1 class=outline-text-2><p>We will use the <a href=https://falcosecurity.github.io/charts>Falco Helm chart</a> version 3.8.0 for our first try of setting up Falco on our OpenShift cluster.</p><p>This is our values file:</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>driver:
</span></span><span style=display:flex><span>  kind: ebpf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>falco:
</span></span><span style=display:flex><span>  json_output: true
</span></span><span style=display:flex><span>  json_include_output_property: true
</span></span><span style=display:flex><span>  log_syslog: false
</span></span><span style=display:flex><span>  log_level: info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>falcosidekick:
</span></span><span style=display:flex><span>  enabled: true
</span></span><span style=display:flex><span>  webui:
</span></span><span style=display:flex><span>    enabled: true</span></span></code></pre></div></div><p>We would like to use the eBPF driver to monitor kernel events, enable
falco sidekick, which is used to route events and the falco sidekick
UI for easier testing.</p><p>Because of reasons we leverage kustomize to render the helm chart. The
final kustomize config is <a href=https://github.com/tosmi-gitops/openshift-gitops/tree/main/components/apps/falco/base>here</a> (after fixing all problems mentioned
below).</p><p>So after deploying the chart via ArgoCD (another story), we have the following pods:</p><div class="src src-bash"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ oc get pods -n falco
</span></span><span style=display:flex><span>NAME                             READY   STATUS                  RESTARTS      AGE
</span></span><span style=display:flex><span>falco-4cc8j                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>95s ago<span style=color:#f92672>)</span>   4m31s
</span></span><span style=display:flex><span>falco-bx87j                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>75s ago<span style=color:#f92672>)</span>   4m29s
</span></span><span style=display:flex><span>falco-ds9w6                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>99s ago<span style=color:#f92672>)</span>   4m30s
</span></span><span style=display:flex><span>falco-falcosidekick-ui-redis-0   1/1     Running                 <span style=color:#ae81ff>0</span>             4m28s
</span></span><span style=display:flex><span>falco-gxznz                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>3</span> <span style=color:#f92672>(</span>14s ago<span style=color:#f92672>)</span>   4m30s
</span></span><span style=display:flex><span>falco-vtnk5                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>98s ago<span style=color:#f92672>)</span>   4m29s
</span></span><span style=display:flex><span>falco-wbn2k                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>5</span> <span style=color:#f92672>(</span>80s ago<span style=color:#f92672>)</span>   4m29s</span></span></code></pre></div></div><p>hm, not so good. Seems like some <code>initContainers</code> are failing.</p><p>Let's check the <code>falco-driver-loader</code> initContainer:</p><div class="src src-bash"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>* Setting up /usr/src links from host
</span></span><span style=display:flex><span>* Running falco-driver-loader <span style=color:#66d9ef>for</span>: falco version<span style=color:#f92672>=</span>0.36.1, driver version<span style=color:#f92672>=</span>6.0.1+driver, arch<span style=color:#f92672>=</span>x86_64, kernel release<span style=color:#f92672>=</span>4.18.0-372.73.1.el8_6.x86_64, kernel version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>* Running falco-driver-loader with: driver<span style=color:#f92672>=</span>bpf, compile<span style=color:#f92672>=</span>yes, download<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>* Mounting debugfs
</span></span><span style=display:flex><span>mount: /sys/kernel/debug: permission denied.
</span></span><span style=display:flex><span>       dmesg<span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> may have more information after failed mount system call.
</span></span><span style=display:flex><span>* Filename <span style=color:#e6db74>&#39;falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o&#39;</span> is composed of:
</span></span><span style=display:flex><span> - driver name: falco
</span></span><span style=display:flex><span> - target identifier: rhcos
</span></span><span style=display:flex><span> - kernel release: 4.18.0-372.73.1.el8_6.x86_64
</span></span><span style=display:flex><span> - kernel version: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>* Trying to download a prebuilt eBPF probe from https://download.falco.org/driver/6.0.1%2Bdriver/x86_64/falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o
</span></span><span style=display:flex><span>curl: <span style=color:#f92672>(</span>22<span style=color:#f92672>)</span> The requested URL returned error: <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>Unable to find a prebuilt falco eBPF probe
</span></span><span style=display:flex><span>* Trying to compile the eBPF probe <span style=color:#f92672>(</span>falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>expr: syntax error: unexpected argument <span style=color:#e6db74>&#39;1&#39;</span>
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: *** /lib/modules/4.18.0-372.73.1.el8_6.x86_64/build: No such file or directory.  Stop.
</span></span><span style=display:flex><span>make: *** <span style=color:#f92672>[</span>Makefile:38: all<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>mv: cannot stat <span style=color:#e6db74>&#39;/usr/src/falco-6.0.1+driver/bpf/probe.o&#39;</span>: No such file or directory
</span></span><span style=display:flex><span>Unable to load the falco eBPF probe</span></span></code></pre></div></div><p>Seems to be an issue with a missing directory <span style=text-decoration:underline>/lib/modules/4.18.0-372.73.1.el8_6.x86_64/build</span>.</p><p>And we told the helm chart to enable <code>falco-sidekick</code> and
<code>falco-sidekick-ui</code>, but where are they?</p><p>Let's check the events with <code>oc get events</code> as well, and what do we see?</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>8s          Warning   FailedCreate             replicaset/falco-falcosidekick-7cfbbbf89f      Error creating: pods <span style=color:#e6db74>&#34;falco-falcosidekick-7cfbbbf89f-&#34;</span> is forbidden: unable to validate against any security context constraint: <span style=color:#f92672>[</span>provider <span style=color:#e6db74>&#34;anyuid&#34;</span>: Forbidden: not usable by user or serviceaccount, provider restricted-v2: .spec.securityContext.fsGroup: Invalid value: <span style=color:#f92672>[]</span>int64<span style=color:#f92672>{</span>1234<span style=color:#f92672>}</span>: <span style=color:#ae81ff>1234</span> is not an allowed group, provider restricted-v2: .containers<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.runAsUser: Invalid value: 1234: must be in the ranges: <span style=color:#f92672>[</span>1000730000, 1000739999<span style=color:#f92672>]</span>, provider <span style=color:#e6db74>&#34;restricted&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;nonroot-v2&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;nonroot&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostmount-anyuid&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;machine-api-termination-handler&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostnetwork-v2&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostnetwork&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostaccess&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;falco&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;node-exporter&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;privileged&#34;</span>: Forbidden: not usable by user or serviceaccount<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>6s          Warning   FailedCreate             replicaset/falco-falcosidekick-ui-76885bd484   Error creating: pods <span style=color:#e6db74>&#34;falco-falcosidekick-ui-76885bd484-&#34;</span> is forbidden: unable to validate against any security context constraint: <span style=color:#f92672>[</span>provider <span style=color:#e6db74>&#34;anyuid&#34;</span>: Forbidden: not usable by user or serviceaccount, provider restricted-v2: .spec.securityContext.fsGroup: Invalid value: <span style=color:#f92672>[]</span>int64<span style=color:#f92672>{</span>1234<span style=color:#f92672>}</span>: <span style=color:#ae81ff>1234</span> is not an allowed group, provider restricted-v2: .containers<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.runAsUser: Invalid value: 1234: must be in the ranges: <span style=color:#f92672>[</span>1000730000, 1000739999<span style=color:#f92672>]</span>, provider <span style=color:#e6db74>&#34;restricted&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;nonroot-v2&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;nonroot&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostmount-anyuid&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;machine-api-termination-handler&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostnetwork-v2&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostnetwork&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;hostaccess&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;falco&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;node-exporter&#34;</span>: Forbidden: not usable by user or serviceaccount, provider <span style=color:#e6db74>&#34;privileged&#34;</span>: Forbidden: not usable by user or serviceaccount<span style=color:#f92672>]</span></span></span></code></pre></div></div><p>Looks like a problem with OpenShifts Security Context constraints (SCC's).</p><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Summary of problems</h3><div id=outline-text-headline-2 class=outline-text-3><ul><li>The falco <code>DaemonSet</code> fails to start pods because there is an issue with a missing directory</li><li>Falco Sidekick and Falco Sidekick UI fails to start because of
Security Context Constraint (SCC) issues</li></ul></div></div></div></div><div id=outline-container-headline-3 class=outline-2><h2 id=headline-3>Fixing the Falco daemonset</h2><div id=outline-text-headline-3 class=outline-text-2><p>Falco tries to download a pre-compiled eBPF probe, fails and then
tries to compile that probe for our host OS kernel. This fails with the message:</p><div class="src src-bash"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: *** /lib/modules/4.18.0-372.73.1.el8_6.x86_64/build: No such file or directory.  Stop.</span></span></code></pre></div></div><p>As far as we know there are no kernel sources installed on RHCOS nodes
in OpenShift. After a little bit of searching the interweb we found
the following issue comment on Github:</p><p><a href=https://github.com/falcosecurity/falco/issues/1505#issuecomment-754745960>OpenShift under vsphere: Download failed, consider compiling your own falco module and loading it or getting in touch with the Falco community</a></p><p>So we need to enable the <code>kernel-devel</code> extension, the official docs are
<a href=https://docs.openshift.com/container-platform/4.12/post_installation_configuration/machine-configuration-tasks.html#rhcos-add-extensions_post-install-machine-configuration-tasks>here</a>. It does not mention <code>kernel-devel</code>, but there's a <a href=https://access.redhat.com/solutions/6972423>knowledge base
article</a> mentioning <code>kernel-devel</code>, so let's give it a try.</p><p>We deploy two <code>MachineConfigs</code>, one for <a href=https://github.com/tosmi-gitops/openshift-gitops/blob/main/components/apps/falco/base/worker-machineconfig.yaml>worker</a> and one for <a href=https://github.com/tosmi-gitops/openshift-gitops/blob/main/components/apps/falco/base/master-machineconfig.yaml>master</a> nodes
to rollout the extension, the worker configuration looks like this:</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>machineconfiguration.openshift.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>MachineConfig</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>machineconfiguration.openshift.io/role</span>: <span style=color:#ae81ff>worker</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>99</span>-<span style=color:#ae81ff>worker-kernel-devel-extensions</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>extensions</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>kernel-devel</span></span></span></code></pre></div></div><p>See also our Kustomize configuration <a href=https://github.com/tosmi-gitops/openshift-gitops/blob/main/components/apps/falco/base/kustomization.yaml>here</a>.</p><p>As soon as we apply our <code>MachineConfigs</code>, OpenShift starts the rollout via MaschineConfigPool's:</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>$ oc get mcp
</span></span><span style=display:flex><span>NAME     CONFIG                                             UPDATED   UPDATING   DEGRADED   MACHINECOUNT   READYMACHINECOUNT   UPDATEDMACHINECOUNT   DEGRADEDMACHINECOUNT   AGE
</span></span><span style=display:flex><span>master   rendered-master-ce464ff45cc049fce3e8a63e36a4ee9e   False     True       False      3              0                   0                     0                      13d
</span></span><span style=display:flex><span>worker   rendered-worker-a0f8f0d915ef01ba4a1ab3047b6c863d   False     True       False      3              0                   0                     0                      13d</span></span></code></pre></div></div><p>When the rollout is done, let's restart all Falco <code>DaemonSet</code> pods:</p><div class="src src-bash"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ oc delete pods -l app.kubernetes.io/name<span style=color:#f92672>=</span>falco</span></span></code></pre></div></div><p>And check the status:</p><div class="src src-bash"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ oc get pods
</span></span><span style=display:flex><span>NAME                             READY   STATUS                  RESTARTS     AGE
</span></span><span style=display:flex><span>falco-5wfnk                      0/2     Init:Error              <span style=color:#ae81ff>1</span> <span style=color:#f92672>(</span>3s ago<span style=color:#f92672>)</span>   7s
</span></span><span style=display:flex><span>falco-66fxw                      0/2     Init:0/2                <span style=color:#ae81ff>1</span> <span style=color:#f92672>(</span>2s ago<span style=color:#f92672>)</span>   6s
</span></span><span style=display:flex><span>falco-6fbc7                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>1</span> <span style=color:#f92672>(</span>2s ago<span style=color:#f92672>)</span>   8s
</span></span><span style=display:flex><span>falco-8h8n4                      0/2     Init:0/2                <span style=color:#ae81ff>1</span> <span style=color:#f92672>(</span>2s ago<span style=color:#f92672>)</span>   6s
</span></span><span style=display:flex><span>falco-falcosidekick-ui-redis-0   1/1     Running                 <span style=color:#ae81ff>0</span>            18m
</span></span><span style=display:flex><span>falco-nhld2                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>1</span> <span style=color:#f92672>(</span>2s ago<span style=color:#f92672>)</span>   6s
</span></span><span style=display:flex><span>falco-xqv4b                      0/2     Init:CrashLoopBackOff   <span style=color:#ae81ff>1</span> <span style=color:#f92672>(</span>3s ago<span style=color:#f92672>)</span>   8s</span></span></code></pre></div></div><p>still, the <code>initContainers</code> fail. Lets check the log again</p><div class="src src-bash"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ oc logs -c falco-driver-loader falco-5wfnk
</span></span><span style=display:flex><span>* Setting up /usr/src links from host
</span></span><span style=display:flex><span>* Running falco-driver-loader <span style=color:#66d9ef>for</span>: falco version<span style=color:#f92672>=</span>0.36.1, driver version<span style=color:#f92672>=</span>6.0.1+driver, arch<span style=color:#f92672>=</span>x86_64, kernel release<span style=color:#f92672>=</span>4.18.0-372.73.1.el8_6.x86_64, kernel version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>* Running falco-driver-loader with: driver<span style=color:#f92672>=</span>bpf, compile<span style=color:#f92672>=</span>yes, download<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>* Mounting debugfs
</span></span><span style=display:flex><span>mount: /sys/kernel/debug: permission denied.
</span></span><span style=display:flex><span>       dmesg<span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> may have more information after failed mount system call.
</span></span><span style=display:flex><span>* Filename <span style=color:#e6db74>&#39;falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o&#39;</span> is composed of:
</span></span><span style=display:flex><span> - driver name: falco
</span></span><span style=display:flex><span> - target identifier: rhcos
</span></span><span style=display:flex><span> - kernel release: 4.18.0-372.73.1.el8_6.x86_64
</span></span><span style=display:flex><span> - kernel version: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>* Trying to download a prebuilt eBPF probe from https://download.falco.org/driver/6.0.1%2Bdriver/x86_64/falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o
</span></span><span style=display:flex><span>curl: <span style=color:#f92672>(</span>22<span style=color:#f92672>)</span> The requested URL returned error: <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>Unable to find a prebuilt falco eBPF probe
</span></span><span style=display:flex><span>* Trying to compile the eBPF probe <span style=color:#f92672>(</span>falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Makefile:1005: *** <span style=color:#e6db74>&#34;Cannot generate ORC metadata for CONFIG_UNWINDER_ORC=y, please install libelf-dev, libelf-devel or elfutils-libelf-devel&#34;</span>.  Stop.
</span></span><span style=display:flex><span>make: *** <span style=color:#f92672>[</span>Makefile:38: all<span style=color:#f92672>]</span> Error <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>mv: cannot stat <span style=color:#e6db74>&#39;/usr/src/falco-6.0.1+driver/bpf/probe.o&#39;</span>: No such file or directory
</span></span><span style=display:flex><span>Unable to load the falco eBPF probe</span></span></code></pre></div></div><p>So this time we get another error, the culprit is the following line</p><div class="src src-bash"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Makefile:1005: *** <span style=color:#e6db74>&#34;Cannot generate ORC metadata for CONFIG_UNWINDER_ORC=y, please install libelf-dev, libelf-devel or elfutils-libelf-devel&#34;</span>.  Stop.</span></span></code></pre></div></div><p>Back to searching the interweb only reveals an old <a href=https://github.com/falcosecurity/falco/issues/376>issue</a>, that should
be fixed already.</p><p>So as a quick hack we <a href=https://github.com/tosmi/playground/blob/master/openshift/falco/custom-falco-driver-loader/Dockerfile>modified</a> the <code>falco-driver-loader</code> image to
contain <code>libelf-dev</code> and pushed to image to <a href="https://quay.io/repository/tosmi/falco-driver-loader?tab=tags">quay</a>.</p><p>We then modified our falco helm configuration to use the updated image:</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>driver</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ebpf</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>loader</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>initContainer</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>image</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>registry</span>: <span style=color:#ae81ff>quay.io</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>repository</span>: <span style=color:#ae81ff>tosmi/falco-driver-loader</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>tag</span>: <span style=color:#ae81ff>0.36.1</span>-<span style=color:#ae81ff>libelf-dev</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>falco</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>json_output</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>json_include_output_property</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>log_syslog</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>log_level</span>: <span style=color:#ae81ff>info</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>falcosidekick</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>webui</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span></span></span></code></pre></div></div><p>Note the updated <code>diver.loader.initContainer</code> section.</p><p>Let's check the our pods again:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc get pods
</span></span><span style=display:flex><span>NAME                                  READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>falco-2ssgx                           2/2     Running   <span style=color:#ae81ff>0</span>          66s
</span></span><span style=display:flex><span>falco-5hqgg                           1/2     Running   <span style=color:#ae81ff>0</span>          66s
</span></span><span style=display:flex><span>falco-82kq9                           2/2     Running   <span style=color:#ae81ff>0</span>          65s
</span></span><span style=display:flex><span>falco-99zxw                           2/2     Running   <span style=color:#ae81ff>0</span>          65s
</span></span><span style=display:flex><span>falco-falcosidekick-test-connection   0/1     Error     <span style=color:#ae81ff>0</span>          67s
</span></span><span style=display:flex><span>falco-falcosidekick-ui-redis-0        1/1     Running   <span style=color:#ae81ff>0</span>          31m
</span></span><span style=display:flex><span>falco-slx5k                           2/2     Running   <span style=color:#ae81ff>0</span>          65s
</span></span><span style=display:flex><span>falco-tzm8d                           2/2     Running   <span style=color:#ae81ff>0</span>          65s</span></span></code></pre></div></div><p>Success! This time the <code>DaemonSet</code> pods started successfully. Just note
that you have to be patient. The first start took about 1-2 minutes to
complete.</p><p>Let's check the logs of one <code>DaemonSet</code> pod just to sure:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>oc logs -c falco-driver-loader falco-2ssgx
</span></span><span style=display:flex><span>* Setting up /usr/src links from host
</span></span><span style=display:flex><span>* Running falco-driver-loader <span style=color:#66d9ef>for</span>: falco version<span style=color:#f92672>=</span>0.36.1, driver version<span style=color:#f92672>=</span>6.0.1+driver, arch<span style=color:#f92672>=</span>x86_64, kernel release<span style=color:#f92672>=</span>4.18.0-372.73.1.el8_6.x86_64, kernel version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>* Running falco-driver-loader with: driver<span style=color:#f92672>=</span>bpf, compile<span style=color:#f92672>=</span>yes, download<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>* Mounting debugfs
</span></span><span style=display:flex><span>mount: /sys/kernel/debug: permission denied.
</span></span><span style=display:flex><span>       dmesg<span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> may have more information after failed mount system call.
</span></span><span style=display:flex><span>* Filename <span style=color:#e6db74>&#39;falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o&#39;</span> is composed of:
</span></span><span style=display:flex><span> - driver name: falco
</span></span><span style=display:flex><span> - target identifier: rhcos
</span></span><span style=display:flex><span> - kernel release: 4.18.0-372.73.1.el8_6.x86_64
</span></span><span style=display:flex><span> - kernel version: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>* Trying to download a prebuilt eBPF probe from https://download.falco.org/driver/6.0.1%2Bdriver/x86_64/falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o
</span></span><span style=display:flex><span>curl: <span style=color:#f92672>(</span>22<span style=color:#f92672>)</span> The requested URL returned error: <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>Unable to find a prebuilt falco eBPF probe
</span></span><span style=display:flex><span>* Trying to compile the eBPF probe <span style=color:#f92672>(</span>falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>* eBPF probe located in /root/.falco/6.0.1+driver/x86_64/falco_rhcos_4.18.0-372.73.1.el8_6.x86_64_1.o
</span></span><span style=display:flex><span>* Success: eBPF probe symlinked to /root/.falco/falco-bpf.o</span></span></code></pre></div></div><p>Especially the line</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>* Success: eBPF probe symlinked to /root/.falco/falco-bpf.o</span></span></code></pre></div></div><p>looks promising. So up to the next problem, getting falco-sidekick and falco-sidekick-ui running.</p><p>We also <a href=https://github.com/falcosecurity/falco/issues/2884>opened a bug</a> report upstream to get feedback from the
developers on this issue.</p><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>UPDATE</h3><div id=outline-text-headline-4 class=outline-text-3><p><a href=https://github.com/Andreagit97>Andreagit97</a> was so nice mentioning in the issue above that
actually there is an image with libelf-dev available,
<a href=https://hub.docker.com/r/falcosecurity/falco-driver-loader-legacy>falco-driver-loader-legacy</a>. We can confirm that this image fixes the
problem mentioned above.</p><p>So this is our final falco helm chart values.yaml:</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>driver</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ebpf</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>loader</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>initContainer</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>image</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>repository</span>: <span style=color:#ae81ff>falcosecurity/falco-driver-loader-legacy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>falco</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>json_output</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>json_include_output_property</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>log_syslog</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>log_level</span>: <span style=color:#ae81ff>info</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>falcosidekick</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>webui</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span></span></span></code></pre></div></div></div></div></div></div><div id=outline-container-headline-5 class=outline-2><h2 id=headline-5>Fixing falco-sidekick and falco-sidekick-ui</h2><div id=outline-text-headline-5 class=outline-text-2><p>Remember pod startup actually failed because of the following event (check with <code>oc get events</code>):</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>.spec.securityContext.fsGroup: Invalid value: []int64{1234}: 1234 is not an allowed group</span></span></code></pre></div></div><p>It seems the sidekick pods want to run with a specific UID. The
default OpenShift Security Context Constraint (SCC) <code>restricted</code>
prohibits this.</p><p>Lets confirm our suspicion:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc get deploy -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.spec.template.spec.securityContext}{&#34;\n&#34;}&#39;</span> falco-falcosidekick
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;fsGroup&#34;</span>:1234,<span style=color:#e6db74>&#34;runAsUser&#34;</span>:1234<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>$ oc get deploy -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.spec.template.spec.securityContext}{&#34;\n&#34;}&#39;</span> falco-falcosidekick-ui
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;fsGroup&#34;</span>:1234,<span style=color:#e6db74>&#34;runAsUser&#34;</span>:1234<span style=color:#f92672>}</span></span></span></code></pre></div></div><p>Bingo! <code>securityContext</code> is set to 1234 for both deployments. There is
another SCC that we could leverage, <code>nonroot</code>, which basically allows any
UID expect 0. We just need to get the <code>ServiceAccount</code> that
falco-sidekick and falco-sidekick-ui are actually using:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc get deploy -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.spec.template.spec.serviceAccount}{&#34;\n&#34;}&#39;</span> falco-falcosidekick
</span></span><span style=display:flex><span>falco-falcosidekick
</span></span><span style=display:flex><span>$ oc get deploy -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.spec.template.spec.serviceAccount}{&#34;\n&#34;}&#39;</span> falco-falcosidekick-ui
</span></span><span style=display:flex><span>falco-falcosidekick-ui</span></span></code></pre></div></div><p>So falco-sidekick uses <code>falco-sidekick</code> as <code>ServiceAccount</code> and falco-sidekick-ui <code>falco-sidekick-ui</code>. Lets
grant both <code>ServiceAccounts</code> access to the <code>nonroot</code> SCC.</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>kind: ClusterRoleBinding
</span></span><span style=display:flex><span>metadata:
</span></span><span style=display:flex><span>  name: falco-falcosidekick-scc:nonroot
</span></span><span style=display:flex><span>roleRef:
</span></span><span style=display:flex><span>  apiGroup: rbac.authorization.k8s.io
</span></span><span style=display:flex><span>  kind: ClusterRole
</span></span><span style=display:flex><span>  name: system:openshift:scc:nonroot
</span></span><span style=display:flex><span>subjects:
</span></span><span style=display:flex><span>- kind: ServiceAccount
</span></span><span style=display:flex><span>  name: falco-falcosidekick
</span></span><span style=display:flex><span>  namespace: falco
</span></span><span style=display:flex><span>- kind: ServiceAccount
</span></span><span style=display:flex><span>  name: falco-falcosidekick-ui
</span></span><span style=display:flex><span>  namespace: falco</span></span></code></pre></div></div><p>We've already added this <a href=https://github.com/tosmi-gitops/openshift-gitops/blob/main/components/apps/falco/base/falcosidekick-any-uid-scc.yaml>file</a> to our <a href=https://github.com/tosmi-gitops/openshift-gitops/blob/main/components/apps/falco/base/falcosidekick-any-uid-scc.yaml#L19>Kustomize</a> configuration.</p><p>Let's trigger a redeployment by deleting the <code>ReplicaSets</code> of both deployments, they will be re-created automatically:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc delete rs -l app.kubernetes.io/name<span style=color:#f92672>=</span>falcosidekick
</span></span><span style=display:flex><span>$ oc delete rs -l app.kubernetes.io/name<span style=color:#f92672>=</span>falcosidekick-ui</span></span></code></pre></div></div><p>Finally let's confirm everything is up and running:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc get deploy,ds,pods
</span></span><span style=display:flex><span>NAME                                     READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style=display:flex><span>deployment.apps/falco-falcosidekick      2/2     <span style=color:#ae81ff>2</span>            <span style=color:#ae81ff>2</span>           5d
</span></span><span style=display:flex><span>deployment.apps/falco-falcosidekick-ui   2/2     <span style=color:#ae81ff>2</span>            <span style=color:#ae81ff>2</span>           5d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME                   DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
</span></span><span style=display:flex><span>daemonset.apps/falco   <span style=color:#ae81ff>6</span>         <span style=color:#ae81ff>6</span>         <span style=color:#ae81ff>6</span>       <span style=color:#ae81ff>6</span>            <span style=color:#ae81ff>6</span>           &lt;none&gt;          6d2h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME                                          READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>pod/falco-2ssgx                               2/2     Running   <span style=color:#ae81ff>0</span>          21m
</span></span><span style=display:flex><span>pod/falco-5hqgg                               2/2     Running   <span style=color:#ae81ff>0</span>          21m
</span></span><span style=display:flex><span>pod/falco-82kq9                               2/2     Running   <span style=color:#ae81ff>0</span>          21m
</span></span><span style=display:flex><span>pod/falco-99zxw                               2/2     Running   <span style=color:#ae81ff>0</span>          21m
</span></span><span style=display:flex><span>pod/falco-falcosidekick-7cfbbbf89f-qxwxs      1/1     Running   <span style=color:#ae81ff>0</span>          118s
</span></span><span style=display:flex><span>pod/falco-falcosidekick-7cfbbbf89f-rz5lj      1/1     Running   <span style=color:#ae81ff>0</span>          118s
</span></span><span style=display:flex><span>pod/falco-falcosidekick-ui-76885bd484-p7lqm   1/1     Running   <span style=color:#ae81ff>0</span>          2m18s
</span></span><span style=display:flex><span>pod/falco-falcosidekick-ui-76885bd484-sfgh4   1/1     Running   <span style=color:#ae81ff>0</span>          2m18s
</span></span><span style=display:flex><span>pod/falco-falcosidekick-ui-redis-0            1/1     Running   <span style=color:#ae81ff>0</span>          51m
</span></span><span style=display:flex><span>pod/falco-slx5k                               2/2     Running   <span style=color:#ae81ff>0</span>          21m
</span></span><span style=display:flex><span>pod/falco-tzm8d                               2/2     Running   <span style=color:#ae81ff>0</span>          21m</span></span></code></pre></div></div></div></div><div id=outline-container-headline-6 class=outline-2><h2 id=headline-6>Testing Falco</h2><div id=outline-text-headline-6 class=outline-text-2><p>Now that everything seems to be running, lets do a quick test. First
we will try to access the Falco Sidekick user interface.</p><p>Falco will not deploy a route for the UI automatically, instead we've
created a <a href=https://github.com/tosmi-gitops/openshift-gitops/tree/main/components/apps/falco/overlays/sidekick-ui-route>Kustomize overlay</a> with a custom route:</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>route.openshift.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Route</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>falco-falcosidekick-ui</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>falco</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>host</span>: <span style=color:#ae81ff>falcosidekick-ui.apps.hub.aws.tntinfra.net</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tls</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>termination</span>: <span style=color:#ae81ff>edge</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>to</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>falco-falcosidekick-ui</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>wildcardPolicy</span>: <span style=color:#ae81ff>None</span></span></span></code></pre></div></div><p>After deploying the <code>Route</code> we can access the Falco UI with the hostname
specified in the route object. The default username seems to be
<span style=text-decoration:underline>admin/admin</span> which is kind of strange for a security tool, maybe that's
the reason Falco does not expose the UI per default.</p><p><img src=/openshift/images/falco/falco-ui.png alt=/openshift/images/falco/falco-ui.png title=/openshift/images/falco/falco-ui.png></p><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Creating an event</h3><div id=outline-text-headline-7 class=outline-text-3><p>As a last test let's try to trigger an event. We open a shell to one
of the falco <code>DaemonSet</code> pods and execute a suspicious command:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ oc rsh falco-2ssgx
</span></span><span style=display:flex><span>Defaulted container <span style=color:#e6db74>&#34;falco&#34;</span> out of: falco, falcoctl-artifact-follow, falco-driver-loader <span style=color:#f92672>(</span>init<span style=color:#f92672>)</span>, falcoctl-artif# cat /etc/shadow
</span></span><span style=display:flex><span>root:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>daemon:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>bin:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>sys:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>sync:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>games:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>man:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>lp:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>mail:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>news:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>uucp:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>proxy:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>www-data:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>backup:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>list:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>irc:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>_apt:*:19639:0:99999:7:::
</span></span><span style=display:flex><span>nobody:*:19639:0:99999:7:::
</span></span><span style=display:flex><span><span style=color:#75715e>#</span></span></span></code></pre></div></div><p>and we can see an event with priority <strong>Warning</strong> in the Falco ui.</p><p><img src=/openshift/images/falco/falco-cat-etc-shadow.png alt=/openshift/images/falco/falco-cat-etc-shadow.png title=/openshift/images/falco/falco-cat-etc-shadow.png></p><p>That's it, seems like Falco is successfully running on OpenShift 4.12.</p></div></div></div></div><hr class=related><div class=related-content><h3>See Also:</h3><ul><li class=related><a href=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/>The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8</a>
&ndash;
<time datetime=2025-12-06T00:00:00+0000><i>Dec 6, 2025</i></time><br><small><p class=related>In the previous articles, we deployed a distributed tracing infrastructure with TempoStack and OpenTelemetry Collector. We also deployed a Grafana instance to visualize the traces. The configuration was done in a way that allows everybody to read the traces. Every system:authenticated user is able to read ALL traces. This is usually not what you want. You want to limit trace access to only the appropriate namespace.
In this article, well limit the read access to traces. The users of the team-a namespace will only be able to see their own traces.</p></small></li><li class=related><a href=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/>The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7</a>
&ndash;
<time datetime=2025-12-04T00:00:00+0000><i>Dec 4, 2025</i></time><br><small><p class=related>While we have been using the integrated tracing UI in OpenShift, it is time to summon Grafana. Grafana is a visualization powerhouse that allows teams to build custom dashboards, correlate traces with logs and metrics, and gain deep insights into their applications. In this article, well deploy a dedicated Grafana instance for team-a in their namespace, configure a Tempo datasource, and create a dashboard to explore distributed traces.</p></small></li><li class=related><a href=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/>The Hitchhiker's Guide to Observability Introduction - Part 1</a>
&ndash;
<time datetime=2025-11-23T00:00:00+0000><i>Nov 23, 2025</i></time><br><small><p class=related>With this article I would like to summarize and, especially, remember my setup. This is Part 1 of a series of articles that I split up so it is easier to read and understand and not too long. Initially, there will be 6 parts, but I will add more as needed.</p></small></li><li class=related><a href=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/>The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2</a>
&ndash;
<time datetime=2025-11-24T00:00:00+0000><i>Nov 24, 2025</i></time><br><small><p class=related>After covering the fundamentals and architecture in Part 1, its time to get our hands dirty! This article walks through the complete implementation of a distributed tracing infrastructure on OpenShift.
Well deploy and configure the Tempo Operator and a multi-tenant TempoStack instance. For S3 storage we will use the integrated OpenShift Data Foundation. However, you can use whatever S3-compatible storage you have available.</p></small></li><li class=related><a href=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/>The Hitchhiker's Guide to Observability - Central Collector - Part 3</a>
&ndash;
<time datetime=2025-11-25T00:00:00+0000><i>Nov 25, 2025</i></time><br><small><p class=related>With the architecture defined in Part 1 and TempoStack deployed in Part 2, its time to tackle the heart of our distributed tracing system: the Central OpenTelemetry Collector. This is the critical component that sits between your application namespaces and TempoStack, orchestrating trace flow, metadata enrichment, and tenant routing.</p></small></li></ul></div><div class=comments-section id=comments><hr class=comments-divider><h3 class=comments-title><i class="fas fa-comments"></i> Discussion</h3><div id=comments-consent class=comments-consent><div class=consent-box><i class="fab fa-github consent-icon"></i><p class=consent-text>Comments are powered by <strong>GitHub Discussions</strong>.
To participate, you'll need a GitHub account.</p><p class=consent-notice><i class="fas fa-info-circle"></i>
By loading comments, you agree to GitHub's
<a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank rel=noopener>Privacy Policy</a>.
Your data is processed by GitHub, not by this website.</p><button id=load-comments-btn class=load-comments-btn>
<i class="fas fa-comment-dots"></i> Load Comments
</button>
<label class=remember-choice><input type=checkbox id=remember-consent>
<span>Remember my choice for this site</span></label></div></div><div id=giscus-container class=giscus-container style=display:none></div></div><script>(function(){const t=document.getElementById("comments-consent"),e=document.getElementById("giscus-container"),n=document.getElementById("load-comments-btn"),s=document.getElementById("remember-consent"),o="giscus-consent";localStorage.getItem(o)==="granted"&&i(),n&&n.addEventListener("click",function(){s&&s.checked&&localStorage.setItem(o,"granted"),i()});function i(){t&&(t.style.display="none"),e&&(e.style.display="block");const n=document.createElement("script");n.src="https://giscus.app/client.js",n.setAttribute("data-repo","stderrat/stderrat.github.io"),n.setAttribute("data-repo-id","MDEwOlJlcG9zaXRvcnkyNTA1Mjc4OTU="),n.setAttribute("data-category","Comments"),n.setAttribute("data-category-id","DIC_kwDODu7Al84Czfdq"),n.setAttribute("data-mapping","pathname"),n.setAttribute("data-strict","0"),n.setAttribute("data-reactions-enabled","1"),n.setAttribute("data-emit-metadata","0"),n.setAttribute("data-input-position","top"),n.setAttribute("data-theme","preferred_color_scheme"),n.setAttribute("data-lang","en"),n.setAttribute("data-loading","lazy"),n.crossOrigin="anonymous",n.async=!0,e.appendChild(n)}})()</script><footer class=footline></footer></div></div><div id=navigation-bottom><a class="readme-a margin-right-5 margin-bottom-2 inline-flex relative no-highlight" href=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/ title="Quay Deployment and Configuration using GitOps"><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-left btn-bottom-prev"></i>
<span class=btn-bottom-text></span> Quay Deployment and Configuration using GitOps</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a><a class="readme-a inline-flex relative no-highlight" href=/openshift/2023/10/how-to-force-a-machineconfig-rollout/ title="How to force a MachineConfig rollout" style=margin-right:0><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-right btn-bottom-next"></i>
<span class=btn-bottom-text></span> How to force a MachineConfig rollout</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a></div><div class=copyright><p>Copyright &copy; 2020 - 2025 Toni Schmidbauer & Thomas Jungbauer</p></div></section><script>(function(){document.addEventListener("DOMContentLoaded",function(){var e,t=document.querySelector(".read-progress");if(!t)return;t.classList.add("position-fixed");function n(){var n,s=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight;e>0&&(n=Math.min(s/e*100,100),t.style.width=n+"%")}e=!1,window.addEventListener("scroll",function(){e||(window.requestAnimationFrame(function(){n(),e=!1}),e=!0)},{passive:!0}),n(),window.addEventListener("resize",n,{passive:!0})})})()</script><div style=left:-1e3px;overflow:scroll;position:absolute;top:-1e3px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1765605257></script><script src=/js/perfect-scrollbar.jquery.min.js?1765605257></script><script src=/js/jquery.sticky.js?1765605257></script><script src=/js/featherlight.min.js?1765605257></script><script src=/js/webp-upgrade.js?1765605257></script><script src=/js/highlight.pack.js?1765605257></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/learn.js?1765605257></script><script src=/js/hugo-learn.js?1765605257></script><script src=/js/yaub.js?1765605257></script><script src=/js/reader-mode.js?1765605257></script><link href=/pagefind/pagefind-ui.css rel=stylesheet><script src=/pagefind/pagefind-ui.js></script><script src=/js/search-modal.js?1765605257></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target.getAttribute("id");if(e.intersectionRatio>0){clearActiveStatesInTableOfContents();const e=document.querySelector(`aside nav li a[href="#${t}"]`);e&&e.parentElement.classList.add("active")}})});document.querySelectorAll("h1[id],h2[id],h3[id]").forEach(t=>{e.observe(t)})});function clearActiveStatesInTableOfContents(){document.querySelectorAll("aside nav li").forEach(e=>{e.classList.remove("active")})}</script><script type=text/javascript>function scrollTopAnimated(){$("html, body").animate({scrollTop:"0"},500)}</script><script>function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(".article-box").click(function(){return window.location=$(this).attr("href"),$this.stopPropagation(),!1})</script><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("a.category-link");e.forEach(function(e){var t=e.textContent.trim().toLowerCase();t==="openshift"&&e.classList.add("openshift"),t==="compliance"&&e.classList.add("compliance"),t==="service mesh"&&e.classList.add("mesh"),t==="security"&&e.classList.add("security"),t==="other"&&e.classList.add("other"),t==="ansible"&&e.classList.add("ansible"),t==="supply chain"&&e.classList.add("cicd"),t==="gitops"&&e.classList.add("gitops"),t==="grafana"&&e.classList.add("grafana"),t==="tempo"&&e.classList.add("grafana"),t==="opentelemetry"&&e.classList.add("opentelemetry"),t==="advanced cluster security"&&e.classList.add("acs"),t==="quay"&&e.classList.add("quay")})})</script><script src=/js/js-yaml/js-yaml.min.js?1765605257></script><script src=/js/d3/d3-color.min.js?1765605257></script><script src=/js/d3/d3-dispatch.min.js?1765605257></script><script src=/js/d3/d3-drag.min.js?1765605257></script><script src=/js/d3/d3-ease.min.js?1765605257></script><script src=/js/d3/d3-interpolate.min.js?1765605257></script><script src=/js/d3/d3-selection.min.js?1765605257></script><script src=/js/d3/d3-timer.min.js?1765605257></script><script src=/js/d3/d3-transition.min.js?1765605257></script><script src=/js/d3/d3-zoom.min.js?1765605257></script><script src=/mermaid/mermaid.js?1765605257></script><script>window.relearn=window.relearn||{},window.relearn.themeUseMermaid=!0,window.relearn.mermaidConfig={securityLevel:"loose"},window.T_Reset_view="Reset view",window.T_View_reset="View reset",window.showToast=window.showToast||function(e){console.log("Toast:",e)},typeof mermaid!="undefined"&&mermaid.initialize({startOnLoad:!1,securityLevel:"loose",theme:"default"})</script><div class=keyboard-hints id=keyboard-hints><div class="keyboard-hint keyboard-hint-left"><kbd></kbd>
<span>Previous</span></div><div class=keyboard-hint-center><span class=hint-text>Use arrow keys to navigate</span>
<button class=hint-dismiss id=hint-dismiss title="Got it!"></button></div><div class="keyboard-hint keyboard-hint-right"><span>Next</span>
<kbd></kbd></div></div><div class="keyboard-flash keyboard-flash-left" id=flash-left><kbd></kbd></div><div class="keyboard-flash keyboard-flash-right" id=flash-right><kbd></kbd></div><script>(function(){const t="keyboard-hints-dismissed",e=document.getElementById("keyboard-hints"),i=document.getElementById("hint-dismiss"),n=document.getElementById("flash-left"),s=document.getElementById("flash-right");function o(){return localStorage.getItem(t)==="true"}function a(){if(!e)return;o()?e.style.display="none":setTimeout(function(){e.classList.add("show"),setTimeout(function(){o()||(e.classList.remove("show"),e.classList.add("fade-out"))},8e3)},2e3)}i&&i.addEventListener("click",function(){localStorage.setItem(t,"true"),e.classList.remove("show"),e.classList.add("fade-out"),setTimeout(function(){e.style.display="none"},300)}),document.addEventListener("keydown",function(i){if(i.target.tagName==="INPUT"||i.target.tagName==="TEXTAREA")return;i.which===37&&n?(n.classList.add("show"),setTimeout(function(){n.classList.remove("show")},300)):i.which===39&&s&&(s.classList.add("show"),setTimeout(function(){s.classList.remove("show")},300)),(i.which===37||i.which===39)&&e&&!o()&&(localStorage.setItem(t,"true"),e.classList.remove("show"))}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})()</script><script>(function(){document.querySelectorAll('pre code[class*="language-"], pre code[class*="hljs"]').forEach(function(e){let t=null;const n=e.className.split(" ");for(const e of n){if(e.startsWith("language-")){t=e.replace("language-","");break}const s=["yaml","yml","bash","shell","sh","javascript","js","typescript","ts","python","py","go","golang","json","html","css","dockerfile","docker","ruby","rb","java","sql","xml","markdown","md","rust","rs","terraform","tf","hcl","ansible","helm","c","cpp","csharp","php","perl","lua","r","scala","kotlin","swift","groovy","powershell","ini","toml","nginx","apache","diff","plaintext","text","console","log"];if(s.includes(e.toLowerCase())){t=e;break}}if(t&&t.toLowerCase()!=="mermaid"){const n=e.parentElement;if(n&&n.tagName==="PRE"&&!n.parentElement.classList.contains("code-block-wrapper")){const e=document.createElement("div");e.className="code-block-wrapper",e.style.cssText="position: relative; margin-top: 1.5em;";const s=document.createElement("span");s.className="code-language-badge",s.textContent=t.toUpperCase(),n.parentNode.insertBefore(e,n),e.appendChild(s),e.appendChild(n),n.style.borderTopRightRadius="0"}}})})()</script></body></html>