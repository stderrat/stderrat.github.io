<!doctype html><html lang=en class="js csstransforms3d"><head><meta name=google-site-verification content="yq2Ib3doJVHVlEW2wtHap5WY54JhS2CCvI40y30F0FI"><meta name=color-scheme content="dark light"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.141.0"><meta name=description content="How to leverage different Thanos Querier services."><meta name=author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=keywords content="Grafana,Thanos,OpenShift,OCP"><meta name=title content="Thanos Querier vs Thanos Querier"><meta name=robots content="index, follow"><meta charset=utf-8><meta name=language content="English"><link rel=canonical href=https://blog.stderr.at/openshift/2020/12/thanos-querier-vs-thanos-querier/><meta property="og:title" content="Thanos Querier vs Thanos Querier"><meta property="og:description" content="How to leverage different Thanos Querier services."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.stderr.at/openshift/2020/12/thanos-querier-vs-thanos-querier/"><meta property="og:site_name" content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta property="article:published_time" content="2020-12-10T00:00:00Z"><meta property="article:modified_time" content="2024-05-08T06:59:13+02:00"><meta property="article:section" content="OpenShift"><meta property="article:tag" content="Grafana"><meta property="article:tag" content="Thanos"><meta property="article:tag" content="OpenShift"><meta property="article:tag" content="OCP"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Thanos Querier vs Thanos Querier"><meta name=twitter:description content="How to leverage different Thanos Querier services."><meta name=article:author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=article:tag content="technical blog, OpenShift"><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","headline":"Thanos Querier vs Thanos Querier","description":"How to leverage different Thanos Querier services.","url":"https:\/\/blog.stderr.at\/openshift\/2020\/12\/thanos-querier-vs-thanos-querier\/","datePublished":"2020-12-10T00:00:00Z","dateModified":"2024-05-08T06:59:13\u002b02:00","author":{"@type":"Person","name":"Toni Schmidbauer \u0026 Thomas Jungbauer"},"about":["OpenShift"],"publisher":{"@type":"Organization","name":"TechBlog about OpenShift\/Ansible\/Satellite and much more","url":"https:\/\/blog.stderr.at\/"}}</script><link rel=icon href=/images/favicon.ico type=image/png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-180x180.png><link rel=apple-touch-icon sizes=128x128 href=/images/apple-touch-icon-128x128.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-touch-icon-72x72.png><link rel=apple-touch-icon href=/images/apple-touch-icon-57x57.png><link rel="shortcut icon" href=/images/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><title>Thanos Querier vs Thanos Querier :: TechBlog about OpenShift/Ansible/Satellite and much more</title>
<link rel=manifest href=/manifest.json><meta name=theme-color content="#317EFB"><link href=/css/fontawesome-all.min.css?1765004184 rel=stylesheet><link href=/css/featherlight.min.css?1765004184 rel=stylesheet><link href=/css/theme-yaub-modular.css?1765004184 rel=stylesheet><script src=/js/jquery-3.7.1.min.js?1765004184></script><script src=/js/jquery.waypoints.min.js?1765004184></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/openshift/2020/12/thanos-querier-vs-thanos-querier/><button onclick=scrollTopAnimated() id=myBtn class="top-btn button fa fa-arrow-up" title="Go to top"></button>
<span class=read-progress></span><nav id=sidebar><div id=header-wrapper><button id=sidebar-toggle class=sidebar-toggle-btn title="Toggle Sidebar"><svg class="sidebar-toggle-icon" viewBox="0 0 32 32"><path d="M22 31a.997.997.0 01-.707-.293L7.647 17.061a1.501 1.501.0 010-2.122L21.293 1.293a1 1 0 111.414 1.414L9.414 16l13.293 13.293A1 1 0 0122 31z"/></svg></button><div id=header><a class="padding-topnav logo-link" href=/><svg class="logo" width="200" height="100" viewBox="0 0 200 136.34417133812047"><defs id="SvgjsDefs3490"/><g id="SvgjsG3491" featurekey="symbolFeature-0" transform="matrix(0.8888888888888888,0,0,0.8888888888888888,55.55511135525174,-24.034717135959202)" fill="#d2d2d2"><g xmlns="http://www.w3.org/2000/svg"><g><g><g><path fill="#d2d2d2" d="M75.195 72.96c-.619.0-1.241-.21-1.75-.64-1.146-.967-1.291-2.681-.324-3.827L88.73 50 73.122 31.507c-.967-1.146-.822-2.859.324-3.827 1.146-.968 2.859-.823 3.827.323L94.36 48.248c.854 1.012.854 2.492.0 3.503L77.272 71.995C76.735 72.632 75.968 72.96 75.195 72.96z"/></g></g></g><g><g><g><path fill="#d2d2d2" d="M24.805 72.96c-.772.0-1.539-.328-2.076-.964L5.641 51.752c-.854-1.012-.854-2.492.0-3.503l17.088-20.245c.967-1.146 2.681-1.291 3.827-.324 1.146.967 1.291 2.681.324 3.827L11.269 50.001l15.609 18.492c.967 1.146.823 2.859-.323 3.827C26.045 72.749 25.423 72.96 24.805 72.96z"/></g></g></g><g><path fill="#d2d2d2" d="M37.325 72.96c-.492.0-.99-.134-1.438-.414-1.271-.796-1.657-2.471-.861-3.742L60.37 28.315c.796-1.271 2.472-1.656 3.743-.861 1.271.796 1.657 2.471.861 3.742L39.63 71.685C39.115 72.508 38.23 72.96 37.325 72.96z"/></g></g></g><g id="SvgjsG3492" featurekey="nameFeature-0" transform="matrix(1.6473784183020483,0,0,1.6473784183020483,0.5930603781937029,42.15399158589206)" fill="#d2d2d2"><path d="m6.72 11.44 6.68 11.28 6.64-11.28h7l-10.6 17.6V40h-6.28V28.88l-10.52-17.44h7.08zm38.535.0L55.935 40h-6.52l-2.16-6.36h-10.68L34.335 40h-6.36l10.84-28.56h6.44zM41.935 18.48l-3.72 10.48h7.4l-3.6-10.48h-.08zm27.175-7.04-39062e-9 17.88c0 2.1067.47332 3.6467 1.42 4.62s2.4334 1.46 4.46 1.46c2.1867.0 3.72-.48668 4.6-1.46s1.32-2.5133 1.32-4.62V11.44h6.28v17.88c0 3.5733-1.02 6.36-3.06 8.36s-5.0868 3-9.14 3c-4.1332.0-7.1932-1-9.18-3s-2.98-4.7868-2.98-8.36V11.44h6.28zm41.495.0c6.0532.0 9.08 2.3466 9.08 7.04.0 2.6933-1.2933 4.6932-3.88 6 1.76.50668 3.0733 1.3934 3.94 2.66s1.3 2.7934 1.3 4.58c0 2.56-.92668 4.58-2.78 6.06s-4.2868 2.22-7.3 2.22h-13.84V11.44h13.48zM109.80499999999999 23c2.5333.0 3.8-1.1333 3.8-3.4.0-2.1867-1.4133-3.28-4.24-3.28h-5.96V23h6.4zm.359999999999999 12.12c3.0667.0 4.6-1.2533 4.6-3.76.0-2.72-1.4933-4.08-4.48-4.08h-6.88v7.84h6.76z"/></g></svg><div class=inline-flex><span class="animate-typewriter overflow-hidden whitespace-nowrap">Yet another useless blog<span class="ml-2 -translate-y-2 animate-blink">_</span></span></div></a></div><div class=searchbox><form action=/search/ method=GET id=sidebar-search-form><label for=sidebar-search><i class="fas fa-search"></i></label>
<input type=search id=sidebar-search name=q placeholder=Search... autocomplete=off>
<span id=sidebar-search-clear style=display:none><i class="fas fa-times"></i></span></form></div><script>(function(){const e=document.getElementById("sidebar-search"),t=document.getElementById("sidebar-search-clear");e.addEventListener("input",function(){t.style.display=this.value?"block":"none"}),t.addEventListener("click",function(n){n.preventDefault(),e.value="",t.style.display="none",e.focus()})})()</script></div><div class=highlightable><ul class=topics><li data-nav-id=/whatss-new/ title="What's New" class=dd-item><a href=/whatss-new/ class=has-children><span class=menu-title>What's New</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/whatss-new/2025-11-10-whatsnew-420/ title="What's new in OpenShift, 4.20 Edition" class=dd-item><a href=/whatss-new/2025-11-10-whatsnew-420/>What's new in OpenShift, 4.20 Edition</a></li></ul></li><li data-nav-id=/compliance/ title=Compliance class=dd-item><a href=/compliance/ class=has-children><span class=menu-title>Compliance</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/compliance/2021/07/oc-compliance-command-line-plugin/ title="oc compliance command line plugin" class=dd-item><a href=/compliance/2021/07/oc-compliance-command-line-plugin/>oc compliance command line plugin</a></li><li data-nav-id=/compliance/2021/07/compliance-operator/ title="Compliance Operator" class=dd-item><a href=/compliance/2021/07/compliance-operator/>Compliance Operator</a></li></ul></li><li data-nav-id=/gitopscollection/ title="GitOps Episodes" class=dd-item><a href=/gitopscollection/ class=has-children><span class=menu-title>GitOps Episodes</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/gitopscollection/2023-12-11-gitops-intro/ title="Introducing the GitOps Approach" class=dd-item><a href=/gitopscollection/2023-12-11-gitops-intro/>Introducing the GitOps Approach</a></li><li data-nav-id=/gitopscollection/2023-12-28-gitops-repostructure/ title="GitOps - Choosing the right Git repository structure" class=dd-item><a href=/gitopscollection/2023-12-28-gitops-repostructure/>GitOps - Choosing the right Git repository structure</a></li><li data-nav-id=/gitopscollection/2024-02-02-setup-argocd/ title="Setup OpenShift GitOps/Argo CD" class=dd-item><a href=/gitopscollection/2024-02-02-setup-argocd/>Setup OpenShift GitOps/Argo CD</a></li><li data-nav-id=/gitopscollection/2024-04-02-configure_app_of_apps/ title="Configure App-of-Apps" class=dd-item><a href=/gitopscollection/2024-04-02-configure_app_of_apps/>Configure App-of-Apps</a></li><li data-nav-id=/gitopscollection/2024-04-25-installing-compliance-operator/ title="Setup & Configure Compliance Operator using GitOps" class=dd-item><a href=/gitopscollection/2024-04-25-installing-compliance-operator/>Setup & Configure Compliance Operator using GitOps</a></li><li data-nav-id=/gitopscollection/2024-04-28-installing-advanced-cluster-security/ title="Setup & Configure Advanced Cluster Security using GitOps" class=dd-item><a href=/gitopscollection/2024-04-28-installing-advanced-cluster-security/>Setup & Configure Advanced Cluster Security using GitOps</a></li><li data-nav-id=/gitopscollection/2024-05-17-configure-minio-buckets/ title="Configure Buckets in MinIO using GitOps" class=dd-item><a href=/gitopscollection/2024-05-17-configure-minio-buckets/>Configure Buckets in MinIO using GitOps</a></li><li data-nav-id=/gitopscollection/2024-05-24-install-openshift-logging/ title="Installing OpenShift Logging using GitOps" class=dd-item><a href=/gitopscollection/2024-05-24-install-openshift-logging/>Installing OpenShift Logging using GitOps</a></li><li data-nav-id=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ title="Multiple Sources for Applications in Argo CD" class=dd-item><a href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/>Multiple Sources for Applications in Argo CD</a></li><li data-nav-id=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/ title="Update Cluster Version using GitOps approach" class=dd-item><a href=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/>Update Cluster Version using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-07-04-managing-certificates-with-gitops/ title="Managing Certificates using GitOps approach" class=dd-item><a href=/gitopscollection/2024-07-04-managing-certificates-with-gitops/>Managing Certificates using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-10-13-using-post-renderer/ title="Using Kustomize to post render a Helm Chart" class=dd-item><a href=/gitopscollection/2024-10-13-using-post-renderer/>Using Kustomize to post render a Helm Chart</a></li><li data-nav-id=/gitopscollection/2025-04-17-applicationset-defining-namespaces/ title="Using ApplicationSet with Matrix Generator and define individual Namespaces" class=dd-item><a href=/gitopscollection/2025-04-17-applicationset-defining-namespaces/>Using ApplicationSet with Matrix Generator and define individual Namespaces</a></li><li data-nav-id=/gitopscollection/2025-07-17-common-template-application/ title="Reusable Argo CD Application Helm Template" class=dd-item><a href=/gitopscollection/2025-07-17-common-template-application/>Reusable Argo CD Application Helm Template</a></li></ul></li><li data-nav-id=/openshift/ title=OpenShift class="dd-item
parent"><a href=/openshift/ class=has-children><span class=menu-title>OpenShift</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/openshift/2025/08/a-second-look-into-the-kubernetes-gateway-api-on-openshift/ title="A second look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift/2025/08/a-second-look-into-the-kubernetes-gateway-api-on-openshift/>A second look into the Kubernetes Gateway API on OpenShift</a></li><li data-nav-id=/openshift/2025/08/a-first-look-into-the-kubernetes-gateway-api-on-openshift/ title="A first look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift/2025/08/a-first-look-into-the-kubernetes-gateway-api-on-openshift/>A first look into the Kubernetes Gateway API on OpenShift</a></li><li data-nav-id=/openshift/2025/06/cert-manager-policy-approver-in-openshift/ title="Cert-Manager Policy Approver in OpenShift" class=dd-item><a href=/openshift/2025/06/cert-manager-policy-approver-in-openshift/>Cert-Manager Policy Approver in OpenShift</a></li><li data-nav-id=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/ title="Single log out from Keycloak and OpenShift" class=dd-item><a href=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/>Single log out from Keycloak and OpenShift</a></li><li data-nav-id=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/ title="Step by Step - Using Keycloak Authentication in OpenShift" class=dd-item><a href=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/>Step by Step - Using Keycloak Authentication in OpenShift</a></li><li data-nav-id=/openshift/2024/11/introducing-adminnetworkpolicies/ title="Introducing AdminNetworkPolicies" class=dd-item><a href=/openshift/2024/11/introducing-adminnetworkpolicies/>Introducing AdminNetworkPolicies</a></li><li data-nav-id=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/ title="OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)" class=dd-item><a href=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/>OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)</a></li><li data-nav-id=/openshift/2023/11/running-falco-on-openshift-4.12/ title="Running Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023/11/running-falco-on-openshift-4.12/>Running Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/ title="Quay Deployment and Configuration using GitOps" class=dd-item><a href=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/>Quay Deployment and Configuration using GitOps</a></li><li data-nav-id=/openshift/2023/10/setting-up-falco-on-openshift-4.12/ title="Setting up Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023/10/setting-up-falco-on-openshift-4.12/>Setting up Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/10/how-to-force-a-machineconfig-rollout/ title="How to force a MachineConfig rollout" class=dd-item><a href=/openshift/2023/10/how-to-force-a-machineconfig-rollout/>How to force a MachineConfig rollout</a></li><li data-nav-id=/openshift/2023/03/operator-installation-with-argo-cd/ title="Operator installation with Argo CD" class=dd-item><a href=/openshift/2023/03/operator-installation-with-argo-cd/>Operator installation with Argo CD</a></li><li data-nav-id=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/ title="SSL Certificate Management for OpenShift on AWS" class=dd-item><a href=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/>SSL Certificate Management for OpenShift on AWS</a></li><li data-nav-id=/openshift/2022/11/using-serversideapply-with-argocd/ title="Using ServerSideApply with ArgoCD" class=dd-item><a href=/openshift/2022/11/using-serversideapply-with-argocd/>Using ServerSideApply with ArgoCD</a></li><li data-nav-id=/openshift/2022/08/secrets-management-vault-on-openshift/ title="Secrets Management - Vault on OpenShift" class=dd-item><a href=/openshift/2022/08/secrets-management-vault-on-openshift/>Secrets Management - Vault on OpenShift</a></li><li data-nav-id=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/ title="Overview of Red Hat's Multi Cloud Gateway (Noobaa)" class=dd-item><a href=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/>Overview of Red Hat's Multi Cloud Gateway (Noobaa)</a></li><li data-nav-id=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/ title="Secure your secrets with Sealed Secrets" class=dd-item><a href=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/>Secure your secrets with Sealed Secrets</a></li><li data-nav-id=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/ title="Understanding RWO block device handling in OpenShift" class=dd-item><a href=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/>Understanding RWO block device handling in OpenShift</a></li><li data-nav-id=/openshift/2021/01/writing-operator-using-ansible/ title="Writing Operator using Ansible" class=dd-item><a href=/openshift/2021/01/writing-operator-using-ansible/>Writing Operator using Ansible</a></li><li data-nav-id=/openshift/2020/12/thanos-querier-vs-thanos-querier/ title="Thanos Querier vs Thanos Querier" class="dd-item active"><a href=/openshift/2020/12/thanos-querier-vs-thanos-querier/>Thanos Querier vs Thanos Querier</a></li><li data-nav-id=/openshift/2020/08/gitops-argo-cd/ title="GitOps - Argo CD" class=dd-item><a href=/openshift/2020/08/gitops-argo-cd/>GitOps - Argo CD</a></li><li data-nav-id=/openshift/2020/04/openshift-pipelines-tekton-introduction/ title="OpenShift Pipelines - Tekton Introduction" class=dd-item><a href=/openshift/2020/04/openshift-pipelines-tekton-introduction/>OpenShift Pipelines - Tekton Introduction</a></li><li data-nav-id=/openshift/2020/04/helpful-oc-/-kubectl-commands/ title="Helpful oc / kubectl commands" class=dd-item><a href=/openshift/2020/04/helpful-oc-/-kubectl-commands/>Helpful oc / kubectl commands</a></li></ul></li><li data-nav-id=/day-2/ title="OpenShift Day-2" class=dd-item><a href=/day-2/ class=has-children><span class=menu-title>OpenShift Day-2</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/day-2/etcd/ title=etcd class=dd-item><a href=/day-2/etcd/ class=has-children><span class=menu-title>etcd</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/day-2/etcd/2022-01-29-automatedetcdbackup/ title="Automated ETCD Backup" class=dd-item><a href=/day-2/etcd/2022-01-29-automatedetcdbackup/>Automated ETCD Backup</a></li></ul></li><li data-nav-id=/day-2/labels_environmets/ title="Labels & Environments" class=dd-item><a href=/day-2/labels_environmets/ class=has-children><span class=menu-title>Labels & Environments</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/day-2/labels_environmets/2022-01-12-creatingenvironment/ title="Working with Environments" class=dd-item><a href=/day-2/labels_environmets/2022-01-12-creatingenvironment/>Working with Environments</a></li></ul></li><li data-nav-id=/day-2/observability/ title=Observability class=dd-item><a href=/day-2/observability/ class=has-children><span class=menu-title>Observability</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/ title="The Hitchhiker's Guide to Observability Introduction - Part 1" class=dd-item><a href=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/>The Hitchhiker's Guide to Observability Introduction - Part 1</a></li><li data-nav-id=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/ title="The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2" class=dd-item><a href=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/>The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2</a></li><li data-nav-id=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/ title="The Hitchhiker's Guide to Observability - Central Collector - Part 3" class=dd-item><a href=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/>The Hitchhiker's Guide to Observability - Central Collector - Part 3</a></li><li data-nav-id=/day-2/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/ title="The Hitchhiker's Guide to Observability - Example Applications - Part 4" class=dd-item><a href=/day-2/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/>The Hitchhiker's Guide to Observability - Example Applications - Part 4</a></li><li data-nav-id=/day-2/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/ title="The Hitchhiker's Guide to Observability - Understanding Traces - Part 5" class=dd-item><a href=/day-2/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/>The Hitchhiker's Guide to Observability - Understanding Traces - Part 5</a></li><li data-nav-id=/day-2/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/ title="The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6" class=dd-item><a href=/day-2/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/>The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6</a></li><li data-nav-id=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/ title="The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7" class=dd-item><a href=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/>The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7</a></li><li data-nav-id=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/ title="The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8" class=dd-item><a href=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/>The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8</a></li></ul></li><li data-nav-id=/day-2/pod-placement/ title="Pod Placement" class=dd-item><a href=/day-2/pod-placement/ class=has-children><span class=menu-title>Pod Placement</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/day-2/pod-placement/2021-08-26-podplacement-intro/ title=Introduction class=dd-item><a href=/day-2/pod-placement/2021-08-26-podplacement-intro/>Introduction</a></li><li data-nav-id=/day-2/pod-placement/2021-08-27-podplacement/ title=NodeSelector class=dd-item><a href=/day-2/pod-placement/2021-08-27-podplacement/>NodeSelector</a></li><li data-nav-id=/day-2/pod-placement/2021-08-28-affinity/ title="Pod Affinity/Anti-Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-28-affinity/>Pod Affinity/Anti-Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-29-node-affinity/ title="Node Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-29-node-affinity/>Node Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-30-taints/ title="Taints and Tolerations" class=dd-item><a href=/day-2/pod-placement/2021-08-30-taints/>Taints and Tolerations</a></li><li data-nav-id=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints" class=dd-item><a href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/>Topology Spread Constraints</a></li><li data-nav-id=/day-2/pod-placement/2021-09-01-descheduler/ title="Using Descheduler" class=dd-item><a href=/day-2/pod-placement/2021-09-01-descheduler/>Using Descheduler</a></li></ul></li></ul></li><li data-nav-id=/securesupplychain/ title="Secure Supply Chain" class=dd-item><a href=/securesupplychain/ class=has-children><span class=menu-title>Secure Supply Chain</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/securesupplychain/2023-06-15-securesupplychain-intro/ title="Introduction to a Secure Supply Chain" class=dd-item><a href=/securesupplychain/2023-06-15-securesupplychain-intro/>Introduction to a Secure Supply Chain</a></li><li data-nav-id=/securesupplychain/2023-06-16-securesupplychain-step1/ title="Step 1 - Listen to Events" class=dd-item><a href=/securesupplychain/2023-06-16-securesupplychain-step1/>Step 1 - Listen to Events</a></li><li data-nav-id=/securesupplychain/2023-06-17-securesupplychain-step2/ title="Step 2 - Pipelines" class=dd-item><a href=/securesupplychain/2023-06-17-securesupplychain-step2/>Step 2 - Pipelines</a></li><li data-nav-id=/securesupplychain/2023-06-18-securesupplychain-step3/ title="Step 3 - SonarQube" class=dd-item><a href=/securesupplychain/2023-06-18-securesupplychain-step3/>Step 3 - SonarQube</a></li><li data-nav-id=/securesupplychain/2023-06-19-securesupplychain-step4/ title="Step 4 - Verify Git Commit" class=dd-item><a href=/securesupplychain/2023-06-19-securesupplychain-step4/>Step 4 - Verify Git Commit</a></li><li data-nav-id=/securesupplychain/2023-06-20-securesupplychain-step5/ title="Step 5 - Build and Sign Image" class=dd-item><a href=/securesupplychain/2023-06-20-securesupplychain-step5/>Step 5 - Build and Sign Image</a></li><li data-nav-id=/securesupplychain/2023-06-21-securesupplychain-step6/ title="Step 6 - Scanning with ACS" class=dd-item><a href=/securesupplychain/2023-06-21-securesupplychain-step6/>Step 6 - Scanning with ACS</a></li><li data-nav-id=/securesupplychain/2023-06-22-securesupplychain-step7/ title="Step 7 - Generating a SBOM" class=dd-item><a href=/securesupplychain/2023-06-22-securesupplychain-step7/>Step 7 - Generating a SBOM</a></li><li data-nav-id=/securesupplychain/2023-06-23-securesupplychain-step8/ title="Step 8 - Updating Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-23-securesupplychain-step8/>Step 8 - Updating Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-24-securesupplychain-step9/ title="Step 9 - Linting Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-24-securesupplychain-step9/>Step 9 - Linting Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-25-securesupplychain-step10/ title="Step 10 - The Example Application" class=dd-item><a href=/securesupplychain/2023-06-25-securesupplychain-step10/>Step 10 - The Example Application</a></li><li data-nav-id=/securesupplychain/2023-06-26-securesupplychain-step11/ title="Step 11 - ACS Deployment Check" class=dd-item><a href=/securesupplychain/2023-06-26-securesupplychain-step11/>Step 11 - ACS Deployment Check</a></li><li data-nav-id=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature" class=dd-item><a href=/securesupplychain/2023-06-27-securesupplychain-step12/>Step 12 - Verify TLog Signature</a></li><li data-nav-id=/securesupplychain/2023-06-28-securesupplychain-step13/ title="Step 13 - Bring it to Production" class=dd-item><a href=/securesupplychain/2023-06-28-securesupplychain-step13/>Step 13 - Bring it to Production</a></li></ul></li><li data-nav-id=/general/ title=General class=dd-item><a href=/general/ class=has-children><span class=menu-title>General</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/general/2020/05/basic-usage-of-git/ title="Basic usage of git" class=dd-item><a href=/general/2020/05/basic-usage-of-git/>Basic usage of git</a></li><li data-nav-id=/general/2020/04/red-hat-satellite-cheat-sheet/ title="Red Hat Satellite Cheat Sheet" class=dd-item><a href=/general/2020/04/red-hat-satellite-cheat-sheet/>Red Hat Satellite Cheat Sheet</a></li></ul></li><li data-nav-id=/ansible/ title=Ansible class=dd-item><a href=/ansible/ class=has-children><span class=menu-title>Ansible</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/ansible/2021/11/ansible-style-guide/ title="Ansible Style Guide" class=dd-item><a href=/ansible/2021/11/ansible-style-guide/>Ansible Style Guide</a></li><li data-nav-id=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" class=dd-item><a href=/ansible/2021/10/automation-controller-and-ldap-authentication/>Automation Controller and LDAP Authentication</a></li><li data-nav-id=/ansible/2021/07/ansible-tower-and-downloading-collections/ title="Ansible Tower and downloading collections" class=dd-item><a href=/ansible/2021/07/ansible-tower-and-downloading-collections/>Ansible Tower and downloading collections</a></li><li data-nav-id=/ansible/2020/04/ansible-azure-resource-manager-example/ title="Ansible - Azure Resource Manager Example" class=dd-item><a href=/ansible/2020/04/ansible-azure-resource-manager-example/>Ansible - Azure Resource Manager Example</a></li><li data-nav-id=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ title="DO410 Ansible and Ansible Tower training notes" class=dd-item><a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/>DO410 Ansible and Ansible Tower training notes</a></li></ul></li><li data-nav-id=/service-mesh/ title="Service Mesh" class=dd-item><a href=/service-mesh/ class=has-children><span class=menu-title>Service Mesh</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/service-mesh/2020/05/enable-automatic-route-creation/ title="Enable Automatic Route Creation" class=dd-item><a href=/service-mesh/2020/05/enable-automatic-route-creation/>Enable Automatic Route Creation</a></li><li data-nav-id=/service-mesh/2020/05/authorization-rbac/ title="Authorization (RBAC)" class=dd-item><a href=/service-mesh/2020/05/authorization-rbac/>Authorization (RBAC)</a></li><li data-nav-id=/service-mesh/2020/04/deploy-example-bookinfo-application/ title="Deploy Example Bookinfo Application" class=dd-item><a href=/service-mesh/2020/04/deploy-example-bookinfo-application/>Deploy Example Bookinfo Application</a></li><li data-nav-id=/service-mesh/2020/04/service-mesh-1.1-released/ title="Service Mesh 1.1 released" class=dd-item><a href=/service-mesh/2020/04/service-mesh-1.1-released/>Service Mesh 1.1 released</a></li><li data-nav-id=/service-mesh/2020/04/authentication-jwt/ title="Authentication JWT" class=dd-item><a href=/service-mesh/2020/04/authentication-jwt/>Authentication JWT</a></li><li data-nav-id=/service-mesh/2020/04/mutual-tls-authentication/ title="Mutual TLS Authentication" class=dd-item><a href=/service-mesh/2020/04/mutual-tls-authentication/>Mutual TLS Authentication</a></li><li data-nav-id=/service-mesh/2020/04/fault-injection/ title="Fault Injection" class=dd-item><a href=/service-mesh/2020/04/fault-injection/>Fault Injection</a></li><li data-nav-id=/service-mesh/2020/04/limit-egress/external-traffic/ title="Limit Egress/External Traffic" class=dd-item><a href=/service-mesh/2020/04/limit-egress/external-traffic/>Limit Egress/External Traffic</a></li><li data-nav-id=/service-mesh/2020/04/advanced-routing-example/ title="Advanced Routing Example" class=dd-item><a href=/service-mesh/2020/04/advanced-routing-example/>Advanced Routing Example</a></li><li data-nav-id=/service-mesh/2020/04/routing-example/ title="Routing Example" class=dd-item><a href=/service-mesh/2020/04/routing-example/>Routing Example</a></li><li data-nav-id=/service-mesh/2020/03/ingress-with-custom-domain/ title="Ingress with custom domain" class=dd-item><a href=/service-mesh/2020/03/ingress-with-custom-domain/>Ingress with custom domain</a></li><li data-nav-id=/service-mesh/2020/03/ingress-traffic/ title="Ingress Traffic" class=dd-item><a href=/service-mesh/2020/03/ingress-traffic/>Ingress Traffic</a></li><li data-nav-id=/service-mesh/2020/03/deploy-microservices/ title="Deploy Microservices" class=dd-item><a href=/service-mesh/2020/03/deploy-microservices/>Deploy Microservices</a></li><li data-nav-id=/service-mesh/2020/03/installation/ title=Installation class=dd-item><a href=/service-mesh/2020/03/installation/>Installation</a></li></ul></li><li data-nav-id=/acs/ title="Advanced Cluster Security" class=dd-item><a href=/acs/ class=has-children><span class=menu-title>Advanced Cluster Security</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/acs/2021-12-11-acsauth/ title="Advanced Cluster Security - Authentication" class=dd-item><a href=/acs/2021-12-11-acsauth/>Advanced Cluster Security - Authentication</a></li></ul></li><li data-nav-id=/azure/ title=Azure class=dd-item><a href=/azure/ class=has-children><span class=menu-title>Azure</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/azure/2021-10-29-private-aro/ title="Stumbling into Azure Part II: Setting up a private ARO cluster" class=dd-item><a href=/azure/2021-10-29-private-aro/>Stumbling into Azure Part II: Setting up a private ARO cluster</a></li><li data-nav-id=/azure/2021-10-17-s2s-vpn/ title="Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing" class=dd-item><a href=/azure/2021-10-17-s2s-vpn/>Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing</a></li></ul></li><li data-nav-id=/java/ title=Java class=dd-item><a href=/java/ class=has-children><span class=menu-title>Java</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/java/2022-02-25-jpa-disconnected-entity/ title="Adventures in Java Land: JPA disconnected entities" class=dd-item><a href=/java/2022-02-25-jpa-disconnected-entity/>Adventures in Java Land: JPA disconnected entities</a></li></ul></li><li data-nav-id=/quay/ title=Quay class=dd-item><a href=/quay/ class=has-children><span class=menu-title>Quay</span>
<i class="fas fa-chevron-down menu-chevron"></i></a><ul><li data-nav-id=/quay/2025-09-19-quay-integrate-keycloak/ title="Red Hat Quay Registry - Integrate Keycloak" class=dd-item><a href=/quay/2025-09-19-quay-integrate-keycloak/>Red Hat Quay Registry - Integrate Keycloak</a></li><li data-nav-id=/quay/2021-09-07-quay-upgrade-3.4/ title="Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator" class=dd-item><a href=/quay/2021-09-07-quay-upgrade-3.4/>Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator</a></li><li data-nav-id=/quay/2020-05-13-quay-tutorial1/ title="Red Hat Quay Registry - Overview and Installation" class=dd-item><a href=/quay/2020-05-13-quay-tutorial1/>Red Hat Quay Registry - Overview and Installation</a></li></ul></li><li data-nav-id=/legaldisclosure/ title="Legal Disclosure" class=dd-item><a href=/legaldisclosure/><span class=menu-title>Legal Disclosure</span></a></li><li data-nav-id=/rss/ title="RSS Feeds" class=dd-item><a href=/rss/><span class=menu-title>RSS Feeds</span></a></li></ul><section id=footer></section></div></nav><section id=body class=post-content><div id=overlay></div><aside id=toc-field class="hidden lg:block tableOfContentContainer"><header id=TableOfContentsHeader>What's on this Page</header><nav id=TableOfContents><ul><li><a href=#_overview>Overview</a></li><li><a href=#_before_we_begin>Before we begin</a></li><li><a href=#_deploy_custom_grafana_operator>Deploy Custom Grafana Operator</a></li><li><a href=#_setup_grafana_operator>Setup Grafana Operator</a></li><li><a href=#_adding_a_data_source>Adding a Data Source</a></li><li><a href=#_lets_test>Let’s Test</a></li><li><a href=#_why_do_i_see_all_namespaces>Why do I see all namespaces?</a></li><li><a href=#_thanos_querier_vs_thanos_querier>Thanos Querier vs. Thanos Querier</a></li><li><a href=#_what_happened>What happened?</a></li><li><a href=#_summary>Summary</a></li></ul></nav><div id=navigation><a class=nav-prev href=/openshift/2021/01/writing-operator-using-ansible/ title="Writing Operator using Ansible"><i class="fa fa-chevron-left"></i></a>
<a class=nav-next href=/openshift/2020/08/gitops-argo-cd/ title="GitOps - Argo CD" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></aside><div class="padding highlightable"><header><div id=top-nav class=margin-bottom-15><section id=homelinks class=text-align-center><ul class="list-no-style margin-0 padding-0 overflow-hidden text-align-left vertical-align-middle"><li class="list-horizontal padding-left-15 padding-right-15"><a class=padding-topnav href=/><i class='fas fa-home'></i> Home</a></li><li class="dropdown list-horizontal left padding-left-15 padding-right-15"><div class="submenu left static inline-block"><a class=padding-topnav href=https://blog.stderr.at/authors><svg stroke="currentcolor" fill="#d2d2d2" stroke-width="0" viewBox="0 0 17 17" class="relative z-20 h-6 w-6" height="1em" width="1em"><g/><path d="M16.499 1.843 15.096.44c-.566-.566-1.555-.566-2.122.0L5.438 7.976l-1.722 5.287 5.249-1.765 7.534-7.534c.283-.283.439-.66.439-1.061s-.156-.777-.439-1.06zM5.584 10.758l.638-1.957 1.92 1.919-1.942.653-.616-.615zM6.832 7.996l3.986-3.986 2.11 2.11-3.986 3.986-2.11-2.11zm4.693-4.693.729-.729 2.11 2.11-.729.729-2.11-2.11zM15.792 3.257l-.72.721-2.11-2.11.72-.721c.19-.189.519-.189.707.0l1.403 1.403c.094.095.146.22.146.354s-.052.258-.146.353zM15 7.5h1V17H0V2h7.5v1H1v13h14V7.5z"/></svg> About Us<i class='fa fa-chevron-down padding-left-25rem' '></i></a><div class="absolute submenu-div"><a href=/authors/thomas-jungbauer class="submenu-style submenu-link display-block"><i></i>Thomas Jungbauer</a>
<a href=/authors/toni-schmidbauer class="submenu-style submenu-link display-block"><i></i>Toni Schmidbauer</a>
<a href=/legaldisclosure class="submenu-style submenu-link display-block"><i></i>Legal Disclosure</a></div></div></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/categories><i class='far fa-bookmark padding-right-25rem'></i> Catagories</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/tags><i class='fas fa-tags padding-right-25rem'></i> Tags</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/archive><i class='fas fa-box padding-right-25rem'></i> History</a></li><li class="list-horizontal right padding-left-15 padding-right-15"><a class=padding-topnav href=https://charts.stderr.at/><svg class="list-horizontal padding-right-25rem" fill="#d2d2d2" width="28" height="28" viewBox="0 0 256 297" class="mr-3 h-7 w-7 fill-current text-omega-500"><path d="m60.349 70.537-.811-.767a77.726 77.726.0 01-.278-.266c-7.589-7.29-13.462-15.721-17.01-25.685-.951-2.673-1.68-5.397-1.621-8.262l.012-.375c.012-.285.011-.571.031-.856.268-3.877 2.863-5.836 6.652-4.918 1.195.31 2.351.753 3.447 1.321 4.007 2.01 7.297 4.948 10.317 8.185l.312.336a67.685 67.685.0 0113.066 20.108c.068.177.146.35.234.518a.308.308.0 00.061.074l.212.181.064.057a106.079 106.079.0 0148.733-14.954l-.043-.218-.112-.585a11.87 11.87.0 00-.073-.35l-.041-.17a67.666 67.666.0 01-1.596-22.23 50.571 50.571.0 012.674-13.09 18.838 18.838.0 013.294-6.118 9.436 9.436.0 011.902-1.697 4.226 4.226.0 014.832-.034 10.393 10.393.0 013.513 4.049 31.912 31.912.0 013.165 8.828 67.672 67.672.0 011.277 19.852 57.502 57.502.0 01-2.1 11.976c.714.132 1.428.258 2.14.382l3.2.552c2.481.43 4.946.88 7.38 1.458a112.29 112.29.0 0112.296 3.611c4.059 1.49 8.03 3.211 11.891 5.155 2.227 1.11 4.39 2.346 6.564 3.612l1.866 1.09c.936.548 1.877 1.096 2.829 1.637l.08-.163.178-.354c.06-.125.118-.254.167-.387a65.359 65.359.0 0119.79-28.128 22.711 22.711.0 017.11-4.14c.717-.25 1.46-.42 2.213-.508 3.768-.431 5.35 1.94 5.628 4.771a18.011 18.011.0 01-.465 6.228 52.875 52.875.0 01-6.147 14.357l-.308.493c-3.982 6.435-8.69 12.247-14.633 16.98l-.46.362a2.62 2.62.0 00-.12.1l-.192.177-.24.228-.098.09a106.935 106.935.0 0115.996 18.576 6.594 6.594.0 01-1.016.179c-6.373.01-12.746-.011-19.12.028a2.408 2.408.0 01-1.908-1.017 88.947 88.947.0 00-53.039-27.999 86.23 86.23.0 00-17.453-.75l-.76.047a88.064 88.064.0 00-49.207 18.785l-.44.349a84.25 84.25.0 00-10.21 9.529 2.844 2.844.0 01-2.324 1.057 1482.46 1482.46.0 00-10.958-.026l-8.6.005c.029-.111.077-.245.144-.398l.09-.193a7.07 7.07.0 01.107-.211l.123-.23.14-.245.157-.262.171-.277.186-.292.306-.464.337-.493.241-.343.384-.535.134-.183.419-.564.292-.386.302-.394.472-.604.491-.616.338-.418.346-.42.352-.425.36-.426.365-.428.558-.644.378-.43.382-.428.386-.426.39-.425c1.896-2.049 3.859-4.036 5.86-6.045l2.013-2.019c.675-.677 1.353-1.36 2.033-2.052zm155.187 136.407a106.248 106.248.0 01-14.42 16.339l1.12.933a65.151 65.151.0 0120.26 28.96 20.823 20.823.0 011.325 8.673 8.954 8.954.0 01-.363 1.95l-.087.271a4.335 4.335.0 01-4.907 3.021 13.373 13.373.0 01-4.067-1.206 30.816 30.816.0 01-5.523-3.498 64.717 64.717.0 01-19.627-27.589l-.262-.713-.357-.922a117.082 117.082.0 01-15.045 8.426 109.274 109.274.0 01-16.052 5.85 112.816 112.816.0 01-17.025 3.24l.078.41.07.373c.023.12.047.234.073.348l.042.168a65.667 65.667.0 011.787 21.92 48.604 48.604.0 01-2.66 13.52 47.067 47.067.0 01-2.505 5.26 8.054 8.054.0 01-1.407 1.788c-2.394 2.471-5.253 2.492-7.586-.045a16.409 16.409.0 01-2.35-3.379c-1.85-3.474-2.803-7.252-3.483-11.104a70.293 70.293.0 01-.818-15.918 56.83 56.83.0 011.568-10.873l.167-.667c.085-.32.162-.644.224-.969a.292.292.0 00-.015-.132l-.067-.23a3.701 3.701.0 01-.021-.082A105.937 105.937.0 0174.9 236.033l-.56 1.24-.102.231a66.452 66.452.0 01-18.164 24.56l-.423.355a22.954 22.954.0 01-7.247 4.186 7.272 7.272.0 01-3.919.42 4.282 4.282.0 01-3.19-2.55l-.06-.15c-.783-1.894-.718-3.859-.478-5.815l.067-.51a33.355 33.355.0 012.59-8.572 67.669 67.669.0 0115.947-22.714l.556-.52c.093-.086.184-.173.275-.262.086-.124.16-.256.22-.394A107.611 107.611.0 0143.287 206.7l.19-.017.65-.062c.193-.018.369-.03.545-.03 5.06-.005 10.12.009 15.179-.008l3.794-.018a2.83 2.83.0 012.228.978 88.388 88.388.0 0023.1 17.07l.6.304a84.178 84.178.0 0029.898 8.887c28.343 2.755 52.723-5.838 73.142-25.777a4.599 4.599.0 013.605-1.47c2.947.036 5.896.044 8.844.042l5.896-.01 2.949-.002h1.523l.106.356zm-26.342-90.316c.373.0.742.006 1.109.013l1.093.022c.724.013 1.439.015 2.148-.026l.531-.039c1.802-.163 3.091.481 4.405 1.692 6.323 5.826 12.7 11.592 19.071 17.364l3.966 3.595.45.4.675.595.799-.68c.171-.147.339-.293.503-.443a19230.8 19230.8.0 0023.608-21.525 3.277 3.277.0 012.362-.995l.167.005c1.21.049 2.422.045 3.66.036l1.498-.011c.252-.002.506-.003.761-.003v63.38a.948.948.0 01-.097.021l-.14.02-.18.02-.22.02-.255.017-.447.026-.897.037-1.06.032-1.188.025-1.817.025-1.639.01-1.653.002-1.082-.005-1.3-.013-.978-.015-.686-.015-.637-.017-.762-.028-.496-.024-.424-.027-.239-.02-.2-.02a4.685 4.685.0 01-.087-.012l-.141-.022v-32.098l-.323-.153-16.383 14.942-16.516-14.879-.316.116-.007 2.679v29.509h-16.497c-.016-.053-.031-.251-.046-.58l-.017-.455-.017-.575-.024-1.076-.023-1.314-.03-2.093-.033-3.101-.047-5.884-.032-5.84-.027-7.156-.017-8.245-.002-5.379.009-6.732.013-3.813.023-4.033.025-2.81.025-1.825.022-1.095.015-.588.017-.47.018-.345c.003-.046.006-.088.01-.124zm-152.24.073h16.398c.013.042.026.18.039.406l.018.404.018.53.016.652.025 1.19.036 2.508.027 2.424.028 3.479.037 6.391.017 4.372.018 8.267.003 5.583-.006 6.347-.01 4.294-.02 4.749-.022 3.515-.035 3.555-.02 1.461-.014.844-.016.732-.017.616-.017.494-.018.365c-.01.15-.02.25-.03.295H36.996a277.08 277.08.0 01-.048-6.9l.009-3.445-.001-1.722-.004-1.707-.002-3.422.003-6.924H16.63v23.904a1.2 1.2.0 01-.116.027l-.162.026-.205.024-.383.035-.303.021-.706.04-.61.025-.904.03-.737.02-1.043.02-1.66.022-1.716.01H6.66l-1.384-.009-1.551-.022-.939-.02-.84-.027-.553-.024-.329-.017-.293-.019-.367-.03a7.294 7.294.0 01-.103-.011l-.172-.023a1.687 1.687.0 01-.128-.024v-63.324h16.564v22.37a.972.972.0 00.096.02l.138.021.177.02.336.028.415.026.665.033.576.022.635.02 1.423.036 1.864.032 1.135.014 1.761.014 1.789.006 2.343-.005 1.395-.01 1.308-.017 1.193-.022 1.05-.028.88-.035.433-.023.357-.026.192-.02a.93.93.0 00.08-.009l.133-.02.012-4.084.003-1.375.002-2.853-.002-14.142zm36.054 63.45v-63.262c.03-.01.09-.02.18-.028l.22-.018.14-.01.525-.025.682-.025.826-.024 1.308-.029 1.52-.027 1.704-.025 4.374-.046 2.123-.016 5.002-.026 3.952-.01 4.384.002 3.563.012 2.737.019 1.99.022 1.67.028.567.013.732.021.58.024.296.017.22.018.08.01v13.482c-.528.038-1.073.11-1.619.111l-9.63.007-11.413-.002v10.487h20.058v13.95h-19.88a3.407 3.407.0 00-.078.448l-.03.255-.026.294-.037.505-.023.375-.03.615-.026.666-.027.951-.016.747-.01.764-.008 1.028.003 1.264.008.73.009.467.01.45.021.632.026.573.02.345.022.311.025.274.014.122c.508.035 1.052.102 1.597.103l9.63.007 11.415-.002v13.426h-39.38zm58.17.024a5.015 5.015.0 01-.035-.479l-.016-.437-.015-.562-.014-.68-.02-1.231-.018-1.466-.03-3.56-.02-3.516-.019-5.581-.01-7.949.006-10.192.022-8.11.03-6.587.03-4.327.03-3.08.026-2.056.014-.877.022-1.109.016-.594.016-.472.017-.343c.009-.138.017-.226.026-.26h16.338v46.775l.503.03.46.028.431.023c.14.005.279.009.417.009l9.701.005 11.45-.001v16.6h-39.358z"/></svg> Helm Charts</a></li></ul></section><div class=sub-top-nav><div id=breadcrumbs class="display-inline float-unset" itemscope itemtype=http://schema.org/BreadcrumbList><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"><p class=hide>&nbsp;navi</p></i></a></span><span id=toc-menu><i class="fas fa-list-alt"><span class=hidden-toc>navigation</span></i></span>
<span class=links><span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/><span itemprop=name>YAUB Yet Another Useless Blog</span><meta itemprop=position content='1'></a></span> > <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/openshift/><span itemprop=name>OpenShift</span><meta itemprop=position content='2'></a></span> > Thanos Querier vs Thanos Querier</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#_overview>Overview</a></li><li><a href=#_before_we_begin>Before we begin</a></li><li><a href=#_deploy_custom_grafana_operator>Deploy Custom Grafana Operator</a></li><li><a href=#_setup_grafana_operator>Setup Grafana Operator</a></li><li><a href=#_adding_a_data_source>Adding a Data Source</a></li><li><a href=#_lets_test>Let’s Test</a></li><li><a href=#_why_do_i_see_all_namespaces>Why do I see all namespaces?</a></li><li><a href=#_thanos_querier_vs_thanos_querier>Thanos Querier vs. Thanos Querier</a></li><li><a href=#_what_happened>What happened?</a></li><li><a href=#_summary>Summary</a></li></ul></nav></div></div><div class=social><a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2020%2f12%2fthanos-querier-vs-thanos-querier%2f" class="facebook no-highlight" aria-label="share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-facebook" width="24" height="24" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&amp;url=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2020%2f12%2fthanos-querier-vs-thanos-querier%2f&amp;text=Thanos%20Querier%20vs%20Thanos%20Querier" class="twitter no-highlight" aria-label="share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-x" width="100" height="100" viewBox="0 0 30 30"><path d="M26.37 26l-8.795-12.822.015.012L25.52 4h-2.65l-6.46 7.48L11.28 4H4.33l8.211 11.971L12.54 15.97 3.88 26h2.65l7.182-8.322L19.42 26h6.95zM10.23 6l12.34 18h-2.1L8.12 6h2.11z"/></svg></div></div></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2020%2f12%2fthanos-querier-vs-thanos-querier%2f&amp;source=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2020%2f12%2fthanos-querier-vs-thanos-querier%2f&amp;title=Thanos%20Querier%20vs%20Thanos%20Querier&amp;summary=Thanos%20Querier%20vs%20Thanos%20Querier" class="linkedin no-highlight" aria-label="share on Linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg></div></div></a><a href="whatsapp://send?text=Thanos%20Querier%20vs%20Thanos%20Querier%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aHow%20to%20leverage%20different%20Thanos%20Querier%20services.%0a%0ahttps%3a%2f%2fblog.stderr.at%2fopenshift%2f2020%2f12%2fthanos-querier-vs-thanos-querier%2f%0a" class="whatsapp no-highlight" aria-label="share on Whatsapp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a href="mailto:?subject=TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more - Thanos%20Querier%20vs%20Thanos%20Querier.&amp;body=Thanos%20Querier%20vs%20Thanos%20Querier%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aHow%20to%20leverage%20different%20Thanos%20Querier%20services.%0a%0ahttps%3a%2f%2fblog.stderr.at%2fopenshift%2f2020%2f12%2fthanos-querier-vs-thanos-querier%2f%0a" class="email no-highlight" aria-label="share on Email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg></div></div></a><a href=/rss/ class="rss no-highlight" aria-label=RSS><div class="resp-sharing-button resp-sharing-button--rss resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.731 455.731"><g><rect x="0" y="0" style="fill:transparent" width="455.731" height="455.731"/><g><path style="" d="M296.208 159.16C234.445 97.397 152.266 63.382 64.81 63.382v64.348c70.268.0 136.288 27.321 185.898 76.931 49.609 49.61 76.931 115.63 76.931 185.898h64.348C391.986 303.103 357.971 220.923 296.208 159.16z"/><path style="" d="M64.143 172.273v64.348c84.881.0 153.938 69.056 153.938 153.939h64.348c0-120.364-97.922-218.287-218.286-218.287z"/><circle style="" cx="109.833" cy="346.26" r="46.088"/></g></g></svg></div></div></a></div></div></div></header><div id=head-tags><div class=tags><a class=tag-link href=/tags/grafana>Grafana</a>
<a class=tag-link href=/tags/thanos>Thanos</a>
<a class=tag-link href=/tags/openshift>OpenShift</a>
<a class=tag-link href=/tags/ocp>OCP</a></div></div><div id=body-inner><h1 class="gradient-header article">Thanos Querier vs Thanos Querier</h1><div class="catagories tracked"><a id=textElement class="category-link no-highlight" href=/categories/openshift>OpenShift</a></div><p class=tracked><time class="f6 mv4 dib tracked" datetime=2020-12-10T00:00:00Z><strong>December 10, 2020</strong>
</time><span class=divider>-
</span><span class=author><a href=/authors/thomas-jungbauer><img class=avatar src=/img/authors/thomas-jungbauer.png alt="Thomas Jungbauer">
Thomas Jungbauer
</a>( Lastmod: 2024-05-08 )
</span><span class=divider>-
</span><span class=readtime><strong>9 min read</strong></span></p><div class=paragraph><p>OpenShift comes per default with a static Grafana dashboard, which will present cluster metrics to cluster administrators. It is not possible to customize this Grafana instance.</p></div><div class=paragraph><p>However, many customers would like to create their own dashboards, their own monitoring and their own alerting while leveraging the possibilities of OpenShift at the same time and without installing a completely separated monitoring stack.</p></div><div class=paragraph><p>So how can you create your own queries? How can you visualize them on custom dashboards, without the need to install Prometheus or Alertmanager a second time?</p></div><div class=paragraph><p>The solution is simple: Since OpenShift 4.5 (as TechPreview) and since OpenShift 4.6 (as GA) the default monitoring stack of OpenShift has been extended to support monitoring of <strong>user-defined projects</strong>. This additional configuration will help to observe your own projects.</p></div><div class=paragraph><p>In this article we will see how to deploy the Grafana operator and what the possible issues can occur, when simply connecting Grafana to the OpenShift monitoring.</p></div><div class=sect1><h2 id=_overview>Overview</h2><div class=sectionbody><div class=paragraph><p>As a developer in OpenShift, you can create an application which provides your custom statistics of your application at the endpoint <em>/metrics</em>. Here the example from the official OpenShift documentation:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-ini data-lang=ini># HELP http_requests_total Count of all HTTP requests
# TYPE http_requests_total counter
http_requests_total{code=&#34;200&#34;,method=&#34;get&#34;} 4
http_requests_total{code=&#34;404&#34;,method=&#34;get&#34;} 2
# HELP version Version information about this binary
# TYPE version gauge
version{version=&#34;v0.1.0&#34;} 1</code></pre></div></div><div class=paragraph><p>This metric can then be viewed inside OpenShift in the developer view under the menu <strong>Monitoring</strong>. If you go to "Monitoring > Metrics" and select "Custom Query" from the drop down, you can enter, for example, the following PromQL query:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-sql data-lang=sql>sum(rate(http_requests_total[2m]))</code></pre></div></div><div class=paragraph><p>The following graph will be the result:</p></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/custom-query.png?width=940px" alt="Custom Query"></div><div class=title>Figure 1. Custom Query</div></div><div class=paragraph><p>This is great! But …​ what happens if a customer would like to see his very own super fancy Grafana dashboard? You cannot change the cluster dashboard. However, you can install your own Grafana instance and one way to do so is using the <strong>Custom Grafana Operator</strong>.</p></div></div></div><div class=sect1><h2 id=_before_we_begin>Before we begin</h2><div class=sectionbody><div class=paragraph><p>Before we start the following should be prepared already:</p></div><div class="olist arabic"><ol class=arabic><li><p>OpenShift 4.5+</p></li><li><p>Enabled user-define workload monitoring</p></li><li><p>A project with user-defined workload monitoring. This is explained in the official documentation at <a href=https://docs.openshift.com/container-platform/4.6/monitoring/enabling-monitoring-for-user-defined-projects.html class=bare>https://docs.openshift.com/container-platform/4.6/monitoring/enabling-monitoring-for-user-defined-projects.html</a>.</p></li></ol></div><div class=paragraph><p>During this blog, we will use the namespace <strong>ns1</strong> with a custom metric</p></div></div></div><div class=sect1><h2 id=_deploy_custom_grafana_operator>Deploy Custom Grafana Operator</h2><div class=sectionbody><div class=paragraph><p>As for any community operator the following must be considered:</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>Community Operators are operators which have not been vetted or verified by Red Hat. Community Operators should be used with caution because their stability is unknown. Red Hat provides no support for Community Operators.</td></tr></tbody></table></div><div class=paragraph><p>The community Grafana operator must be deployed to its own namespace, for example <strong>grafana</strong>. Create this namespace first (oc new-project grafana) and search and intall the <em>Grafana Operator</em> from the OperatorHub. You can use the default values, just be sure to select the wanted namespace.</p></div><div class=paragraph><p>After a few minutes, the operator should be available:</p></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/grafana-operator.png?width=940px" alt="Grafana Operator"></div><div class=title>Figure 2. Installed Community Grafana Operator</div></div></div></div><div class=sect1><h2 id=_setup_grafana_operator>Setup Grafana Operator</h2><div class=sectionbody><div class=paragraph><p>Before we can use Grafana to draw beautiful images it must be configured. We need to create an instance of Grafana. Ideally, OpenShift OAuth is already leveraged, to avoid the need to creating user account manually, inside Grafana.</p></div><div class=paragraph><p>OAuth requires some objects, which must be created before the actual Grafana instance. The following YAMLs are taken from the operator documentation. Create the following inside the Grafana namespace:</p></div><div class="olist arabic"><ol class=arabic><li><p>Session secret for the proxy …​ change the password!!</p></li><li><p>a cluster role <em>grafana-proxy</em></p></li><li><p>a cluster role binding for the role</p></li><li><p>a config map injecting trusted CA bundles</p></li></ol></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: v1
data:
  session_secret: Y2hhbmdlIG1lCg==
kind: Secret
metadata:
  name: grafana-k8s-proxy
type: Opaque
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: grafana-proxy
rules:
  - apiGroups:
      - authentication.k8s.io
    resources:
      - tokenreviews
    verbs:
      - create
  - apiGroups:
      - authorization.k8s.io
    resources:
      - subjectaccessreviews
    verbs:
      - create
---
apiVersion: authorization.openshift.io/v1
kind: ClusterRoleBinding
metadata:
  name: grafana-proxy
roleRef:
  name: grafana-proxy
subjects:
  - kind: ServiceAccount
    name: grafana-serviceaccount
    namespace: grafana
userNames:
  - system:serviceaccount:grafana:grafana-serviceaccount
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    config.openshift.io/inject-trusted-cabundle: &#34;true&#34;
  name: ocp-injected-certs</code></pre></div></div><div class=paragraph><p>Now you can create the following instance under: "Installed Operators > Grafana Operator > Grafana > Create Grafana > YAML View" (or, as an alternative, via the CLI)</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: integreatly.org/v1alpha1
kind: Grafana
metadata:
  name: grafana-oauth
  namespace: grafana
spec:
  config: <i class=conum data-value=1></i><b>(1)</b>
    auth:
      disable_login_form: false
      disable_signout_menu: true
    auth.anonymous:
      enabled: false
    auth.basic:
      enabled: true
    log:
      level: warn
      mode: console
    security: <i class=conum data-value=2></i><b>(2)</b>
      admin_password: secret
      admin_user: root
  secrets:
    - grafana-k8s-tls
    - grafana-k8s-proxy
  client:
    preferService: true
  dataStorage: <i class=conum data-value=3></i><b>(3)</b>
    accessModes:
      - ReadWriteOnce
    class: managed-nfs-storage
    size: 10Gi
  containers: <i class=conum data-value=4></i><b>(4)</b>
    - args:
        - &#39;-provider=openshift&#39;
        - &#39;-pass-basic-auth=false&#39;
        - &#39;-https-address=:9091&#39;
        - &#39;-http-address=&#39;
        - &#39;-email-domain=*&#39;
        - &#39;-upstream=http://localhost:3000&#39;
        - &#39;-tls-cert=/etc/tls/private/tls.crt&#39;
        - &#39;-tls-key=/etc/tls/private/tls.key&#39;
        - &gt;-
          -client-secret-file=/var/run/secrets/kubernetes.io/serviceaccount/token
        - &#39;-cookie-secret-file=/etc/proxy/secrets/session_secret&#39;
        - &#39;-openshift-service-account=grafana-serviceaccount&#39;
        - &#39;-openshift-ca=/etc/pki/tls/cert.pem&#39;
        - &#39;-openshift-ca=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&#39;
        - &#39;-openshift-ca=/etc/grafana-configmaps/ocp-injected-certs/ca-bundle.crt&#39;
        - &#39;-skip-auth-regex=^/metrics&#39;
        - &gt;-
          -openshift-sar={&#34;namespace&#34;: &#34;grafana&#34;, &#34;resource&#34;: &#34;services&#34;,
          &#34;verb&#34;: &#34;get&#34;}
      image: &#39;quay.io/openshift/origin-oauth-proxy:4.8&#39;
      name: grafana-proxy
      ports:
        - containerPort: 9091
          name: grafana-proxy
      resources: {}
      volumeMounts:
        - mountPath: /etc/tls/private
          name: secret-grafana-k8s-tls
          readOnly: false
        - mountPath: /etc/proxy/secrets
          name: secret-grafana-k8s-proxy
          readOnly: false
  ingress:
    enabled: true
    targetPort: grafana-proxy
    termination: reencrypt
  service:
    annotations:
      service.alpha.openshift.io/serving-cert-secret-name: grafana-k8s-tls
    ports:
      - name: grafana-proxy
        port: 9091
        protocol: TCP
        targetPort: grafana-proxy
  serviceAccount:
    annotations:
      serviceaccounts.openshift.io/oauth-redirectreference.primary: &gt;-
        {&#34;kind&#34;:&#34;OAuthRedirectReference&#34;,&#34;apiVersion&#34;:&#34;v1&#34;,&#34;reference&#34;:{&#34;kind&#34;:&#34;Route&#34;,&#34;name&#34;:&#34;grafana-route&#34;}}
  configMaps:
    - ocp-injected-certs
  dashboardLabelSelector:
    - matchExpressions:
        - key: app
          operator: In
          values:
            - grafana</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Some default settings, which can be modified if required</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>A default administrative user</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>A datastore to use a persistent volume. Other options would be to use ephemeral storage, or another database. This might be especially important, if you would like HA for your Grafana.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Container arguments, most important the openshift-sar line which is important for the OAuth</td></tr></tbody></table></div><div class=paragraph><p>After a few moments, the operator will pick up the change and creates a Grafana pod.</p></div></div></div><div class=sect1><h2 id=_adding_a_data_source>Adding a Data Source</h2><div class=sectionbody><div class=paragraph><p>The next step is to connect your custom Grafana to Prometheus, or actually to the Thanos Querier. To do so, you will need to add a role to the Grafana service account and to create a CRD <em>GrafanaDataSource</em>.</p></div><div class=paragraph><p>At this moment, we will work with the cluster role <em>cluster-monitoring-view</em>. The problem this might bring is discussed later.</p></div><div class="olist arabic"><ol class=arabic><li><p>Add the role to the Grafana serviceaccount</p><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>oc adm policy add-cluster-role-to-user cluster-monitoring-view -z grafana-serviceaccount</code></pre></div></div></li><li><p>Retrieve the token of the service account</p><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>oc serviceaccounts get-token grafana-serviceaccount -n grafana</code></pre></div></div></li><li><p>Create the following Grafana Data Source, either via UI or via CLI. Be sure to change &lt;TOKEN> with the token from step #2.</p><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>apiVersion: integreatly.org/v1alpha1
kind: GrafanaDataSource
metadata:
  name: prometheus-grafanadatasource
  namespace: grafana
spec:
  datasources:
    - access: proxy
      editable: true
      isDefault: true
      jsonData:
        httpHeaderName1: Authorization
        timeInterval: 5s
        tlsSkipVerify: true
      name: Prometheus
      secureJsonData:
        httpHeaderValue1: &gt;-
          Bearer &lt;TOKEN&gt; <i class=conum data-value=1></i><b>(1)</b>
      type: prometheus
      url: &#39;https://thanos-querier.openshift-monitoring.svc.cluster.local:9091&#39; <i class=conum data-value=2></i><b>(2)</b>
  name: prometheus-grafanadatasource.yaml</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>enter token from step #2</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Thanos default querier URL…​. this might cause problems (see below)</td></tr></tbody></table></div></li></ol></div><div class=paragraph><p>The operator will now restart the Grafana pod to add the newest changes, which should not take more than a few seconds.
Grafana can be used now. Dashboards can be created …​ but lets run some tests with PromQL queries instead.</p></div></div></div><div class=sect1><h2 id=_lets_test>Let’s Test</h2><div class=sectionbody><div class=paragraph><p>Log in to your Grafana using OAuth and a cluster administrator.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>You could also use a non cluster administrator, if the user is able to GET the services of the Grafana namespace. The reason is the following line in the Grafana CRD: <strong>-openshift-sar={"namespace": "grafana", "resource": "services","verb": "get"}</strong> which defines, that OAuth will work for everybody who can get the service. This might be changed according to personal needs, but for this test it is good enough.</td></tr></tbody></table></div><div class=paragraph><p>Then use the credentials for the admin account, which have been defined while creating the Grafana instance.</p></div><div class=paragraph><p>You will be logged in now and since there are no Dashboards, lets go to <em>Explore</em> to enter some custom PromQL queries, for instance our example from above:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-sql data-lang=sql>sum(rate(http_requests_total[2m]))</code></pre></div></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/query1.png?width=940px" alt=Query></div><div class=title>Figure 3. First Query</div></div><div class=paragraph><p>This is looking good.</p></div><div class=paragraph><p>Let’s give it another try and sort by namespaces.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-sql data-lang=sql>sum(rate(http_requests_total[2m])) by (namespace)</code></pre></div></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/query2.png?width=940px" alt=Query></div><div class=title>Figure 4. Second Query - showing internal namespace</div></div><div class=paragraph><p>What is this? I see a namespace which is actually meant for the cluster (openshift-monitoring).</p></div><div class=paragraph><p>Let’s try another query using a different metric:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-sql data-lang=sql>sum(node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate) by (namespace)</code></pre></div></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/query3.png?width=940px" alt=Query></div><div class=title>Figure 5. Third Query - shows even more namespaces</div></div><div class=paragraph><p>Ok, so we have access to all namespaces on the cluster.</p></div></div></div><div class=sect1><h2 id=_why_do_i_see_all_namespaces>Why do I see all namespaces?</h2><div class=sectionbody><div class=paragraph><p>What does this mean? Well, it means that we have access to all namespaces of the cluster. We see everything. This makes sense, since we assign the cluster role "cluster-monitoring-view" to the serviceaccount of Grafana.
But what if we want to show only objects from a specific namespace? If we want, for example, give the developers the possibility to create their own dashboards, without having view access to the whole cluster.</p></div><div class=paragraph><p>The first test might be to remove the cluster-monitoring-view privileges from the Grafana serviceaccount. This will lead to an error on Grafana itself, since it cannot access the Thanos Querier, which we configured with: <a href=https://thanos-querier.openshift-monitoring.svc.cluster.local:9091 class=bare>https://thanos-querier.openshift-monitoring.svc.cluster.local:9091</a></p></div><div class=paragraph><p>How does the Openshift WebUI actually work, when you are a developer and would like to search one of the above queries. Let’s try that:</p></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/query4.png?width=940px" alt=Query></div><div class=title>Figure 6. Query using the OpenShift UI</div></div><div class=paragraph><p>It works! It shows the namespace of the developer and only this namespace.
When you inspect the actual network traffic, you will see that OpenShift automatically adds the URL parameter <strong>namespace=ns1</strong> to the request URL:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-sql data-lang=sql>https://your-cluster/api/prometheus-tenancy/api/v1/query?namespace=ns1&amp;query=sum%28node_namespace_pod_container%3Acontainer_cpu_usage_seconds_total%3Asum_rate%29+by+%28namespace%29</code></pre></div></div><div class=paragraph><p>This is good information, let’s try this using the Grafana Data Source.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>It is currently not possible to perform this configuration using the GrafanaDataSource CRD. Instead, it must be done directly at the Grafana Dashboard configuration. There is an open ticket at: <a href=https://github.com/integr8ly/grafana-operator/issues/309 class=bare>https://github.com/integr8ly/grafana-operator/issues/309</a></td></tr></tbody></table></div><div class=paragraph><p>Login to Grafana as administrator and switch to "Configuration > Data Source > Prometheus >". At the very bottom add <strong>namespace=ns1</strong> to the <strong>Custom query parameters</strong></p></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/config-datasource.png?width=940px" alt="Configure Data Source"></div><div class=title>Figure 7. Configure Grafana Data Source</div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>At this point the Grafana serviceaccount has <em>cluster_monitoring_view</em> privileges.</td></tr></tbody></table></div><div class=paragraph><p>As you can see in the following image, this configuration did not help.</p></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/query5.png?width=940px" alt=Query></div><div class=title>Figure 8. Query after Data Source has manually been modified</div></div></div></div><div class=sect1><h2 id=_thanos_querier_vs_thanos_querier>Thanos Querier vs. Thanos Querier</h2><div class=sectionbody><div class=paragraph><p>To summarize, in the OpenShift UI everything works, but when using the Grafana dashboard, we see all namespaces from the cluster. Let’s try to find out how OpenShift does this.</p></div><div class=paragraph><p>When we check the Thanos services we will see 3 ports:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>  ports:
    - name: web
      protocol: TCP
      port: 9091
      targetPort: web
    - name: tenancy
      protocol: TCP
      port: 9092
      targetPort: tenancy
    - name: tenancy-rules
      protocol: TCP
      port: 9093
      targetPort: tenancy-rules</code></pre></div></div><div class=paragraph><p>Currently we configured port 9091, but there is another one, which is called <strong>tenancy</strong>, maybe this is what we need? Let’s try it:</p></div><div class="olist arabic"><ol class=arabic><li><p>Change the CRD GrafanaDataSource to use port 9092 (instead of 9091). This will restart the pod and remove the custom query parameter we configured earlier.</p></li><li><p>Remove the cluster-role</p><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>oc adm policy remove-cluster-role-from-user cluster-monitoring-view -z grafana-serviceaccount</code></pre></div></div></li><li><p>The serviceaccount of Grafana, must be able to view the project we want to show in the dashboards. Therefore, allow the Grafana serviceaccount to view the project <em>ns1</em>:</p><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>oc adm policy add-role-to-user view system:serviceaccount:grafana:grafana-serviceaccount -n ns1</code></pre></div></div></li><li><p>Log into Grafana as administrator and manually change the Data Source and add <strong>namespace=ns1</strong> to the setting <strong>Custom query parameters</strong></p></li><li><p>Rerun the Query …​ as you see you will now see one namespace only.</p><div class=imageblock><div class=content><img src="/openshift/images/grafana/working-query.png?width=940px" alt=Query></div><div class=title>Figure 9. Query with Thanos Querier on port 9092</div></div></li></ol></div></div></div><div class=sect1><h2 id=_what_happened>What happened?</h2><div class=sectionbody><div class=paragraph><p>So what actually happened here? We have two ports for our Thanos Querier which are important: 9091 and 9092.</p></div><div class=paragraph><p>When we check the Deployment of the Thanos Querier for these ports we will see:</p></div><div class=paragraph><p>For the port <strong>9091</strong> it looks like the following:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>spec:
[...]
      containers:
[...]
        - resources:
[...]
          ports:
            - name: web
              containerPort: 9091
              protocol: TCP
[...]
          args:
[...]
            - &#39;-openshift-sar={&#34;resource&#34;: &#34;namespaces&#34;, &#34;verb&#34;: &#34;get&#34;}&#39;</code></pre></div></div><div class=paragraph><p>There is an OAuth setting which says: you have to have the privilege to GET the objects "namespace".</p></div><div class=paragraph><p>The only cluster role which has exactly this privilege and which is also mentioned by the official OpenShift documentation is <strong>cluster-monitoring-view</strong></p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml> - apiVersion: rbac.authorization.k8s.io/v1
   kind: ClusterRole
   metadata:
     name: cluster-monitoring-view
   rules:
   - apiGroups:
     - &#34;&#34;
     resources:
     - namespaces
     verbs:
     - get</code></pre></div></div><div class=paragraph><p>As we have seen above, this will show you all namespaces available on the cluster.</p></div><div class=paragraph><p>When you check port <strong>9092</strong> there is no such OAuth configuration. This service is actually in front of the container <strong>kube-rbac-proxy</strong>. It does not require OAuth, but instead the namespace URL parameter.</p></div><div class=paragraph><p>Details can be found at: <a href=https://github.com/openshift/enhancements/blob/master/enhancements/monitoring/user-workload-monitoring.md class=bare>https://github.com/openshift/enhancements/blob/master/enhancements/monitoring/user-workload-monitoring.md</a></p></div><div class=paragraph><p>In short the whole setup looks like this:</p></div><div class=imageblock><div class=content><img src="/openshift/images/grafana/thanos.png?width=640px" alt=Thanos></div><div class=title>Figure 10. Thanos interconnecting containers</div></div><div class=paragraph><p>While port 9091 goes directly to Thanos it will require that you have the cluster-monitoring-view role. Port 9092 does not require this, but instead you <strong>MUST</strong> send the URL parameter namespace=.</p></div></div></div><div class=sect1><h2 id=_summary>Summary</h2><div class=sectionbody><div class=paragraph><p>While both options are valid, some considerations must be done when using the Grafana Operator.</p></div><div class=ulist><ul><li><p>Currently the URL parameter can be set in Grafana directly only. The operator will ignore it. The ticket in the project shall address this, but is not yet implemented: <a href=https://github.com/integr8ly/grafana-operator/issues/309 class=bare>https://github.com/integr8ly/grafana-operator/issues/309</a></p></li><li><p>The URL parameter setting will be gone, when the Grafana pods is restarted, which might lead to a problem.</p></li><li><p>While the Grafana serviceaccount does not require cluster permissions, it will require permission to view the appropriate namespace</p></li><li><p>All above also means, that you actually would need to create a new DataSource for every project you want to monitor. I was not able to find a way, to send multiple namespaces in the URL parameter.</p></li></ul></div><div class=paragraph><p>Is it useful to leverage the Grafana operator then at all? Probably yes, since Operators are the future and it is actively developed. Nevertheless, it is always possible to deploy Grafana manually.</p></div></div></div><hr class=related><div class=related-content><h3>See Also:</h3><ul><li class=related><a href=/day-2/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/>The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8</a>
&ndash;
<time datetime=2025-12-06T00:00:00+0000><i>Dec 6, 2025</i></time><br><small><p class=related>In the previous articles, we deployed a distributed tracing infrastructure with TempoStack and OpenTelemetry Collector. We also deployed a Grafana instance to visualize the traces. The configuration was done in a way that allows everybody to read the traces. Every system:authenticated user is able to read ALL traces. This is usually not what you want. You want to limit trace access to only the appropriate namespace.
In this article, we’ll limit the read access to traces. The users of the team-a namespace will only be able to see their own traces.</p></small></li><li class=related><a href=/day-2/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/>The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7</a>
&ndash;
<time datetime=2025-12-04T00:00:00+0000><i>Dec 4, 2025</i></time><br><small><p class=related>While we have been using the integrated tracing UI in OpenShift, it is time to summon Grafana. Grafana is a visualization powerhouse that allows teams to build custom dashboards, correlate traces with logs and metrics, and gain deep insights into their applications. In this article, we’ll deploy a dedicated Grafana instance for team-a in their namespace, configure a Tempo datasource, and create a dashboard to explore distributed traces.</p></small></li><li class=related><a href=/day-2/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/>The Hitchhiker's Guide to Observability Introduction - Part 1</a>
&ndash;
<time datetime=2025-11-23T00:00:00+0000><i>Nov 23, 2025</i></time><br><small><p class=related>With this article I would like to summarize and, especially, remember my setup. This is Part 1 of a series of articles that I split up so it is easier to read and understand and not too long. Initially, there will be 6 parts, but I will add more as needed.</p></small></li><li class=related><a href=/day-2/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/>The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2</a>
&ndash;
<time datetime=2025-11-24T00:00:00+0000><i>Nov 24, 2025</i></time><br><small><p class=related>After covering the fundamentals and architecture in Part 1, it’s time to get our hands dirty! This article walks through the complete implementation of a distributed tracing infrastructure on OpenShift.
We’ll deploy and configure the Tempo Operator and a multi-tenant TempoStack instance. For S3 storage we will use the integrated OpenShift Data Foundation. However, you can use whatever S3-compatible storage you have available.</p></small></li><li class=related><a href=/day-2/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/>The Hitchhiker's Guide to Observability - Central Collector - Part 3</a>
&ndash;
<time datetime=2025-11-25T00:00:00+0000><i>Nov 25, 2025</i></time><br><small><p class=related>With the architecture defined in Part 1 and TempoStack deployed in Part 2, it’s time to tackle the heart of our distributed tracing system: the Central OpenTelemetry Collector. This is the critical component that sits between your application namespaces and TempoStack, orchestrating trace flow, metadata enrichment, and tenant routing.</p></small></li></ul></div><footer class=footline></footer></div></div><div id=navigation-bottom><a class="readme-a margin-right-5 margin-bottom-2 inline-flex relative no-highlight" href=/openshift/2021/01/writing-operator-using-ansible/ title="Writing Operator using Ansible"><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-left btn-bottom-prev"></i>
<span class=btn-bottom-text></span> Writing Operator using Ansible</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a><a class="readme-a inline-flex relative no-highlight" href=/openshift/2020/08/gitops-argo-cd/ title="GitOps - Argo CD" style=margin-right:0><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-right btn-bottom-next"></i>
<span class=btn-bottom-text></span> GitOps - Argo CD</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a></div><div class=copyright><p>Copyright &copy; 2020 - 2025 Toni Schmidbauer & Thomas Jungbauer</p></div></section><script>(function(){$("document").ready(function(){var s=$(".read-progress").waypoint({handler:function(e){e=="down"?($(".read-progress").addClass("position-fixed"),$(".read-progress").css("top",0)):($(".read-progress").removeClass("position-fixed"),$(".read-progress").css("top"))}}),t=$(window).height(),e=$(".post-content").height();$(window).on("scroll",n),$(window).on("resize",function(){t=$(window).height(),e=$(".post-content").height(),n()});function n(){var s=$(this).scrollTop(),o=$(".post-content").offset().top,i=e-(e-(t-(o-s))),n=i/e*100,n=n>100?100:n;$(".read-progress").width(n+"%")}})})()</script><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1765004186></script><script src=/js/perfect-scrollbar.jquery.min.js?1765004186></script><script src=/js/jquery.sticky.js?1765004186></script><script src=/js/featherlight.min.js?1765004186></script><script src=/js/webp-upgrade.js?1765004186></script><script src=/js/highlight.pack.js?1765004186></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1765004186></script><script src=/js/learn.js?1765004186></script><script src=/js/hugo-learn.js?1765004186></script><script src=/js/yaub.js?1765004186></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target.getAttribute("id");e.intersectionRatio>0&&(clearActiveStatesInTableOfContents(),document.querySelector(`aside nav li a[href="#${t}"]`).parentElement.classList.add("active"))})});document.querySelectorAll("h1[id],h2[id],h3[id]").forEach(t=>{e.observe(t)})});function clearActiveStatesInTableOfContents(){document.querySelectorAll("aside nav li").forEach(e=>{e.classList.remove("active")})}</script><script type=text/javascript>function scrollTopAnimated(){$("html, body").animate({scrollTop:"0"},500)}</script><script>function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(".article-box").click(function(){return window.location=$(this).attr("href"),$this.stopPropagation(),!1})</script><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("a.category-link");e.forEach(function(e){var t=e.textContent.trim().toLowerCase();t==="openshift"&&e.classList.add("openshift"),t==="compliance"&&e.classList.add("compliance"),t==="service mesh"&&e.classList.add("mesh"),t==="security"&&e.classList.add("security"),t==="other"&&e.classList.add("other"),t==="ansible"&&e.classList.add("ansible"),t==="supply chain"&&e.classList.add("cicd"),t==="gitops"&&e.classList.add("gitops"),t==="grafana"&&e.classList.add("grafana"),t==="tempo"&&e.classList.add("grafana"),t==="opentelemetry"&&e.classList.add("opentelemetry"),t==="advanced cluster security"&&e.classList.add("acs"),t==="quay"&&e.classList.add("quay")})})</script><script src=/js/js-yaml/js-yaml.min.js?1765004186></script><script src=/js/d3/d3-color.min.js?1765004186></script><script src=/js/d3/d3-dispatch.min.js?1765004186></script><script src=/js/d3/d3-drag.min.js?1765004186></script><script src=/js/d3/d3-ease.min.js?1765004186></script><script src=/js/d3/d3-interpolate.min.js?1765004186></script><script src=/js/d3/d3-selection.min.js?1765004186></script><script src=/js/d3/d3-timer.min.js?1765004186></script><script src=/js/d3/d3-transition.min.js?1765004186></script><script src=/js/d3/d3-zoom.min.js?1765004186></script><script src=/mermaid/mermaid.js?1765004186></script><script>window.relearn=window.relearn||{},window.relearn.themeUseMermaid=!0,window.relearn.mermaidConfig={securityLevel:"loose"},window.T_Reset_view="Reset view",window.T_View_reset="View reset",window.showToast=window.showToast||function(e){console.log("Toast:",e)},typeof mermaid!="undefined"&&mermaid.initialize({startOnLoad:!1,securityLevel:"loose",theme:"default"})</script><script>(function(){document.querySelectorAll('pre code[class*="language-"], pre code[class*="hljs"]').forEach(function(e){let t=null;const n=e.className.split(" ");for(const e of n){if(e.startsWith("language-")){t=e.replace("language-","");break}const s=["yaml","yml","bash","shell","sh","javascript","js","typescript","ts","python","py","go","golang","json","html","css","dockerfile","docker","ruby","rb","java","sql","xml","markdown","md","rust","rs","terraform","tf","hcl","ansible","helm","c","cpp","csharp","php","perl","lua","r","scala","kotlin","swift","groovy","powershell","ini","toml","nginx","apache","diff","plaintext","text","console","log"];if(s.includes(e.toLowerCase())){t=e;break}}if(t){const n=e.parentElement;if(n&&n.tagName==="PRE"){if(!n.parentElement.classList.contains("code-block-wrapper")){const e=document.createElement("div");e.className="code-block-wrapper",n.parentNode.insertBefore(e,n),e.appendChild(n)}const e=document.createElement("span");e.className="code-language-badge lang-"+t.toLowerCase(),e.textContent=t.toUpperCase(),n.parentElement.insertBefore(e,n)}}})})()</script><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/js/sw.js").then(function(e){console.log("ServiceWorker registered successfully with scope: ",e.scope)}).catch(function(e){console.log("ServiceWorker registration failed: ",e)})})</script></body></html>