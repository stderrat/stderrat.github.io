<!doctype html><html lang=en class="js csstransforms3d"><head><meta name=google-site-verification content="yq2Ib3doJVHVlEW2wtHap5WY54JhS2CCvI40y30F0FI"><meta name=color-scheme content="dark light"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.141.0"><meta name=description content="How to configure Cert-Manager Approver Policy in OpenShift"><meta name=author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=keywords content="OpenShift,OCP,Security,Cert-Manager,Certificate,CertificateRequestPolicy,Approver Policy"><meta name=title content="Cert-Manager Policy Approver in OpenShift"><meta name=robots content="index, follow"><meta charset=utf-8><meta name=language content="English"><link rel=canonical href=https://blog.stderr.at/openshift/2025/06/cert-manager-policy-approver-in-openshift/><meta property="og:title" content="Cert-Manager Policy Approver in OpenShift"><meta property="og:description" content="How to configure Cert-Manager Approver Policy in OpenShift"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.stderr.at/openshift/2025/06/cert-manager-policy-approver-in-openshift/"><meta property="og:site_name" content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta property="article:published_time" content="2025-06-03T00:00:00Z"><meta property="article:modified_time" content="2025-06-04T05:45:30+02:00"><meta property="article:section" content="OpenShift"><meta property="article:tag" content="OpenShift"><meta property="article:tag" content="OCP"><meta property="article:tag" content="Security"><meta property="article:tag" content="Cert-Manager"><meta property="article:tag" content="Certificate"><meta property="article:tag" content="CertificateRequestPolicy"><meta property="article:tag" content="Approver Policy"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Cert-Manager Policy Approver in OpenShift"><meta name=twitter:description content="How to configure Cert-Manager Approver Policy in OpenShift"><meta name=article:author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=article:tag content="technical blog, OpenShift, Security, Cert-Manager"><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","headline":"Cert-Manager Policy Approver in OpenShift","description":"How to configure Cert-Manager Approver Policy in OpenShift","url":"https:\/\/blog.stderr.at\/openshift\/2025\/06\/cert-manager-policy-approver-in-openshift\/","datePublished":"2025-06-03T00:00:00Z","dateModified":"2025-06-04T05:45:30\u002b02:00","author":{"@type":"Person","name":"Toni Schmidbauer \u0026 Thomas Jungbauer"},"about":["OpenShift","Security","Cert-Manager"],"publisher":{"@type":"Organization","name":"TechBlog about OpenShift\/Ansible\/Satellite and much more","url":"https:\/\/blog.stderr.at\/"}}</script><link rel=icon href=/images/favicon.ico type=image/png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-180x180.png><link rel=apple-touch-icon sizes=128x128 href=/images/apple-touch-icon-128x128.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-touch-icon-72x72.png><link rel=apple-touch-icon href=/images/apple-touch-icon-57x57.png><link rel="shortcut icon" href=/images/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><title>Cert-Manager Policy Approver in OpenShift :: TechBlog about OpenShift/Ansible/Satellite and much more</title>
<link rel=manifest href=/manifest.json><meta name=theme-color content="#317EFB"><link href=/css/fontawesome-all.min.css?1753103057 rel=stylesheet><link href=/css/featherlight.min.css?1753103057 rel=stylesheet><link href=/css/theme.css?1753103057 rel=stylesheet><link href=/css/theme-yaub.css?1753103057 rel=stylesheet><script src=/js/jquery-3.7.1.min.js?1753103057></script><script src=/js/jquery.waypoints.min.js?1753103057></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/openshift/2025/06/cert-manager-policy-approver-in-openshift/><button onclick=scrollTopAnimated() id=myBtn class="top-btn button fa fa-arrow-up" title="Go to top"></button>
<span class=read-progress></span><nav id=sidebar><div id=header-wrapper><div id=header><a class="padding-topnav logo-link" href=/><svg class="logo" width="200" height="100" viewBox="0 0 200 136.34417133812047"><defs id="SvgjsDefs3490"/><g id="SvgjsG3491" featurekey="symbolFeature-0" transform="matrix(0.8888888888888888,0,0,0.8888888888888888,55.55511135525174,-24.034717135959202)" fill="#d2d2d2"><g xmlns="http://www.w3.org/2000/svg"><g><g><g><path fill="#d2d2d2" d="M75.195 72.96c-.619.0-1.241-.21-1.75-.64-1.146-.967-1.291-2.681-.324-3.827L88.73 50 73.122 31.507c-.967-1.146-.822-2.859.324-3.827 1.146-.968 2.859-.823 3.827.323L94.36 48.248c.854 1.012.854 2.492.0 3.503L77.272 71.995C76.735 72.632 75.968 72.96 75.195 72.96z"/></g></g></g><g><g><g><path fill="#d2d2d2" d="M24.805 72.96c-.772.0-1.539-.328-2.076-.964L5.641 51.752c-.854-1.012-.854-2.492.0-3.503l17.088-20.245c.967-1.146 2.681-1.291 3.827-.324 1.146.967 1.291 2.681.324 3.827L11.269 50.001l15.609 18.492c.967 1.146.823 2.859-.323 3.827C26.045 72.749 25.423 72.96 24.805 72.96z"/></g></g></g><g><path fill="#d2d2d2" d="M37.325 72.96c-.492.0-.99-.134-1.438-.414-1.271-.796-1.657-2.471-.861-3.742L60.37 28.315c.796-1.271 2.472-1.656 3.743-.861 1.271.796 1.657 2.471.861 3.742L39.63 71.685C39.115 72.508 38.23 72.96 37.325 72.96z"/></g></g></g><g id="SvgjsG3492" featurekey="nameFeature-0" transform="matrix(1.6473784183020483,0,0,1.6473784183020483,0.5930603781937029,42.15399158589206)" fill="#d2d2d2"><path d="m6.72 11.44 6.68 11.28 6.64-11.28h7l-10.6 17.6V40h-6.28V28.88l-10.52-17.44h7.08zm38.535.0L55.935 40h-6.52l-2.16-6.36h-10.68L34.335 40h-6.36l10.84-28.56h6.44zM41.935 18.48l-3.72 10.48h7.4l-3.6-10.48h-.08zm27.175-7.04-39062e-9 17.88c0 2.1067.47332 3.6467 1.42 4.62s2.4334 1.46 4.46 1.46c2.1867.0 3.72-.48668 4.6-1.46s1.32-2.5133 1.32-4.62V11.44h6.28v17.88c0 3.5733-1.02 6.36-3.06 8.36s-5.0868 3-9.14 3c-4.1332.0-7.1932-1-9.18-3s-2.98-4.7868-2.98-8.36V11.44h6.28zm41.495.0c6.0532.0 9.08 2.3466 9.08 7.04.0 2.6933-1.2933 4.6932-3.88 6 1.76.50668 3.0733 1.3934 3.94 2.66s1.3 2.7934 1.3 4.58c0 2.56-.92668 4.58-2.78 6.06s-4.2868 2.22-7.3 2.22h-13.84V11.44h13.48zM109.80499999999999 23c2.5333.0 3.8-1.1333 3.8-3.4.0-2.1867-1.4133-3.28-4.24-3.28h-5.96V23h6.4zm.359999999999999 12.12c3.0667.0 4.6-1.2533 4.6-3.76.0-2.72-1.4933-4.08-4.48-4.08h-6.88v7.84h6.76z"/></g></svg><div class=inline-flex><span class="animate-typewriter overflow-hidden whitespace-nowrap">Yet another useless blog<span class="ml-2 -translate-y-2 animate-blink">_</span></span></div></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1753103057></script><script type=text/javascript src=/js/auto-complete.js?1753103057></script><script type=text/javascript>var baseurl="https://blog.stderr.at/"</script><script type=text/javascript src=/js/search.js?1753103057></script></div><div class=highlightable><ul class=topics><li data-nav-id=/gitopscollection/ title="GitOps Episodes" class=dd-item><a href=/gitopscollection/>GitOps Episodes</a><ul><li data-nav-id=/gitopscollection/2025-07-17-common-template-application/ title="Reusable Argo CD Application Helm Template" class=dd-item><a href=/gitopscollection/2025-07-17-common-template-application/>Reusable Argo CD Application Helm Template</a></li><li data-nav-id=/gitopscollection/2025-04-17-applicationset-defining-namespaces/ title="Using ApplicationSet with Matrix Generator and define individual Namespaces" class=dd-item><a href=/gitopscollection/2025-04-17-applicationset-defining-namespaces/>Using ApplicationSet with Matrix Generator and define individual Namespaces</a></li><li data-nav-id=/gitopscollection/2024-10-13-using-post-renderer/ title="Using Kustomize to post render a Helm Chart" class=dd-item><a href=/gitopscollection/2024-10-13-using-post-renderer/>Using Kustomize to post render a Helm Chart</a></li><li data-nav-id=/gitopscollection/2024-07-04-managing-certificates-with-gitops/ title="Managing Certificates using GitOps approach" class=dd-item><a href=/gitopscollection/2024-07-04-managing-certificates-with-gitops/>Managing Certificates using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/ title="Update Cluster Version using GitOps approach" class=dd-item><a href=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/>Update Cluster Version using GitOps approach</a></li><li data-nav-id=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ title="Multiple Sources for Applications in Argo CD" class=dd-item><a href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/>Multiple Sources for Applications in Argo CD</a></li><li data-nav-id=/gitopscollection/2024-05-24-install-openshift-logging/ title="Installing OpenShift Logging using GitOps" class=dd-item><a href=/gitopscollection/2024-05-24-install-openshift-logging/>Installing OpenShift Logging using GitOps</a></li><li data-nav-id=/gitopscollection/2024-05-17-configure-minio-buckets/ title="Configure Buckets in MinIO using GitOps" class=dd-item><a href=/gitopscollection/2024-05-17-configure-minio-buckets/>Configure Buckets in MinIO using GitOps</a></li><li data-nav-id=/gitopscollection/2024-04-28-installing-advanced-cluster-security/ title="Setup & Configure Advanced Cluster Security using GitOps" class=dd-item><a href=/gitopscollection/2024-04-28-installing-advanced-cluster-security/>Setup & Configure Advanced Cluster Security using GitOps</a></li><li data-nav-id=/gitopscollection/2024-04-25-installing-compliance-operator/ title="Setup & Configure Compliance Operator using GitOps" class=dd-item><a href=/gitopscollection/2024-04-25-installing-compliance-operator/>Setup & Configure Compliance Operator using GitOps</a></li><li data-nav-id=/gitopscollection/2024-04-02-configure_app_of_apps/ title="Configure App-of-Apps" class=dd-item><a href=/gitopscollection/2024-04-02-configure_app_of_apps/>Configure App-of-Apps</a></li><li data-nav-id=/gitopscollection/2024-02-02-setup-argocd/ title="Setup OpenShift GitOps/Argo CD" class=dd-item><a href=/gitopscollection/2024-02-02-setup-argocd/>Setup OpenShift GitOps/Argo CD</a></li><li data-nav-id=/gitopscollection/2023-12-28-gitops-repostructure/ title="GitOps - Choosing the right Git repository structure" class=dd-item><a href=/gitopscollection/2023-12-28-gitops-repostructure/>GitOps - Choosing the right Git repository structure</a></li><li data-nav-id=/gitopscollection/2023-12-11-gitops-intro/ title="Introducing the GitOps Approach" class=dd-item><a href=/gitopscollection/2023-12-11-gitops-intro/>Introducing the GitOps Approach</a></li></ul></li><li data-nav-id=/openshift/ title=OpenShift class="dd-item
parent"><a href=/openshift/>OpenShift</a><ul><li data-nav-id=/openshift/2025/06/cert-manager-policy-approver-in-openshift/ title="Cert-Manager Policy Approver in OpenShift" class="dd-item active"><a href=/openshift/2025/06/cert-manager-policy-approver-in-openshift/>Cert-Manager Policy Approver in OpenShift</a></li><li data-nav-id=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/ title="Single log out from Keycloak and OpenShift" class=dd-item><a href=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/>Single log out from Keycloak and OpenShift</a></li><li data-nav-id=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/ title="Step by Step - Using Keycloak Authentication in OpenShift" class=dd-item><a href=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/>Step by Step - Using Keycloak Authentication in OpenShift</a></li><li data-nav-id=/openshift/2024/11/introducing-adminnetworkpolicies/ title="Introducing AdminNetworkPolicies" class=dd-item><a href=/openshift/2024/11/introducing-adminnetworkpolicies/>Introducing AdminNetworkPolicies</a></li><li data-nav-id=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/ title="OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)" class=dd-item><a href=/openshift/2024/02/openshift-data-foundation-noobaa-bucket-data-retention-lifecycle/>OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)</a></li><li data-nav-id=/openshift/2023/11/running-falco-on-openshift-4.12/ title="Running Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023/11/running-falco-on-openshift-4.12/>Running Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/ title="Quay Deployment and Configuration using GitOps" class=dd-item><a href=/openshift/2023/11/quay-deployment-and-configuration-using-gitops/>Quay Deployment and Configuration using GitOps</a></li><li data-nav-id=/openshift/2023/10/setting-up-falco-on-openshift-4.12/ title="Setting up Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023/10/setting-up-falco-on-openshift-4.12/>Setting up Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023/10/how-to-force-a-machineconfig-rollout/ title="How to force a MachineConfig rollout" class=dd-item><a href=/openshift/2023/10/how-to-force-a-machineconfig-rollout/>How to force a MachineConfig rollout</a></li><li data-nav-id=/openshift/2023/03/operator-installation-with-argo-cd/ title="Operator installation with Argo CD" class=dd-item><a href=/openshift/2023/03/operator-installation-with-argo-cd/>Operator installation with Argo CD</a></li><li data-nav-id=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/ title="SSL Certificate Management for OpenShift on AWS" class=dd-item><a href=/openshift/2023/02/ssl-certificate-management-for-openshift-on-aws/>SSL Certificate Management for OpenShift on AWS</a></li><li data-nav-id=/openshift/2022/11/using-serversideapply-with-argocd/ title="Using ServerSideApply with ArgoCD" class=dd-item><a href=/openshift/2022/11/using-serversideapply-with-argocd/>Using ServerSideApply with ArgoCD</a></li><li data-nav-id=/openshift/2022/08/secrets-management-vault-on-openshift/ title="Secrets Management - Vault on OpenShift" class=dd-item><a href=/openshift/2022/08/secrets-management-vault-on-openshift/>Secrets Management - Vault on OpenShift</a></li><li data-nav-id=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/ title="Overview of Red Hat's Multi Cloud Gateway (Noobaa)" class=dd-item><a href=/openshift/2022/04/overview-of-red-hats-multi-cloud-gateway-noobaa/>Overview of Red Hat's Multi Cloud Gateway (Noobaa)</a></li><li data-nav-id=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/ title="Secure your secrets with Sealed Secrets" class=dd-item><a href=/openshift/2021/09/secure-your-secrets-with-sealed-secrets/>Secure your secrets with Sealed Secrets</a></li><li data-nav-id=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/ title="Understanding RWO block device handling in OpenShift" class=dd-item><a href=/openshift/2021/02/understanding-rwo-block-device-handling-in-openshift/>Understanding RWO block device handling in OpenShift</a></li><li data-nav-id=/openshift/2021/01/writing-operator-using-ansible/ title="Writing Operator using Ansible" class=dd-item><a href=/openshift/2021/01/writing-operator-using-ansible/>Writing Operator using Ansible</a></li><li data-nav-id=/openshift/2020/12/thanos-querier-vs-thanos-querier/ title="Thanos Querier vs Thanos Querier" class=dd-item><a href=/openshift/2020/12/thanos-querier-vs-thanos-querier/>Thanos Querier vs Thanos Querier</a></li><li data-nav-id=/openshift/2020/08/gitops-argo-cd/ title="GitOps - Argo CD" class=dd-item><a href=/openshift/2020/08/gitops-argo-cd/>GitOps - Argo CD</a></li><li data-nav-id=/openshift/2020/04/openshift-pipelines-tekton-introduction/ title="OpenShift Pipelines - Tekton Introduction" class=dd-item><a href=/openshift/2020/04/openshift-pipelines-tekton-introduction/>OpenShift Pipelines - Tekton Introduction</a></li><li data-nav-id=/openshift/2020/04/helpful-oc-/-kubectl-commands/ title="Helpful oc / kubectl commands" class=dd-item><a href=/openshift/2020/04/helpful-oc-/-kubectl-commands/>Helpful oc / kubectl commands</a></li></ul></li><li data-nav-id=/day-2/ title="OpenShift Day-2" class=dd-item><a href=/day-2/>OpenShift Day-2</a><ul><li data-nav-id=/day-2/etcd/ title=etcd class=dd-item><a href=/day-2/etcd/>etcd</a><ul><li data-nav-id=/day-2/etcd/2022-01-29-automatedetcdbackup/ title="Automated ETCD Backup" class=dd-item><a href=/day-2/etcd/2022-01-29-automatedetcdbackup/>Automated ETCD Backup</a></li></ul></li><li data-nav-id=/day-2/labels_environmets/ title="Labels & Environments" class=dd-item><a href=/day-2/labels_environmets/>Labels & Environments</a><ul><li data-nav-id=/day-2/labels_environmets/2022-01-12-creatingenvironment/ title="Working with Environments" class=dd-item><a href=/day-2/labels_environmets/2022-01-12-creatingenvironment/>Working with Environments</a></li></ul></li><li data-nav-id=/day-2/pod-placement/ title="Pod Placement" class=dd-item><a href=/day-2/pod-placement/>Pod Placement</a><ul><li data-nav-id=/day-2/pod-placement/2021-08-26-podplacement-intro/ title=Introduction class=dd-item><a href=/day-2/pod-placement/2021-08-26-podplacement-intro/>Introduction</a></li><li data-nav-id=/day-2/pod-placement/2021-08-29-node-affinity/ title="Node Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-29-node-affinity/>Node Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-27-podplacement/ title=NodeSelector class=dd-item><a href=/day-2/pod-placement/2021-08-27-podplacement/>NodeSelector</a></li><li data-nav-id=/day-2/pod-placement/2021-08-28-affinity/ title="Pod Affinity/Anti-Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-28-affinity/>Pod Affinity/Anti-Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-30-taints/ title="Taints and Tolerations" class=dd-item><a href=/day-2/pod-placement/2021-08-30-taints/>Taints and Tolerations</a></li><li data-nav-id=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints" class=dd-item><a href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/>Topology Spread Constraints</a></li><li data-nav-id=/day-2/pod-placement/2021-09-01-descheduler/ title="Using Descheduler" class=dd-item><a href=/day-2/pod-placement/2021-09-01-descheduler/>Using Descheduler</a></li></ul></li></ul></li><li data-nav-id=/securesupplychain/ title="Secure Supply Chain" class=dd-item><a href=/securesupplychain/>Secure Supply Chain</a><ul><li data-nav-id=/securesupplychain/2023-06-15-securesupplychain-intro/ title="Introduction to a Secure Supply Chain" class=dd-item><a href=/securesupplychain/2023-06-15-securesupplychain-intro/>Introduction to a Secure Supply Chain</a></li><li data-nav-id=/securesupplychain/2023-06-16-securesupplychain-step1/ title="Step 1 - Listen to Events" class=dd-item><a href=/securesupplychain/2023-06-16-securesupplychain-step1/>Step 1 - Listen to Events</a></li><li data-nav-id=/securesupplychain/2023-06-17-securesupplychain-step2/ title="Step 2 - Pipelines" class=dd-item><a href=/securesupplychain/2023-06-17-securesupplychain-step2/>Step 2 - Pipelines</a></li><li data-nav-id=/securesupplychain/2023-06-18-securesupplychain-step3/ title="Step 3 - SonarQube" class=dd-item><a href=/securesupplychain/2023-06-18-securesupplychain-step3/>Step 3 - SonarQube</a></li><li data-nav-id=/securesupplychain/2023-06-19-securesupplychain-step4/ title="Step 4 - Verify Git Commit" class=dd-item><a href=/securesupplychain/2023-06-19-securesupplychain-step4/>Step 4 - Verify Git Commit</a></li><li data-nav-id=/securesupplychain/2023-06-20-securesupplychain-step5/ title="Step 5 - Build and Sign Image" class=dd-item><a href=/securesupplychain/2023-06-20-securesupplychain-step5/>Step 5 - Build and Sign Image</a></li><li data-nav-id=/securesupplychain/2023-06-21-securesupplychain-step6/ title="Step 6 - Scanning with ACS" class=dd-item><a href=/securesupplychain/2023-06-21-securesupplychain-step6/>Step 6 - Scanning with ACS</a></li><li data-nav-id=/securesupplychain/2023-06-22-securesupplychain-step7/ title="Step 7 - Generating a SBOM" class=dd-item><a href=/securesupplychain/2023-06-22-securesupplychain-step7/>Step 7 - Generating a SBOM</a></li><li data-nav-id=/securesupplychain/2023-06-23-securesupplychain-step8/ title="Step 8 - Updating Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-23-securesupplychain-step8/>Step 8 - Updating Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-24-securesupplychain-step9/ title="Step 9 - Linting Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-24-securesupplychain-step9/>Step 9 - Linting Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-25-securesupplychain-step10/ title="Step 10 - The Example Application" class=dd-item><a href=/securesupplychain/2023-06-25-securesupplychain-step10/>Step 10 - The Example Application</a></li><li data-nav-id=/securesupplychain/2023-06-26-securesupplychain-step11/ title="Step 11 - ACS Deployment Check" class=dd-item><a href=/securesupplychain/2023-06-26-securesupplychain-step11/>Step 11 - ACS Deployment Check</a></li><li data-nav-id=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature" class=dd-item><a href=/securesupplychain/2023-06-27-securesupplychain-step12/>Step 12 - Verify TLog Signature</a></li><li data-nav-id=/securesupplychain/2023-06-28-securesupplychain-step13/ title="Step 13 - Bring it to Production" class=dd-item><a href=/securesupplychain/2023-06-28-securesupplychain-step13/>Step 13 - Bring it to Production</a></li></ul></li><li data-nav-id=/compliance/ title=Compliance class=dd-item><a href=/compliance/>Compliance</a><ul><li data-nav-id=/compliance/2021/07/oc-compliance-command-line-plugin/ title="oc compliance command line plugin" class=dd-item><a href=/compliance/2021/07/oc-compliance-command-line-plugin/>oc compliance command line plugin</a></li><li data-nav-id=/compliance/2021/07/compliance-operator/ title="Compliance Operator" class=dd-item><a href=/compliance/2021/07/compliance-operator/>Compliance Operator</a></li></ul></li><li data-nav-id=/service-mesh/ title="Service Mesh" class=dd-item><a href=/service-mesh/>Service Mesh</a><ul><li data-nav-id=/service-mesh/2020/05/enable-automatic-route-creation/ title="Enable Automatic Route Creation" class=dd-item><a href=/service-mesh/2020/05/enable-automatic-route-creation/>Enable Automatic Route Creation</a></li><li data-nav-id=/service-mesh/2020/05/authorization-rbac/ title="Authorization (RBAC)" class=dd-item><a href=/service-mesh/2020/05/authorization-rbac/>Authorization (RBAC)</a></li><li data-nav-id=/service-mesh/2020/04/deploy-example-bookinfo-application/ title="Deploy Example Bookinfo Application" class=dd-item><a href=/service-mesh/2020/04/deploy-example-bookinfo-application/>Deploy Example Bookinfo Application</a></li><li data-nav-id=/service-mesh/2020/04/service-mesh-1.1-released/ title="Service Mesh 1.1 released" class=dd-item><a href=/service-mesh/2020/04/service-mesh-1.1-released/>Service Mesh 1.1 released</a></li><li data-nav-id=/service-mesh/2020/04/authentication-jwt/ title="Authentication JWT" class=dd-item><a href=/service-mesh/2020/04/authentication-jwt/>Authentication JWT</a></li><li data-nav-id=/service-mesh/2020/04/mutual-tls-authentication/ title="Mutual TLS Authentication" class=dd-item><a href=/service-mesh/2020/04/mutual-tls-authentication/>Mutual TLS Authentication</a></li><li data-nav-id=/service-mesh/2020/04/fault-injection/ title="Fault Injection" class=dd-item><a href=/service-mesh/2020/04/fault-injection/>Fault Injection</a></li><li data-nav-id=/service-mesh/2020/04/limit-egress/external-traffic/ title="Limit Egress/External Traffic" class=dd-item><a href=/service-mesh/2020/04/limit-egress/external-traffic/>Limit Egress/External Traffic</a></li><li data-nav-id=/service-mesh/2020/04/advanced-routing-example/ title="Advanced Routing Example" class=dd-item><a href=/service-mesh/2020/04/advanced-routing-example/>Advanced Routing Example</a></li><li data-nav-id=/service-mesh/2020/04/routing-example/ title="Routing Example" class=dd-item><a href=/service-mesh/2020/04/routing-example/>Routing Example</a></li><li data-nav-id=/service-mesh/2020/03/ingress-with-custom-domain/ title="Ingress with custom domain" class=dd-item><a href=/service-mesh/2020/03/ingress-with-custom-domain/>Ingress with custom domain</a></li><li data-nav-id=/service-mesh/2020/03/ingress-traffic/ title="Ingress Traffic" class=dd-item><a href=/service-mesh/2020/03/ingress-traffic/>Ingress Traffic</a></li><li data-nav-id=/service-mesh/2020/03/deploy-microservices/ title="Deploy Microservices" class=dd-item><a href=/service-mesh/2020/03/deploy-microservices/>Deploy Microservices</a></li><li data-nav-id=/service-mesh/2020/03/installation/ title=Installation class=dd-item><a href=/service-mesh/2020/03/installation/>Installation</a></li></ul></li><li data-nav-id=/general/ title=General class=dd-item><a href=/general/>General</a><ul><li data-nav-id=/general/2020/05/basic-usage-of-git/ title="Basic usage of git" class=dd-item><a href=/general/2020/05/basic-usage-of-git/>Basic usage of git</a></li><li data-nav-id=/general/2020/04/red-hat-satellite-cheat-sheet/ title="Red Hat Satellite Cheat Sheet" class=dd-item><a href=/general/2020/04/red-hat-satellite-cheat-sheet/>Red Hat Satellite Cheat Sheet</a></li></ul></li><li data-nav-id=/ansible/ title=Ansible class=dd-item><a href=/ansible/>Ansible</a><ul><li data-nav-id=/ansible/2021/11/ansible-style-guide/ title="Ansible Style Guide" class=dd-item><a href=/ansible/2021/11/ansible-style-guide/>Ansible Style Guide</a></li><li data-nav-id=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" class=dd-item><a href=/ansible/2021/10/automation-controller-and-ldap-authentication/>Automation Controller and LDAP Authentication</a></li><li data-nav-id=/ansible/2021/07/ansible-tower-and-downloading-collections/ title="Ansible Tower and downloading collections" class=dd-item><a href=/ansible/2021/07/ansible-tower-and-downloading-collections/>Ansible Tower and downloading collections</a></li><li data-nav-id=/ansible/2020/04/ansible-azure-resource-manager-example/ title="Ansible - Azure Resource Manager Example" class=dd-item><a href=/ansible/2020/04/ansible-azure-resource-manager-example/>Ansible - Azure Resource Manager Example</a></li><li data-nav-id=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ title="DO410 Ansible and Ansible Tower training notes" class=dd-item><a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/>DO410 Ansible and Ansible Tower training notes</a></li></ul></li><li data-nav-id=/acs/ title="Advanced Cluster Security" class=dd-item><a href=/acs/>Advanced Cluster Security</a><ul><li data-nav-id=/acs/2021-12-11-acsauth/ title="Advanced Cluster Security - Authentication" class=dd-item><a href=/acs/2021-12-11-acsauth/>Advanced Cluster Security - Authentication</a></li></ul></li><li data-nav-id=/azure/ title=Azure class=dd-item><a href=/azure/>Azure</a><ul><li data-nav-id=/azure/2021-10-29-private-aro/ title="Stumbling into Azure Part II: Setting up a private ARO cluster" class=dd-item><a href=/azure/2021-10-29-private-aro/>Stumbling into Azure Part II: Setting up a private ARO cluster</a></li><li data-nav-id=/azure/2021-10-17-s2s-vpn/ title="Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing" class=dd-item><a href=/azure/2021-10-17-s2s-vpn/>Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing</a></li></ul></li><li data-nav-id=/java/ title=Java class=dd-item><a href=/java/>Java</a><ul><li data-nav-id=/java/2022-02-25-jpa-disconnected-entity/ title="Adventures in Java Land: JPA disconnected entities" class=dd-item><a href=/java/2022-02-25-jpa-disconnected-entity/>Adventures in Java Land: JPA disconnected entities</a></li></ul></li><li data-nav-id=/quay/ title=Quay class=dd-item><a href=/quay/>Quay</a><ul><li data-nav-id=/quay/2021-09-07-quay-upgrade-3.4/ title="Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator" class=dd-item><a href=/quay/2021-09-07-quay-upgrade-3.4/>Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator</a></li><li data-nav-id=/quay/2020-05-13-quay-tutorial1/ title="Red Hat Quay Registry - Overview and Installation" class=dd-item><a href=/quay/2020-05-13-quay-tutorial1/>Red Hat Quay Registry - Overview and Installation</a></li></ul></li><li data-nav-id=/legaldisclosure/ title="Legal Disclosure" class=dd-item><a href=/legaldisclosure/>Legal Disclosure</a></li><li data-nav-id=/rss/ title="RSS Feeds" class=dd-item><a href=/rss/>RSS Feeds</a></li></ul><section id=footer></section></div></nav><section id=body class=post-content><div id=overlay></div><aside id=toc-field class="hidden lg:block tableOfContentContainer"><header id=TableOfContentsHeader>What's on this Page</header><nav id=TableOfContents><ul><li><a href=#_prerequisites>Prerequisites</a></li><li><a href=#_adding_approver_policy_chart_as_a_dependency>Adding Approver Policy Chart as a dependency</a></li><li><a href=#_configuration_of_the_helm_chart>Configuration of the Helm Chart</a><ul><li><a href=#_disabling_cert_managers_auto_approver>Disabling Cert-Manager’s Auto-Approver</a></li><li><a href=#_configuration_of_the_approver_policy>Configuration of the Approver Policy</a></li></ul></li><li><a href=#_creating_a_certificaterequestpolicy_and_rolebinding>Creating a CertificateRequestPolicy and Role(Binding)</a><ul><li><a href=#_rendered_certificaterequestpolicy_and_rolebinding>Rendered CertificateRequestPolicy and Role(Binding)</a></li></ul></li><li><a href=#_testing_the_policy>Testing the Policy</a><ul><li><a href=#_test_1_valid_certificate_request>Test 1 - Valid Certificate Request</a></li><li><a href=#_test_2_invalid_certificate_request>Test 2 - Invalid Certificate Request</a></li></ul></li><li><a href=#_ok_we_have_a_policy_but_whats_next>Ok we have a policy, but whats next?</a></li><li><a href=#_conclusion>Conclusion</a></li></ul></nav><div id=navigation><a class=nav-prev href=/openshift/ title=OpenShift><i class="fa fa-chevron-left"></i></a>
<a class=nav-next href=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/ title="Single log out from Keycloak and OpenShift" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></aside><div class="padding highlightable"><header><div id=top-nav class=margin-bottom-15><section id=homelinks class=text-align-center><ul class="list-no-style margin-0 padding-0 overflow-hidden text-align-left vertical-align-middle"><li class="list-horizontal padding-left-15 padding-right-15"><a class=padding-topnav href=/><i class='fas fa-home'></i> Home</a></li><li class="dropdown list-horizontal left padding-left-15 padding-right-15"><div class="submenu left static inline-block"><a class=padding-topnav href=https://blog.stderr.at/authors><svg stroke="currentcolor" fill="#d2d2d2" stroke-width="0" viewBox="0 0 17 17" class="relative z-20 h-6 w-6" height="1em" width="1em"><g/><path d="M16.499 1.843 15.096.44c-.566-.566-1.555-.566-2.122.0L5.438 7.976l-1.722 5.287 5.249-1.765 7.534-7.534c.283-.283.439-.66.439-1.061s-.156-.777-.439-1.06zM5.584 10.758l.638-1.957 1.92 1.919-1.942.653-.616-.615zM6.832 7.996l3.986-3.986 2.11 2.11-3.986 3.986-2.11-2.11zm4.693-4.693.729-.729 2.11 2.11-.729.729-2.11-2.11zM15.792 3.257l-.72.721-2.11-2.11.72-.721c.19-.189.519-.189.707.0l1.403 1.403c.094.095.146.22.146.354s-.052.258-.146.353zM15 7.5h1V17H0V2h7.5v1H1v13h14V7.5z"/></svg> About Us<i class='fa fa-chevron-down padding-left-25rem' '></i></a><div class="absolute submenu-div"><a href=/authors/thomas-jungbauer class="submenu-style submenu-link display-block"><i></i>Thomas Jungbauer</a>
<a href=/authors/toni-schmidbauer class="submenu-style submenu-link display-block"><i></i>Toni Schmidbauer</a>
<a href=/legaldisclosure class="submenu-style submenu-link display-block"><i></i>Legal Disclosure</a></div></div></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/categories><i class='far fa-bookmark padding-right-25rem'></i> Catagories</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/tags><i class='fas fa-tags padding-right-25rem'></i> Tags</a></li><li class="list-horizontal left padding-left-15 padding-right-15"><a class=padding-topnav href=https://blog.stderr.at/archive><i class='fas fa-box padding-right-25rem'></i> History</a></li><li class="list-horizontal right padding-left-15 padding-right-15"><a class=padding-topnav href=https://charts.stderr.at/><svg class="list-horizontal padding-right-25rem" fill="#d2d2d2" width="28" height="28" viewBox="0 0 256 297" class="mr-3 h-7 w-7 fill-current text-omega-500"><path d="m60.349 70.537-.811-.767a77.726 77.726.0 01-.278-.266c-7.589-7.29-13.462-15.721-17.01-25.685-.951-2.673-1.68-5.397-1.621-8.262l.012-.375c.012-.285.011-.571.031-.856.268-3.877 2.863-5.836 6.652-4.918 1.195.31 2.351.753 3.447 1.321 4.007 2.01 7.297 4.948 10.317 8.185l.312.336a67.685 67.685.0 0113.066 20.108c.068.177.146.35.234.518a.308.308.0 00.061.074l.212.181.064.057a106.079 106.079.0 0148.733-14.954l-.043-.218-.112-.585a11.87 11.87.0 00-.073-.35l-.041-.17a67.666 67.666.0 01-1.596-22.23 50.571 50.571.0 012.674-13.09 18.838 18.838.0 013.294-6.118 9.436 9.436.0 011.902-1.697 4.226 4.226.0 014.832-.034 10.393 10.393.0 013.513 4.049 31.912 31.912.0 013.165 8.828 67.672 67.672.0 011.277 19.852 57.502 57.502.0 01-2.1 11.976c.714.132 1.428.258 2.14.382l3.2.552c2.481.43 4.946.88 7.38 1.458a112.29 112.29.0 0112.296 3.611c4.059 1.49 8.03 3.211 11.891 5.155 2.227 1.11 4.39 2.346 6.564 3.612l1.866 1.09c.936.548 1.877 1.096 2.829 1.637l.08-.163.178-.354c.06-.125.118-.254.167-.387a65.359 65.359.0 0119.79-28.128 22.711 22.711.0 017.11-4.14c.717-.25 1.46-.42 2.213-.508 3.768-.431 5.35 1.94 5.628 4.771a18.011 18.011.0 01-.465 6.228 52.875 52.875.0 01-6.147 14.357l-.308.493c-3.982 6.435-8.69 12.247-14.633 16.98l-.46.362a2.62 2.62.0 00-.12.1l-.192.177-.24.228-.098.09a106.935 106.935.0 0115.996 18.576 6.594 6.594.0 01-1.016.179c-6.373.01-12.746-.011-19.12.028a2.408 2.408.0 01-1.908-1.017 88.947 88.947.0 00-53.039-27.999 86.23 86.23.0 00-17.453-.75l-.76.047a88.064 88.064.0 00-49.207 18.785l-.44.349a84.25 84.25.0 00-10.21 9.529 2.844 2.844.0 01-2.324 1.057 1482.46 1482.46.0 00-10.958-.026l-8.6.005c.029-.111.077-.245.144-.398l.09-.193a7.07 7.07.0 01.107-.211l.123-.23.14-.245.157-.262.171-.277.186-.292.306-.464.337-.493.241-.343.384-.535.134-.183.419-.564.292-.386.302-.394.472-.604.491-.616.338-.418.346-.42.352-.425.36-.426.365-.428.558-.644.378-.43.382-.428.386-.426.39-.425c1.896-2.049 3.859-4.036 5.86-6.045l2.013-2.019c.675-.677 1.353-1.36 2.033-2.052zm155.187 136.407a106.248 106.248.0 01-14.42 16.339l1.12.933a65.151 65.151.0 0120.26 28.96 20.823 20.823.0 011.325 8.673 8.954 8.954.0 01-.363 1.95l-.087.271a4.335 4.335.0 01-4.907 3.021 13.373 13.373.0 01-4.067-1.206 30.816 30.816.0 01-5.523-3.498 64.717 64.717.0 01-19.627-27.589l-.262-.713-.357-.922a117.082 117.082.0 01-15.045 8.426 109.274 109.274.0 01-16.052 5.85 112.816 112.816.0 01-17.025 3.24l.078.41.07.373c.023.12.047.234.073.348l.042.168a65.667 65.667.0 011.787 21.92 48.604 48.604.0 01-2.66 13.52 47.067 47.067.0 01-2.505 5.26 8.054 8.054.0 01-1.407 1.788c-2.394 2.471-5.253 2.492-7.586-.045a16.409 16.409.0 01-2.35-3.379c-1.85-3.474-2.803-7.252-3.483-11.104a70.293 70.293.0 01-.818-15.918 56.83 56.83.0 011.568-10.873l.167-.667c.085-.32.162-.644.224-.969a.292.292.0 00-.015-.132l-.067-.23a3.701 3.701.0 01-.021-.082A105.937 105.937.0 0174.9 236.033l-.56 1.24-.102.231a66.452 66.452.0 01-18.164 24.56l-.423.355a22.954 22.954.0 01-7.247 4.186 7.272 7.272.0 01-3.919.42 4.282 4.282.0 01-3.19-2.55l-.06-.15c-.783-1.894-.718-3.859-.478-5.815l.067-.51a33.355 33.355.0 012.59-8.572 67.669 67.669.0 0115.947-22.714l.556-.52c.093-.086.184-.173.275-.262.086-.124.16-.256.22-.394A107.611 107.611.0 0143.287 206.7l.19-.017.65-.062c.193-.018.369-.03.545-.03 5.06-.005 10.12.009 15.179-.008l3.794-.018a2.83 2.83.0 012.228.978 88.388 88.388.0 0023.1 17.07l.6.304a84.178 84.178.0 0029.898 8.887c28.343 2.755 52.723-5.838 73.142-25.777a4.599 4.599.0 013.605-1.47c2.947.036 5.896.044 8.844.042l5.896-.01 2.949-.002h1.523l.106.356zm-26.342-90.316c.373.0.742.006 1.109.013l1.093.022c.724.013 1.439.015 2.148-.026l.531-.039c1.802-.163 3.091.481 4.405 1.692 6.323 5.826 12.7 11.592 19.071 17.364l3.966 3.595.45.4.675.595.799-.68c.171-.147.339-.293.503-.443a19230.8 19230.8.0 0023.608-21.525 3.277 3.277.0 012.362-.995l.167.005c1.21.049 2.422.045 3.66.036l1.498-.011c.252-.002.506-.003.761-.003v63.38a.948.948.0 01-.097.021l-.14.02-.18.02-.22.02-.255.017-.447.026-.897.037-1.06.032-1.188.025-1.817.025-1.639.01-1.653.002-1.082-.005-1.3-.013-.978-.015-.686-.015-.637-.017-.762-.028-.496-.024-.424-.027-.239-.02-.2-.02a4.685 4.685.0 01-.087-.012l-.141-.022v-32.098l-.323-.153-16.383 14.942-16.516-14.879-.316.116-.007 2.679v29.509h-16.497c-.016-.053-.031-.251-.046-.58l-.017-.455-.017-.575-.024-1.076-.023-1.314-.03-2.093-.033-3.101-.047-5.884-.032-5.84-.027-7.156-.017-8.245-.002-5.379.009-6.732.013-3.813.023-4.033.025-2.81.025-1.825.022-1.095.015-.588.017-.47.018-.345c.003-.046.006-.088.01-.124zm-152.24.073h16.398c.013.042.026.18.039.406l.018.404.018.53.016.652.025 1.19.036 2.508.027 2.424.028 3.479.037 6.391.017 4.372.018 8.267.003 5.583-.006 6.347-.01 4.294-.02 4.749-.022 3.515-.035 3.555-.02 1.461-.014.844-.016.732-.017.616-.017.494-.018.365c-.01.15-.02.25-.03.295H36.996a277.08 277.08.0 01-.048-6.9l.009-3.445-.001-1.722-.004-1.707-.002-3.422.003-6.924H16.63v23.904a1.2 1.2.0 01-.116.027l-.162.026-.205.024-.383.035-.303.021-.706.04-.61.025-.904.03-.737.02-1.043.02-1.66.022-1.716.01H6.66l-1.384-.009-1.551-.022-.939-.02-.84-.027-.553-.024-.329-.017-.293-.019-.367-.03a7.294 7.294.0 01-.103-.011l-.172-.023a1.687 1.687.0 01-.128-.024v-63.324h16.564v22.37a.972.972.0 00.096.02l.138.021.177.02.336.028.415.026.665.033.576.022.635.02 1.423.036 1.864.032 1.135.014 1.761.014 1.789.006 2.343-.005 1.395-.01 1.308-.017 1.193-.022 1.05-.028.88-.035.433-.023.357-.026.192-.02a.93.93.0 00.08-.009l.133-.02.012-4.084.003-1.375.002-2.853-.002-14.142zm36.054 63.45v-63.262c.03-.01.09-.02.18-.028l.22-.018.14-.01.525-.025.682-.025.826-.024 1.308-.029 1.52-.027 1.704-.025 4.374-.046 2.123-.016 5.002-.026 3.952-.01 4.384.002 3.563.012 2.737.019 1.99.022 1.67.028.567.013.732.021.58.024.296.017.22.018.08.01v13.482c-.528.038-1.073.11-1.619.111l-9.63.007-11.413-.002v10.487h20.058v13.95h-19.88a3.407 3.407.0 00-.078.448l-.03.255-.026.294-.037.505-.023.375-.03.615-.026.666-.027.951-.016.747-.01.764-.008 1.028.003 1.264.008.73.009.467.01.45.021.632.026.573.02.345.022.311.025.274.014.122c.508.035 1.052.102 1.597.103l9.63.007 11.415-.002v13.426h-39.38zm58.17.024a5.015 5.015.0 01-.035-.479l-.016-.437-.015-.562-.014-.68-.02-1.231-.018-1.466-.03-3.56-.02-3.516-.019-5.581-.01-7.949.006-10.192.022-8.11.03-6.587.03-4.327.03-3.08.026-2.056.014-.877.022-1.109.016-.594.016-.472.017-.343c.009-.138.017-.226.026-.26h16.338v46.775l.503.03.46.028.431.023c.14.005.279.009.417.009l9.701.005 11.45-.001v16.6h-39.358z"/></svg> Helm Charts</a></li></ul></section><div class=sub-top-nav><div id=breadcrumbs class="display-inline float-unset" itemscope itemtype=http://schema.org/BreadcrumbList><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"><p class=hide>&nbsp;navi</p></i></a></span><span id=toc-menu><i class="fas fa-list-alt"><span class=hidden-toc>navigation</span></i></span>
<span class=links><span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/><span itemprop=name>YAUB Yet Another Useless Blog</span><meta itemprop=position content='1'></a></span> > <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/openshift/><span itemprop=name>OpenShift</span><meta itemprop=position content='2'></a></span> > Cert-Manager Policy Approver in OpenShift</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#_prerequisites>Prerequisites</a></li><li><a href=#_adding_approver_policy_chart_as_a_dependency>Adding Approver Policy Chart as a dependency</a></li><li><a href=#_configuration_of_the_helm_chart>Configuration of the Helm Chart</a><ul><li><a href=#_disabling_cert_managers_auto_approver>Disabling Cert-Manager’s Auto-Approver</a></li><li><a href=#_configuration_of_the_approver_policy>Configuration of the Approver Policy</a></li></ul></li><li><a href=#_creating_a_certificaterequestpolicy_and_rolebinding>Creating a CertificateRequestPolicy and Role(Binding)</a><ul><li><a href=#_rendered_certificaterequestpolicy_and_rolebinding>Rendered CertificateRequestPolicy and Role(Binding)</a></li></ul></li><li><a href=#_testing_the_policy>Testing the Policy</a><ul><li><a href=#_test_1_valid_certificate_request>Test 1 - Valid Certificate Request</a></li><li><a href=#_test_2_invalid_certificate_request>Test 2 - Invalid Certificate Request</a></li></ul></li><li><a href=#_ok_we_have_a_policy_but_whats_next>Ok we have a policy, but whats next?</a></li><li><a href=#_conclusion>Conclusion</a></li></ul></nav></div></div><div class=social><a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2025%2f06%2fcert-manager-policy-approver-in-openshift%2f" class="facebook no-highlight" aria-label="share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-facebook" width="24" height="24" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&amp;url=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2025%2f06%2fcert-manager-policy-approver-in-openshift%2f&amp;text=Cert-Manager%20Policy%20Approver%20in%20OpenShift" class="twitter no-highlight" aria-label="share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-x" width="100" height="100" viewBox="0 0 30 30"><path d="M26.37 26l-8.795-12.822.015.012L25.52 4h-2.65l-6.46 7.48L11.28 4H4.33l8.211 11.971L12.54 15.97 3.88 26h2.65l7.182-8.322L19.42 26h6.95zM10.23 6l12.34 18h-2.1L8.12 6h2.11z"/></svg></div></div></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2025%2f06%2fcert-manager-policy-approver-in-openshift%2f&amp;source=https%3a%2f%2fblog.stderr.at%2fopenshift%2f2025%2f06%2fcert-manager-policy-approver-in-openshift%2f&amp;title=Cert-Manager%20Policy%20Approver%20in%20OpenShift&amp;summary=Cert-Manager%20Policy%20Approver%20in%20OpenShift" class="linkedin no-highlight" aria-label="share on Linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg></div></div></a><a href="whatsapp://send?text=Cert-Manager%20Policy%20Approver%20in%20OpenShift%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aHow%20to%20configure%20Cert-Manager%20Approver%20Policy%20in%20OpenShift%0a%0ahttps%3a%2f%2fblog.stderr.at%2fopenshift%2f2025%2f06%2fcert-manager-policy-approver-in-openshift%2f%0a" class="whatsapp no-highlight" aria-label="share on Whatsapp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a href="mailto:?subject=TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more - Cert-Manager%20Policy%20Approver%20in%20OpenShift.&amp;body=Cert-Manager%20Policy%20Approver%20in%20OpenShift%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aHow%20to%20configure%20Cert-Manager%20Approver%20Policy%20in%20OpenShift%0a%0ahttps%3a%2f%2fblog.stderr.at%2fopenshift%2f2025%2f06%2fcert-manager-policy-approver-in-openshift%2f%0a" class="email no-highlight" aria-label="share on Email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg></div></div></a><a href=/rss/ class="rss no-highlight" aria-label=RSS><div class="resp-sharing-button resp-sharing-button--rss resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.731 455.731"><g><rect x="0" y="0" style="fill:transparent" width="455.731" height="455.731"/><g><path style="" d="M296.208 159.16C234.445 97.397 152.266 63.382 64.81 63.382v64.348c70.268.0 136.288 27.321 185.898 76.931 49.609 49.61 76.931 115.63 76.931 185.898h64.348C391.986 303.103 357.971 220.923 296.208 159.16z"/><path style="" d="M64.143 172.273v64.348c84.881.0 153.938 69.056 153.938 153.939h64.348c0-120.364-97.922-218.287-218.286-218.287z"/><circle style="" cx="109.833" cy="346.26" r="46.088"/></g></g></svg></div></div></a></div></div></div></header><div id=head-tags><div class=tags><a class=tag-link href=/tags/openshift>OpenShift</a>
<a class=tag-link href=/tags/ocp>OCP</a>
<a class=tag-link href=/tags/security>Security</a>
<a class=tag-link href=/tags/cert-manager>Cert-Manager</a>
<a class=tag-link href=/tags/certificate>Certificate</a>
<a class=tag-link href=/tags/certificaterequestpolicy>CertificateRequestPolicy</a>
<a class=tag-link href=/tags/approver-policy>Approver Policy</a></div></div><div id=body-inner><h1 class="gradient-header article">Cert-Manager Policy Approver in OpenShift</h1><div class="catagories tracked"><a id=textElement class="category-link no-highlight" href=/categories/openshift>OpenShift</a>
<a id=textElement class="category-link no-highlight" href=/categories/security>Security</a>
<a id=textElement class="category-link no-highlight" href=/categories/cert-manager>Cert-Manager</a></div><p class=tracked><time class="f6 mv4 dib tracked" datetime=2025-06-03T00:00:00Z><strong>June 3, 2025</strong>
</time><span class=divider>-
</span><span class=author><a href=/authors/thomas-jungbauer><img class=avatar src=/img/authors/thomas-jungbauer.png alt="Thomas Jungbauer">
Thomas Jungbauer
</a>( Lastmod: 2025-06-04 )
</span><span class=divider>-
</span><span class=readtime><strong>9 min read</strong></span></p><div class="pr3-ns mb4 mb0-ns w-100 w-40-ns"><a href=/openshift/2025/06/cert-manager-policy-approver-in-openshift/><img src=https://blog.stderr.at/openshift/images/cert-manager/cert-approver-policy-header-image-small.jpg class="img featured-img" style=box-shadow:none alt="image from Cert-Manager Policy Approver in OpenShift"></a></div><div class=paragraph><p>One of the most commonly deployed operators in OpenShift environments is the <strong>Cert-Manager Operator</strong>. It automates the management of TLS certificates for applications running within the cluster, including their issuance and renewal.</p></div><div class=paragraph><p>The tool supports a variety of certificate issuers by default, including ACME, Vault, and self-signed certificates. Whenever a certificate is needed, Cert-Manager will automatically create a CertificateRequest resource that contains the details of the certificate. This resource is then processed by the appropriate issuer to generate the actual TLS certificate. The approval process in this case is usually fully automated, meaning that the certificate is issued without any manual intervention.</p></div><div class=paragraph><p>But what if you want to have more control? What if certificate issuance must follow strict organizational policies, such as requiring a specifc country code or organization name?
This is where the <strong>CertificateRequestPolicy</strong> resource, a resource provided by the Approver Policy, comes into play.</p></div><div class=paragraph><p>This article walks through configuring the <strong>Cert-Manager Approver Policy</strong> in OpenShift to enforce granular policies on certificate requests.</p></div><div class=sect1><h2 id=_prerequisites>Prerequisites</h2><div class=sectionbody><div class=paragraph><p>Before you begin, ensure you have the following:</p></div><div class=ulist><ul><li><p>OpenShift 4.16 or higher with cluster-admin access</p></li><li><p>Cert-Manager Operator installed</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>The installation of Cert-Manager itself is discussed in the article: <a href=/gitopscollection/2024-07-04-managing-certificates-with-gitops/>Managing Certificates using GitOps approach</a>.</td></tr></tbody></table></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content>The Cert-Manager Operator does not currently support the Approver Policy by default. You need to install the Approver Policy manually using a Helm Chart. There is a feature request to include the Approver Policy in the Cert-Manager Operator in the future.</td></tr></tbody></table></div></div></div><div class=sect1><h2 id=_adding_approver_policy_chart_as_a_dependency>Adding Approver Policy Chart as a dependency</h2><div class=sectionbody><div class=paragraph><p>Source: <a href=https://github.com/tjungbauer/openshift-clusterconfig-gitops/tree/main/clusters/management-cluster/cert-manager target=_blank rel=noopener>Cert-Manager Deployment</a></p></div><div class=paragraph><p>The above Chart contains the necessary resources to deploy the Cert-Manager itself and Cert-Manager Approver Policy in OpenShift.
To deploy the Approver Policy alongside Cert-Manager, add it as a dependency in your <strong>Chart.yaml</strong>:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>[...]
  - name: cert-manager-approver-policy
    version: v0.19.0
    repository: https://charts.jetstack.io
[...]</code></pre></div></div><div class=paragraph><p>This is the official Helm Chart for the Cert-Manager Approver Policy tool provided by Jetstack. The version used in this example is v0.19.0, but you can use a newer version if available.</p></div></div></div><div class=sect1><h2 id=_configuration_of_the_helm_chart>Configuration of the Helm Chart</h2><div class=sectionbody><div class=paragraph><p>The initial <a href=https://github.com/tjungbauer/openshift-clusterconfig-gitops/blob/main/clusters/management-cluster/cert-manager/values.yaml target=_blank rel=noopener>values.yaml</a> file was extended to:</p></div><div class=ulist><ul><li><p>include the configuration for the Approver Policy Chart</p></li><li><p>the configuration for a <strong>CertificateRequestPolicy</strong> object</p></li><li><p>with some specific modifications to the CertManager resource itself</p></li></ul></div><div class=sect2><h3 id=_disabling_cert_managers_auto_approver>Disabling Cert-Manager’s Auto-Approver</h3><div class=paragraph><p>The first step we need to do is to disable the auto-approver of the Cert-Manager. If this is not done, there will be a race condition between the auto-approver and the Approver Policy, which will lead to unexpected results.
These changes are done by:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>cert-manager:
  certManager:
    enable_patch: true <i class=conum data-value=1></i><b>(1)</b>

    unsupportedConfigOverrides:
      controller:
        args:
          - &#39;--controllers=*,-certificaterequests-approver&#39; <i class=conum data-value=2></i><b>(2)</b></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>This enables the patching of the CertManager resource, which tells the chart to overwrite (patch) the automatically generated CertManager resource with the custom configuration.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>This disables the auto-approver Controller of the Cert-Manager.</td></tr></tbody></table></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content>As the name suggests, this is currently an unsupported configuration, but it is necessary to disable the auto-approver for the Cert-Manager. In the future versions of the Cert-Manager, this might change, and the auto-approver might be supported out of the box.</td></tr></tbody></table></div><div class=paragraph><p>In my case, the full CertManager resource looks like this:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: operator.openshift.io/v1alpha1
kind: CertManager
metadata:
  annotations:
  name: cluster
spec:
  controllerConfig:
    overrideArgs: <i class=conum data-value=1></i><b>(1)</b>
      - &#39;--dns01-recursive-nameservers-only&#39;
      - &#39;--dns01-recursive-nameservers=ns-362.awsdns-45.com:53,ns-930.awsdns-52.net:53&#39;
  logLevel: Normal
  managementState: Managed
  operatorLogLevel: Normal
  unsupportedConfigOverrides: <i class=conum data-value=2></i><b>(2)</b>
    controller:
      args:
        - &#39;--controllers=*,-certificaterequests-approver&#39;</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Settings to support AWS Nameservers for DNS01 challenges.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>This disables the auto-approver Controller of the Cert-Manager.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_configuration_of_the_approver_policy>Configuration of the Approver Policy</h3><div class=paragraph><p>The second step is to configure the Approver Policy chart. This chart will deploy the necessary resources, most importantly a Deployment that will start the Pods which will process the CertificateRequestPolicy resources later on.</p></div><div class=paragraph><p>My configuration for that chart looks like this (some default values are omitted for brevity):</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>cert-manager-approver-policy:

  crds: <i class=conum data-value=1></i><b>(1)</b>
    # This option decides if the CRDs should be installed
    # as part of the Helm installation.
    enabled: true
    # This option makes it so that the &#34;helm.sh/resource-policy&#34;: keep
    # annotation is added to the CRD. This will prevent Helm from uninstalling
    # the CRD when the Helm release is uninstalled.
    # WARNING: when the CRDs are removed, all cert-manager-approver-policy custom resources
    # (CertificateRequestPolicy) will be removed too by the garbage collector.
    keep: true

  # Number of replicas of approver-policy to run.
  replicaCount: 1 <i class=conum data-value=2></i><b>(2)</b>

  image: <i class=conum data-value=3></i><b>(3)</b>
    # Target image repository.
    repository: quay.io/jetstack/cert-manager-approver-policy
    # Kubernetes imagePullPolicy on Deployment.
    pullPolicy: IfNotPresent
    tag: v0.19.0

  app:

    # List of signer names that approver-policy will be given permission to
    # approve and deny. CertificateRequests referencing these signer names can be
    # processed by approver-policy. Defaults to an empty array, allowing approval
    # for all signers.
    approveSignerNames: <i class=conum data-value=4></i><b>(4)</b>
      - &#39;issuers.cert-manager.io/*&#39;
      - &#39;clusterissuers.cert-manager.io/*&#39;</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>This enables the installation of the CRDs that are required for the Approver Policy.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>The number of replicas of the Approver Policy Deployment. In most cases, one replica is enough.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>The image configuration for the Approver Policy. The image is pulled from the Jetstack Quay.io repository.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>The list of signer names that the Approver Policy will be allowed to approve. In this case, it is configured to allow all issuers and clusterissuers.</td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>The approveSignerNames are, if configured, an important setting, especially if you want to add custom (cluster)issuers. In such a case, you need to add the name of the custom issuer to this list. Otherwise the Approver Policy will not be able to approve the CertificateRequests for that issuer.</td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=_creating_a_certificaterequestpolicy_and_rolebinding>Creating a CertificateRequestPolicy and Role(Binding)</h2><div class=sectionbody><div class=paragraph><p>The final step in our configuration is to define a <strong>CertificateRequestPolicy</strong> resource that will define the policy for the certificate requests. This resource will be processed by the Approver Policy and will determine if a certificate request is approved or denied based on the defined criteria.</p></div><div class=paragraph><p>The following example shows a CertificateRequestPolicy that will:</p></div><div class=ulist><ul><li><p>Allow certificate requests with any common name, DNS names, IP addresses, URIs, and email addresses.</p></li><li><p>Require DNS names to be set.</p></li><li><p>Require the subject to contain a specific organization (MyOrganization) and country code (AT).</p></li><li><p>Allow usages for server auth and client auth.</p></li><li><p>Set constraints for the certificate duration (1h-24h) and private key algorithm (RSA) and size (2048-4096).</p></li><li><p>Allow all issuers by using an empty selector.</p></li></ul></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>role: cert-manager-policy:global-approver <i class=conum data-value=1></i><b>(1)</b>
serviceAccount: cert-manager <i class=conum data-value=2></i><b>(2)</b>
cert_manager_Namespace: cert-manager <i class=conum data-value=3></i><b>(3)</b>

policies:
  - name: my-approver-policy
    enabled: true

    allowed:

      commonName:
        required: false
        value: &#34;*&#34;
        validations: []
      dnsNames: <i class=conum data-value=4></i><b>(4)</b>
        required: true
        values:
          - &#34;*&#34;
        validations: []
      ipAddresses:
        required: false
        values: [&#34;*&#34;]
        validations: []
      uris:
        required: false
        values:
          - &#34;*&#34;
        validations: []
      emailAddresses:
        required: false
        values:
          - &#34;*&#34;
        validations: []

      # isCA: false
      subject:
        organizations: <i class=conum data-value=5></i><b>(5)</b>
          required: true
          values:
            - &#34;MyOrganization&#34;
          validations:
            - rule: self.matches(&#34;MyOrganization&#34;)
              message: Organization must be MyOrganization
        countries:
          required: true
          values:
            - AT
          validations:
            - rule: self.matches(&#34;AT&#34;)
              message: Country code must be AT
      usages:
        - &#34;server auth&#34;
        - &#34;client auth&#34;

    constraints: <i class=conum data-value=6></i><b>(6)</b>
      minDuration: 1h
      maxDuration: 24h
      privateKey:
        algorithm: RSA
        minSize: 2048
        maxSize: 4096

    selector:
      issuerRef: {} <i class=conum data-value=7></i><b>(7)</b></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>The role that is used to approve the certificate requests. This role must be created in the OpenShift cluster and must have the necessary permissions to approve certificate requests.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>The service account that is used by the Approver Policy to process the certificate requests. This service account must have the necessary permissions to access the CertificateRequest resources.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>The namespace where the Cert-Manager is deployed. This is usually the <code>cert-manager</code> namespace, but you can change it if you have a different namespace.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>The DNS names are required to be set for the certificate request.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>The subject must contain the organization MyOrganization and the country code AT.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>The constraints for the certificate request, such as the minimum and maximum duration, private key algorithm, and size.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>The selector is empty, which means that the policy applies to all issuers. If you want to limit the policy to specific issuers, you can specify the issuerRef here.</td></tr></tbody></table></div><div class=sect2><h3 id=_rendered_certificaterequestpolicy_and_rolebinding>Rendered CertificateRequestPolicy and Role(Binding)</h3><div class=paragraph><p>The above configuration will create a CertificateRequestPolicy resource that looks like this:<div class=expand><div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><i style=font-size:x-small class="fas fa-chevron-right"></i>
<span><a>Expand me...</a></span></div><div class=expand-content style=display:none><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>---
# Source: cert-manager/templates/ClusterRole-Approver-Policy-approving.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: &#34;cert-manager-policy:global-approver&#34;
  labels:
    helm.sh/chart: cert-manager-2.0.0
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/managed-by: Helm
rules:
  - verbs:
      - use
    apiGroups:
      - policy.cert-manager.io
    resources:
      - certificaterequestpolicies
    resourceNames:
      - my-approver-policy
---
# Source: cert-manager/charts/cert-manager-approver-policy/templates/clusterrolebinding.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app.kubernetes.io/name: cert-manager-approver-policy
    helm.sh/chart: cert-manager-approver-policy-v0.19.0
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: &#34;v0.19.0&#34;
    app.kubernetes.io/managed-by: Helm
  name: cert-manager-approver-policy
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cert-manager-approver-policy
subjects:
- kind: ServiceAccount
  name: cert-manager-approver-policy
  namespace: default
---
# Source: cert-manager/templates/CertificateRequestPolicy.yaml
apiVersion: policy.cert-manager.io/v1alpha1
kind: CertificateRequestPolicy
metadata:
  name: my-approver-policy
  annotations:
    argocd.argoproj.io/sync-wave: &#34;10&#34;
  labels:
    helm.sh/chart: cert-manager-2.0.0
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/managed-by: Helm
spec:
  allowed:
    commonName:
      required: false
      value: &#34;*&#34;
      validations: []
    dnsNames:
      required: true
      values:
        - &#34;*&#34;
      validations: []
    emailAddresses:
      required: false
      values:
        - &#34;*&#34;
      validations: []
    ipAddresses:
      required: false
      values:
        - &#34;*&#34;
      validations: []
    uris:
      required: false
      values:
        - &#34;*&#34;
      validations: []
    isCA: false
    subject:
      organizations:
        required: true
        values:
          - &#34;MyOrganization&#34;
        validations:
          - rule: &#34;self.matches(\&#34;MyOrganization\&#34;)&#34;
            message: &#34;Organization must be MyOrganization&#34;
      countries:
        required: true
        values:
          - &#34;AT&#34;
        validations:
          - rule: &#34;self.matches(\&#34;AT\&#34;)&#34;
            message: &#34;Country code must be AT&#34;
      organizationalUnits:
        required: false
        values: [&#34;*&#34;]
        validations: []
      localities:
        required: false
        values: [&#34;*&#34;]
        validations: []
      provinces:
        required: false
        values: [&#34;*&#34;]
        validations: []
      streetAddresses:
        required: false
        values: [&#34;*&#34;]
        validations: []
      postalCodes:
        required: false
        values: [&#34;*&#34;]
        validations: []
      serialNumber:
        required: false
        value: &#34;*&#34;
        validations: []
    usages:
      - &#34;server auth&#34;
      - &#34;client auth&#34;
  constraints:
    minDuration: 1h
    maxDuration: 24h
    privateKey:
      algorithm: RSA
      minSize: 2048
      maxSize: 4096
  selector:
    issuerRef: {}</code></pre></div></div></div></div></p></div><div class=paragraph><p>One important note is about the ClusterRole and ClusterRoleBinding that are created by the Helm Chart. The role looks like the following and is required to allow the Approver Policy to approve certificate requests. This small bit, puzzled me for a while:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>rules:
  - verbs:
      - use
    apiGroups:
      - policy.cert-manager.io
    resources:
      - certificaterequestpolicies
    resourceNames:
      - my-approver-policy</code></pre></div></div><div class=paragraph><p>With the above configuration we are good to go. The Helm Chart can be deployed to the OpenShift cluster (for example, using Argo CD), and the CertificateRequestPolicy will be created automatically.</p></div><div class=paragraph><p>A new Pod is running in the <strong>cert-manager</strong> namespace:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-console data-lang=console>❯ oc get pods -n cert-manager | grep approver
NAME                                            READY   STATUS    RESTARTS   AGE
cert-manager-approver-policy-xxxxx   1/1   Running   0   XXm <i class=conum data-value=1></i><b>(1)</b></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>The Pod <code>cert-manager-approver-policy-xxxxx</code> is the Pod that is responsible for processing the CertificateRequestPolicy resources.</td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=_testing_the_policy>Testing the Policy</h2><div class=sectionbody><div class=sect2><h3 id=_test_1_valid_certificate_request>Test 1 - Valid Certificate Request</h3><div class=paragraph><p>Now it is time to test the policy. We need to create a Certificate and monitor the output of our approval pod.</p></div><div class=paragraph><p>As a reminder, the policy we created requires the following:</p></div><div class=ulist><ul><li><p>The subject must contain the organization MyOrganization</p></li><li><p>The subject must contain the country code AT.</p></li><li><p>The keysize must be at least 2048 bits. (max 4096 bits)</p></li><li><p>The duration must be between 1 hour and 24 hours.</p></li><li><p>The usage must be server auth or client auth.</p></li></ul></div><div class=paragraph><p>Let’s create this example Certificate in the <code>myproject</code> namespace:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: test-certificate1
  namespace: myproject
spec:
  dnsNames:
    - test1.apps.ocp.aws.ispworld.at
  duration: 24h
  issuerRef:
    kind: ClusterIssuer
    name: letsencrypt-prod
  privateKey:
    algorithm: RSA
    encoding: PKCS1
    rotationPolicy: Always
  secretName: test1
  subject:
    organizations:
      - MyOrganization
    countries:
      - AT
  usages:
    - server auth</code></pre></div></div><div class=paragraph><p>In the log of the Approver Policy Pod, we should see the following output:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-console data-lang=console>time=2025-06-03T16:07:58.656Z level=DEBUG+3 msg=&#34;Approved by CertificateRequestPolicy: \&#34;my-approver-policy\&#34;&#34; logger=controller-manager/events type=Normal object=&#34;{Kind:CertificateRequest Namespace:myproject Name:test-certificate1-1 [...]}&#34; reason=Approved</code></pre></div></div><div class=paragraph><p>This indicates that the CertificateRequest was approved by the Approver Policy. The policy was able to validate the subject, keysize, duration, and usage of the certificate request and approved it accordingly.
The certificate has been created successfully in the <strong>myproject</strong> namespace, and the secret <strong>test1</strong> contains the TLS certificate and private key.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>❯ oc get secret test1 -n myproject -o yaml
apiVersion: v1
data:
  tls.crt: ...
  tls.key: ...
kind: Secret
metadata:
  labels:
    controller.cert-manager.io/fao: &#34;true&#34;
  name: test1
  namespace: myproject
type: kubernetes.io/tls</code></pre></div></div></div><div class=sect2><h3 id=_test_2_invalid_certificate_request>Test 2 - Invalid Certificate Request</h3><div class=paragraph><p>That was easy, but what happens if we create a CertificateRequest that does not meet the policy requirements? Let’s try to create a Certificate without the required organization or a wrong country code:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: test-certificate2
  namespace: myproject
spec:
  dnsNames:
    - test2.apps.ocp.aws.ispworld.at
  duration: 24h
  issuerRef:
    kind: ClusterIssuer
    name: letsencrypt-prod
  privateKey:
    algorithm: RSA
    encoding: PKCS1
    rotationPolicy: Always
  secretName: test2
  subject: <i class=conum data-value=1></i><b>(1)</b>
    countries:
      - XX
  usages:
    - server auth</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>The subject does not contain the required organization MyOrganization and the country code is set to XX, which is not allowed by the policy.</td></tr></tbody></table></div><div class=paragraph><p>This will lead to the following error in the log of the Approver Policy Pod:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-console data-lang=console>time=2025-06-03T16:16:02.233Z level=DEBUG+3 msg=&#34;No policy approved this request: [my-approver-policy: [spec.allowed.subject.organizations.required: Required value: true, spec.allowed.subject.countries.values: Invalid value: []string{\&#34;XX\&#34;}: AT, spec.allowed.subject.countries.validations[0]: Invalid value: \&#34;XX\&#34;: Country code must be AT]]&#34; logger=controller-manager/events type=Warning object=&#34;{Kind:CertificateRequest Namespace:myproject Name:test-certificate2-1 ...&#34; reason=Denied</code></pre></div></div><div class=paragraph><p>It complains that the subject does not meet the policy requirements and therefore the CertificateRequest was denied.</p></div></div></div></div><div class=sect1><h2 id=_ok_we_have_a_policy_but_whats_next>Ok we have a policy, but whats next?</h2><div class=sectionbody><div class=paragraph><p>The above example shows how the Cert-Manager Approver Policy can be configured and deployed, even if it is not yet supported by the Cert-Manager Operator. However, we only scratched the surface of what is possible with the Approver Policy.
You can create more complex policies that include additional validations, such as checking the validity of the DNS names, IP addresses, or URIs. You can also create policies that require specific email addresses or organizational units in the subject.</p></div><div class=paragraph><p>You can even create fine-grained policies that apply to specific issuers or namespaces by using the <code>selector</code> field in the CertificateRequestPolicy resource. This allows you to create policies that are tailored to your specific requirements and use cases.</p></div><div class=paragraph><p>The best references can be found here:</p></div><div class=ulist><ul><li><p>Official documentation: <a href=https://cert-manager.io/docs/policy/approval/approver-policy/ target=_blank rel=noopener>Cert-Manager Approver Policy</a></p></li><li><p>Example Policies: <a href=https://github.com/cert-manager/approver-policy/tree/main/docs/examples target=_blank rel=noopener>Cert-Manager Approver Policy Examples</a></p></li></ul></div></div></div><div class=sect1><h2 id=_conclusion>Conclusion</h2><div class=sectionbody><div class=paragraph><p>The Cert-Manager Approver Policy is a powerful tool that allows you to implement custom policies for certificate requests in OpenShift. It provides a way to control the issuance of TLS certificates based on specific criteria, such as the subject, key size, duration, and usage of the certificate.
While not yet officially supported by the Cert-Manager Operator, it can be easily integrated into your OpenShift environment using a Helm Chart. Future support is currently being discussed, and it is expected that the Approver Policy will be included in the Cert-Manager Operator in the future.</p></div></div></div><hr class=related><div class=related-content><h3>See Also:</h3><ul><li class=related><a href=/gitopscollection/2025-07-17-common-template-application/>Reusable Argo CD Application Helm Template</a>
&ndash;
<time datetime=2025-07-17T00:00:00+0000><i>Jul 17, 2025</i></time><br><small><p class=related>When working with Argo CD at scale, you often find yourself creating similar Application manifests repeatedly. Each application needs the same basic structure but with different configurations for source repositories, destinations, and sync policies. Additionally, managing namespace metadata becomes tricky when you need to conditionally control whether Argo CD should manage namespace metadata based on sync options.
In this article, I’ll walk you through a reusable Helm template that solves these challenges by providing a flexible, DRY (Don’t Repeat Yourself) approach to creating Argo CD Applications. This template is available in my public Helm Chart library and can easily be used by anyone.</p></small></li><li class=related><a href=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/>Single log out from Keycloak and OpenShift</a>
&ndash;
<time datetime=2025-05-22T00:00:00+0000><i>May 22, 2025</i></time><br><small><p class=related>The following 1-minute article is a follow-up to my previous article about how to use Keycloak as an authentication provider for OpenShift. In this article, I will show you how to configure Keycloak and OpenShift for Single Log Out (SLO). This means that when you log out from Keycloak, you will also be logged out from OpenShift automatically. This requires some additional configuration in Keycloak and OpenShift, but it is not too complicated.</p></small></li><li class=related><a href=/openshift/2025/05/step-by-step-using-keycloak-authentication-in-openshift/>Step by Step - Using Keycloak Authentication in OpenShift</a>
&ndash;
<time datetime=2025-05-17T00:00:00+0000><i>May 17, 2025</i></time><br><small><p class=related>I was recently asked about how to use Keycloak as an authentication provider for OpenShift. How to install Keycloak using the Operator and how to configure Keycloak and OpenShift so that users can log in to OpenShift using OpenID. I have to admit that the exact steps are not easy to find, so I decided to write a blog post about it, describing each step in detail. This time I will not use GitOps, but the OpenShift and Keycloak Web Console to show the steps, because before we put it into GitOps, we need to understand what is actually happening.
This article tries to explain every step required so that a user can authenticate to OpenShift using Keycloak as an Identity Provider (IDP) and that Groups from Keycloak are imported into OpenShift. This article does not cover a production grade installation of Keycloak, but only a test installation, so you can see how it works. For production, you might want to consider a proper database (maybe external, but at least with a backup), high availability, etc.).</p></small></li><li class=related><a href=/gitopscollection/2025-04-17-applicationset-defining-namespaces/>Using ApplicationSet with Matrix Generator and define individual Namespaces</a>
&ndash;
<time datetime=2025-04-17T00:00:00+0000><i>Apr 17, 2025</i></time><br><small><p class=related>During my day-to-day business, I am discussing the following setup with many customers: Configure App-of-Apps. Here I try to explain how I use an ApplicationSet that watches over a folder in Git and automatically adds a new Argo CD Application whenever a new folder is found. This works great, but there is a catch: The ApplicationSet uses the same Namespace default for all Applications. This is not always desired, especially when you have different teams working on different Applications.
Recently I was asked by the customer if this can be fixed and if it is possible to define different Namespaces for each Application. The answer is yes, and I would like to show you how to do this.</p></small></li><li class=related><a href=/openshift/2024/11/introducing-adminnetworkpolicies/>Introducing AdminNetworkPolicies</a>
&ndash;
<time datetime=2024-11-06T00:00:00+0000><i>Nov 6, 2024</i></time><br><small><p class=related>Classic Kubernetes/OpenShift offer a feature called NetworkPolicy that allows users to control the traffic to and from their assigned Namespace. NetworkPolicies are designed to give project owners or tenants the ability to protect their own namespace. Sometimes, however, I worked with customers where the cluster administrators or a dedicated (network) team need to enforce these policies.
Since the NetworkPolicy API is namespace-scoped, it is not possible to enforce policies across namespaces. The only solution was to create custom (project) admin and edit roles, and remove the ability of creating, modifying or deleting NetworkPolicy objects. Technically, this is possible and easily done. But shifts the whole network security to cluster administrators.
Luckily, this is where AdminNetworkPolicy (ANP) and BaselineAdminNetworkPolicy (BANP) comes into play.</p></small></li></ul></div><footer class=footline></footer></div></div><div id=navigation-bottom><a class="readme-a margin-right-5 margin-bottom-2 inline-flex relative no-highlight" href=/openshift/ title=OpenShift><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-left btn-bottom-prev"></i>
<span class=btn-bottom-text></span> OpenShift</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a><a class="readme-a inline-flex relative no-highlight" href=/openshift/2025/05/single-log-out-from-keycloak-and-openshift/ title="Single log out from Keycloak and OpenShift" style=margin-right:0><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-right btn-bottom-next"></i>
<span class=btn-bottom-text></span> Single log out from Keycloak and OpenShift</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a></div><div class=copyright><p>Copyright &copy; 2020 - 2025 Toni Schmidbauer & Thomas Jungbauer</p></div></section><script>(function(){$("document").ready(function(){var s=$(".read-progress").waypoint({handler:function(e){e=="down"?($(".read-progress").addClass("position-fixed"),$(".read-progress").css("top",0)):($(".read-progress").removeClass("position-fixed"),$(".read-progress").css("top"))}}),t=$(window).height(),e=$(".post-content").height();$(window).on("scroll",n),$(window).on("resize",function(){t=$(window).height(),e=$(".post-content").height(),n()});function n(){var s=$(this).scrollTop(),o=$(".post-content").offset().top,i=e-(e-(t-(o-s))),n=i/e*100,n=n>100?100:n;$(".read-progress").width(n+"%")}})})()</script><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1753103057></script><script src=/js/perfect-scrollbar.jquery.min.js?1753103057></script><script src=/js/jquery.sticky.js?1753103057></script><script src=/js/featherlight.min.js?1753103057></script><script src=/js/highlight.pack.js?1753103057></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1753103057></script><script src=/js/learn.js?1753103057></script><script src=/js/hugo-learn.js?1753103057></script><script src=/js/yaub.js?1753103057></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target.getAttribute("id");e.intersectionRatio>0&&(clearActiveStatesInTableOfContents(),document.querySelector(`aside nav li a[href="#${t}"]`).parentElement.classList.add("active"))})});document.querySelectorAll("h1[id],h2[id],h3[id]").forEach(t=>{e.observe(t)})});function clearActiveStatesInTableOfContents(){document.querySelectorAll("aside nav li").forEach(e=>{e.classList.remove("active")})}</script><script type=text/javascript>function scrollTopAnimated(){$("html, body").animate({scrollTop:"0"},500)}</script><script>function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(".article-box").click(function(){return window.location=$(this).attr("href"),$this.stopPropagation(),!1})</script><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("a.category-link");e.forEach(function(e){var t=e.textContent.trim().toLowerCase();t==="openshift"&&e.classList.add("openshift"),t==="compliance"&&e.classList.add("compliance"),t==="service mesh"&&e.classList.add("mesh"),t==="security"&&e.classList.add("security"),t==="other"&&e.classList.add("other"),t==="ansible"&&e.classList.add("ansible"),t==="supply chain"&&e.classList.add("cicd"),t==="gitops"&&e.classList.add("gitops"),t==="advanced cluster security"&&e.classList.add("acs")})})</script></body></html>