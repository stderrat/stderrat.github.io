<!doctype html><html lang=en class=no-js><head><script>document.documentElement.className=document.documentElement.className.replace("no-js","js"),function(){var t,e=null;try{e=localStorage.getItem("yaub-theme")}catch{}t=e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"),document.documentElement.setAttribute("data-theme",t)}(),navigator.platform.toUpperCase().indexOf("MAC")>=0&&document.documentElement.classList.add("is-mac");var fontsCached,shown=!1;function showPage(){if(shown)return;shown=!0,document.documentElement.classList.remove("fonts-loading"),document.documentElement.classList.add("fonts-ready");try{localStorage.setItem("fonts-cached","1")}catch{}}fontsCached=!1;try{fontsCached=localStorage.getItem("fonts-cached")==="1"}catch{}fontsCached?(document.documentElement.classList.add("fonts-ready"),shown=!0):(document.documentElement.classList.add("fonts-loading"),document.fonts&&document.fonts.ready?(document.fonts.ready.then(showPage).catch(showPage),setTimeout(showPage,1e3)):setTimeout(showPage,800))</script><meta name=google-site-verification content="yq2Ib3doJVHVlEW2wtHap5WY54JhS2CCvI40y30F0FI"><meta name=color-scheme content="dark light"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=Content-Security-Policy content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://giscus.app https://pagefind.app;
        style-src 'self' 'unsafe-inline' https://giscus.app;
        img-src 'self' data: https: blob:;
        font-src 'self' data:;
        connect-src 'self' https://giscus.app https://charts.stderr.at;
        frame-src https://giscus.app;
        object-src 'none';
        base-uri 'self';
        form-action 'self';
    "><meta name=generator content="Hugo 0.152.2"><meta name=description content="Howto write and debug Ansible playbooks"><meta name=author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=keywords content="Ansible,Controller,Automation Controller,Style,StyleGuide,Best Practices,Playbook,Role"><meta name=title content="Ansible Style Guide"><meta name=robots content="index, follow"><meta charset=utf-8><meta name=language content="English"><link rel=canonical href=https://blog.stderr.at/ansible/2021/11/ansible-style-guide/><meta property="og:title" content="Ansible Style Guide"><meta property="og:description" content="Howto write and debug Ansible playbooks"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.stderr.at/ansible/2021/11/ansible-style-guide/"><meta property="og:site_name" content="TechBlog about OpenShift/Ansible/Satellite and much more"><meta property="og:image" content="https://blog.stderr.at/images/default-share.png"><meta property="article:published_time" content="2021-11-30T00:00:00Z"><meta property="article:modified_time" content="2025-12-18T11:12:01+01:00"><meta property="article:section" content="Ansible"><meta property="article:tag" content="Ansible"><meta property="article:tag" content="Controller"><meta property="article:tag" content="Automation Controller"><meta property="article:tag" content="Style"><meta property="article:tag" content="StyleGuide"><meta property="article:tag" content="Best Practices"><meta property="article:tag" content="Playbook"><meta property="article:tag" content="Role"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Ansible Style Guide"><meta name=twitter:description content="Howto write and debug Ansible playbooks"><meta name=twitter:image content="https://blog.stderr.at/images/default-share.png"><meta name=article:author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=article:tag content="technical blog, Ansible"><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","headline":"Ansible Style Guide","description":"Howto write and debug Ansible playbooks","url":"https:\/\/blog.stderr.at\/ansible\/2021\/11\/ansible-style-guide\/","datePublished":"2021-11-30T00:00:00Z","dateModified":"2025-12-18T11:12:01\u002b01:00","author":{"@type":"Person","name":"Toni Schmidbauer \u0026 Thomas Jungbauer"},"about":["Ansible"],"publisher":{"@type":"Organization","name":"TechBlog about OpenShift\/Ansible\/Satellite and much more","url":"https:\/\/blog.stderr.at\/"}}</script><link rel=icon href=/images/favicon.ico type=image/png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-180x180.png><link rel=apple-touch-icon sizes=128x128 href=/images/apple-touch-icon-128x128.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-touch-icon-72x72.png><link rel=apple-touch-icon href=/images/apple-touch-icon-57x57.png><link rel="shortcut icon" href=/images/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><title>Ansible Style Guide :: TechBlog about OpenShift/Ansible/Satellite and much more</title><link rel=manifest href=/manifest.json><link rel=dns-prefetch href=https://giscus.app><link rel=preconnect href=https://giscus.app crossorigin><link rel=preload href=/fonts/RedHatText-Regular.woff as=font type=font/woff crossorigin=anonymous><link rel=preload href=/fonts/RedHatText-Medium.woff as=font type=font/woff crossorigin=anonymous><link rel=preload href=/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><meta name=theme-color content="#317EFB"><link rel=preload href=/css/theme-yaub-modular.css?1769174901 as=style><link href=/css/fontawesome-all.min.css?1769174901 rel=stylesheet><link href=/css/featherlight.min.css?1769174901 rel=stylesheet><link href=/css/theme-yaub-modular.css?1769174901 rel=stylesheet><script src=/js/jquery-3.7.1.min.js?1769174901></script><style>.fonts-loading body{opacity:0}.fonts-ready body{opacity:1;animation:contentFadeIn .2s ease-out}@keyframes contentFadeIn{from{opacity:0}to{opacity:1}}#top-nav{min-height:42px}.sub-top-nav{min-height:45px}h1.gradient-header.article{min-height:1.2em}#right-sidebar.right-nav-sidebar{position:fixed;top:0;right:0;bottom:0;width:280px;background:var(--MENU-SECTIONS-BG-color,#212427);z-index:90;overflow-y:auto;padding:20px 0}body:has(#right-sidebar:not(.collapsed)) #body{margin-right:280px}@media screen and (max-width:1400px){#right-sidebar.right-nav-sidebar{width:250px}body:has(#right-sidebar:not(.collapsed)) #body{margin-right:250px}}@media screen and (max-width:1200px){#right-sidebar.right-nav-sidebar{width:220px}body:has(#right-sidebar:not(.collapsed)) #body{margin-right:220px}}@media screen and (max-width:1024px){#right-sidebar.right-nav-sidebar{display:none}body:has(#right-sidebar) #body{margin-right:0}}img{max-width:100%!important;height:auto!important}#body img,#body-inner img,.imageblock img,picture img,article img{max-width:100%!important;height:auto!important;max-height:80vh!important;opacity:0}.featured-img-container{overflow:hidden}.featured-img{max-width:100%!important;height:auto!important;box-shadow:none!important;max-height:none!important;opacity:0}@keyframes imgFadeIn{from{opacity:0}to{opacity:1}}#body-inner img,.imageblock img,picture img,.featured-img{animation:imgFadeIn .3s ease-out .05s forwards}img[data-webp-upgraded],img.no-animate{opacity:1!important;animation:none!important}pre code,pre.highlight code,.listingblock pre code{font-weight:400!important;font-size:14px!important;line-height:1.3em!important;color:#abb2bf!important;background:#282c34!important}pre{background:#282c34!important;min-height:48px}:root #header+#content>#left>#rlblock_left{display:none!important}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/blog.stderr.at\/"},{"@type":"ListItem","position":2,"name":"Ansible Platform","item":"https:\/\/blog.stderr.at\/ansible\/"},{"@type":"ListItem","position":3,"name":"Ansible Style Guide"}]}</script></head><body data-url=/ansible/2021/11/ansible-style-guide/><a href=#main-content class=skip-to-content>Skip to main content</a>
<button onclick=scrollTopAnimated() id=myBtn class="top-btn button fa fa-arrow-up" title="Go to top" aria-label="Go to top"></button>
<span class=read-progress></span><nav id=sidebar><div id=header-wrapper><button id=sidebar-toggle-btn class=sidebar-toggle-btn title="Toggle Sidebar" aria-label="Toggle Sidebar">
<svg class="sidebar-toggle-icon" viewBox="0 0 32 32"><path d="M22 31a.997.997.0 01-.707-.293L7.647 17.061a1.501 1.501.0 010-2.122L21.293 1.293a1 1 0 111.414 1.414L9.414 16l13.293 13.293A1 1 0 0122 31z"/></svg></button><div id=header><a class="padding-topnav logo-link" href=/><svg class="logo" width="200" height="100" viewBox="0 0 200 136.34417133812047"><defs id="SvgjsDefs3490"/><g id="SvgjsG3491" featurekey="symbolFeature-0" transform="matrix(0.8888888888888888,0,0,0.8888888888888888,55.55511135525174,-24.034717135959202)" fill="#d2d2d2"><g xmlns="http://www.w3.org/2000/svg"><g><g><g><path fill="#d2d2d2" d="M75.195 72.96c-.619.0-1.241-.21-1.75-.64-1.146-.967-1.291-2.681-.324-3.827L88.73 50 73.122 31.507c-.967-1.146-.822-2.859.324-3.827 1.146-.968 2.859-.823 3.827.323L94.36 48.248c.854 1.012.854 2.492.0 3.503L77.272 71.995C76.735 72.632 75.968 72.96 75.195 72.96z"/></g></g></g><g><g><g><path fill="#d2d2d2" d="M24.805 72.96c-.772.0-1.539-.328-2.076-.964L5.641 51.752c-.854-1.012-.854-2.492.0-3.503l17.088-20.245c.967-1.146 2.681-1.291 3.827-.324 1.146.967 1.291 2.681.324 3.827L11.269 50.001l15.609 18.492c.967 1.146.823 2.859-.323 3.827C26.045 72.749 25.423 72.96 24.805 72.96z"/></g></g></g><g><path fill="#d2d2d2" d="M37.325 72.96c-.492.0-.99-.134-1.438-.414-1.271-.796-1.657-2.471-.861-3.742L60.37 28.315c.796-1.271 2.472-1.656 3.743-.861 1.271.796 1.657 2.471.861 3.742L39.63 71.685C39.115 72.508 38.23 72.96 37.325 72.96z"/></g></g></g><g id="SvgjsG3492" featurekey="nameFeature-0" transform="matrix(1.6473784183020483,0,0,1.6473784183020483,0.5930603781937029,42.15399158589206)" fill="#d2d2d2"><path d="m6.72 11.44 6.68 11.28 6.64-11.28h7l-10.6 17.6V40h-6.28V28.88l-10.52-17.44h7.08zm38.535.0L55.935 40h-6.52l-2.16-6.36h-10.68L34.335 40h-6.36l10.84-28.56h6.44zM41.935 18.48l-3.72 10.48h7.4l-3.6-10.48h-.08zm27.175-7.04-39062e-9 17.88c0 2.1067.47332 3.6467 1.42 4.62s2.4334 1.46 4.46 1.46c2.1867.0 3.72-.48668 4.6-1.46s1.32-2.5133 1.32-4.62V11.44h6.28v17.88c0 3.5733-1.02 6.36-3.06 8.36s-5.0868 3-9.14 3c-4.1332.0-7.1932-1-9.18-3s-2.98-4.7868-2.98-8.36V11.44h6.28zm41.495.0c6.0532.0 9.08 2.3466 9.08 7.04.0 2.6933-1.2933 4.6932-3.88 6 1.76.50668 3.0733 1.3934 3.94 2.66s1.3 2.7934 1.3 4.58c0 2.56-.92668 4.58-2.78 6.06s-4.2868 2.22-7.3 2.22h-13.84V11.44h13.48zM109.80499999999999 23c2.5333.0 3.8-1.1333 3.8-3.4.0-2.1867-1.4133-3.28-4.24-3.28h-5.96V23h6.4zm.359999999999999 12.12c3.0667.0 4.6-1.2533 4.6-3.76.0-2.72-1.4933-4.08-4.48-4.08h-6.88v7.84h6.76z"/></g></svg><div class=inline-flex><span class="animate-typewriter overflow-hidden whitespace-nowrap">Yet another useless blog<span class="ml-2 -translate-y-2 animate-blink">_</span></span></div></a></div></div><div id=sidebar-search><button class=sidebar-search-btn onclick=window.SearchModal&&window.SearchModal.open() title=Search aria-label="Open search">
<i class="fas fa-search"></i>
<span class=sidebar-search-text>Search...</span>
<kbd class=sidebar-search-kbd><span class=kbd-mac>âŒ˜K</span><span class=kbd-other>Ctrl+K</span></kbd></button></div><div class=highlightable><ul class=topics><li data-nav-id=/whats-new/ title="What's New" class=dd-item><a href=/whats-new/ class=has-children><span class=menu-title><span class=news-badge-text><i class="fas fa-fire-alt"></i>What's New</span></span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/whats-new/2025-12-23-gitops-catalog/ title="GitOps Catalog" class=dd-item><a href=/whats-new/2025-12-23-gitops-catalog/>GitOps Catalog</a></li><li data-nav-id=/whats-new/2025-12-12-helm-charts-changelog/ title="Helm Charts Repository Updates" class=dd-item><a href=/whats-new/2025-12-12-helm-charts-changelog/>Helm Charts Repository Updates</a></li><li data-nav-id=/whats-new/2025-11-10-whatsnew-420/ title="What's new in OpenShift, 4.20 Edition" class=dd-item><a href=/whats-new/2025-11-10-whatsnew-420/>What's new in OpenShift, 4.20 Edition</a></li></ul></li><li data-nav-id=/openshift-platform/ title="OpenShift Platform" class=dd-item><a href=/openshift-platform/ class=has-children><span class=menu-title><i class='fab fa-redhat'></i> OpenShift Platform</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/ title="Day-2 Operations" class=dd-item><a href=/openshift-platform/day-2/ class=has-children><span class=menu-title><i class='fas fa-cogs'></i> Day-2 Operations</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/etcd/ title=etcd class=dd-item><a href=/openshift-platform/day-2/etcd/ class=has-children><span class=menu-title><i class='fas fa-database'></i> etcd</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/etcd/2022-01-29-automatedetcdbackup/ title="Automated ETCD Backup" class=dd-item><a href=/openshift-platform/day-2/etcd/2022-01-29-automatedetcdbackup/>Automated ETCD Backup</a></li></ul></li><li data-nav-id=/openshift-platform/day-2/fundamentals/ title=Fundamentals class=dd-item><a href=/openshift-platform/day-2/fundamentals/ class=has-children><span class=menu-title><i class='fas fa-terminal'></i> Fundamentals</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/fundamentals/2023-10-18-force-machineconfig-rollout/ title="How to force a MachineConfig rollout" class=dd-item><a href=/openshift-platform/day-2/fundamentals/2023-10-18-force-machineconfig-rollout/>How to force a MachineConfig rollout</a></li><li data-nav-id=/openshift-platform/day-2/fundamentals/2020-04-01-oc-commands/ title="Helpful oc / kubectl commands" class=dd-item><a href=/openshift-platform/day-2/fundamentals/2020-04-01-oc-commands/>Helpful oc / kubectl commands</a></li></ul></li><li data-nav-id=/openshift-platform/day-2/labels_environmets/ title="Labels & Environments" class=dd-item><a href=/openshift-platform/day-2/labels_environmets/ class=has-children><span class=menu-title><i class='fas fa-tags'></i> Labels & Environments</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/labels_environmets/2022-01-12-creatingenvironment/ title="Working with Environments" class=dd-item><a href=/openshift-platform/day-2/labels_environmets/2022-01-12-creatingenvironment/>Working with Environments</a></li></ul></li><li data-nav-id=/openshift-platform/day-2/pod-placement/ title="Pod Placement" class=dd-item><a href=/openshift-platform/day-2/pod-placement/ class=has-children><span class=menu-title><i class='fas fa-crosshairs'></i> Pod Placement</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/pod-placement/2021-08-26-podplacement-intro/ title=Introduction class=dd-item><a href=/openshift-platform/day-2/pod-placement/2021-08-26-podplacement-intro/>Introduction</a></li><li data-nav-id=/openshift-platform/day-2/pod-placement/2021-08-27-podplacement/ title=NodeSelector class=dd-item><a href=/openshift-platform/day-2/pod-placement/2021-08-27-podplacement/>NodeSelector</a></li><li data-nav-id=/openshift-platform/day-2/pod-placement/2021-08-28-affinity/ title="Pod Affinity/Anti-Affinity" class=dd-item><a href=/openshift-platform/day-2/pod-placement/2021-08-28-affinity/>Pod Affinity/Anti-Affinity</a></li><li data-nav-id=/openshift-platform/day-2/pod-placement/2021-08-29-node-affinity/ title="Node Affinity" class=dd-item><a href=/openshift-platform/day-2/pod-placement/2021-08-29-node-affinity/>Node Affinity</a></li><li data-nav-id=/openshift-platform/day-2/pod-placement/2021-08-30-taints/ title="Taints and Tolerations" class=dd-item><a href=/openshift-platform/day-2/pod-placement/2021-08-30-taints/>Taints and Tolerations</a></li><li data-nav-id=/openshift-platform/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints" class=dd-item><a href=/openshift-platform/day-2/pod-placement/2021-08-31-topologyspreadcontraints/>Topology Spread Constraints</a></li><li data-nav-id=/openshift-platform/day-2/pod-placement/2021-09-01-descheduler/ title="Using Descheduler" class=dd-item><a href=/openshift-platform/day-2/pod-placement/2021-09-01-descheduler/>Using Descheduler</a></li></ul></li><li data-nav-id=/openshift-platform/day-2/storage/ title=Storage class=dd-item><a href=/openshift-platform/day-2/storage/ class=has-children><span class=menu-title><i class='fas fa-hdd'></i> Storage</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/storage/2024-02-12-bucket-data-retention/ title="OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)" class=dd-item><a href=/openshift-platform/day-2/storage/2024-02-12-bucket-data-retention/>OpenShift Data Foundation - Noobaa Bucket Data Retention (Lifecycle)</a></li><li data-nav-id=/openshift-platform/day-2/storage/2022-04-22-multi-cloud-gateway/ title="Overview of Red Hat's Multi Cloud Gateway (Noobaa)" class=dd-item><a href=/openshift-platform/day-2/storage/2022-04-22-multi-cloud-gateway/>Overview of Red Hat's Multi Cloud Gateway (Noobaa)</a></li><li data-nav-id=/openshift-platform/day-2/storage/2021-02-27-understanding-block-devices/ title="Understanding RWO block device handling in OpenShift" class=dd-item><a href=/openshift-platform/day-2/storage/2021-02-27-understanding-block-devices/>Understanding RWO block device handling in OpenShift</a></li></ul></li><li data-nav-id=/openshift-platform/day-2/networking/ title=Networking class=dd-item><a href=/openshift-platform/day-2/networking/ class=has-children><span class=menu-title><i class='fas fa-plug'></i> Networking</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/day-2/networking/2025-08-31-openshift-gateway-api-ii/ title="A second look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift-platform/day-2/networking/2025-08-31-openshift-gateway-api-ii/>A second look into the Kubernetes Gateway API on OpenShift</a></li><li data-nav-id=/openshift-platform/day-2/networking/2025-08-29-openshift-gateway-api/ title="A first look into the Kubernetes Gateway API on OpenShift" class=dd-item><a href=/openshift-platform/day-2/networking/2025-08-29-openshift-gateway-api/>A first look into the Kubernetes Gateway API on OpenShift</a></li></ul></li></ul></li><li data-nav-id=/openshift-platform/observability/ title=Observability class=dd-item><a href=/openshift-platform/observability/ class=has-children><span class=menu-title><i class='fas fa-chart-line'></i> Observability</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/observability/observability/ title=Observability class=dd-item><a href=/openshift-platform/observability/observability/ class=has-children><span class=menu-title>Observability</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/observability/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/ title="The Hitchhiker's Guide to Observability Introduction - Part 1" class=dd-item><a href=/openshift-platform/observability/observability/2025-11-23-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part1/>The Hitchhiker's Guide to Observability Introduction - Part 1</a></li><li data-nav-id=/openshift-platform/observability/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/ title="The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2" class=dd-item><a href=/openshift-platform/observability/observability/2025-11-24-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part2/>The Hitchhiker's Guide to Observability - Grafana Tempo - Part 2</a></li><li data-nav-id=/openshift-platform/observability/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/ title="The Hitchhiker's Guide to Observability - Central Collector - Part 3" class=dd-item><a href=/openshift-platform/observability/observability/2025-11-25-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part3/>The Hitchhiker's Guide to Observability - Central Collector - Part 3</a></li><li data-nav-id=/openshift-platform/observability/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/ title="The Hitchhiker's Guide to Observability - Example Applications - Part 4" class=dd-item><a href=/openshift-platform/observability/observability/2025-11-26-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part4/>The Hitchhiker's Guide to Observability - Example Applications - Part 4</a></li><li data-nav-id=/openshift-platform/observability/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/ title="The Hitchhiker's Guide to Observability - Understanding Traces - Part 5" class=dd-item><a href=/openshift-platform/observability/observability/2025-11-27-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part5/>The Hitchhiker's Guide to Observability - Understanding Traces - Part 5</a></li><li data-nav-id=/openshift-platform/observability/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/ title="The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6" class=dd-item><a href=/openshift-platform/observability/observability/2025-11-28-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part6/>The Hitchhiker's Guide to Observability - Adding A New Tenant - Part 6</a></li><li data-nav-id=/openshift-platform/observability/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/ title="The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7" class=dd-item><a href=/openshift-platform/observability/observability/2025-12-04-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part7/>The Hitchhiker's Guide to Observability - Here Comes Grafana - Part 7</a></li><li data-nav-id=/openshift-platform/observability/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/ title="The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8" class=dd-item><a href=/openshift-platform/observability/observability/2025-12-06-hitchhikers-guide-to-distributed-tracing-with-opentelemetry-and-tempostack-part8/>The Hitchhiker's Guide to Observability - Limit Read Access to Traces - Part 8</a></li></ul></li><li data-nav-id=/openshift-platform/observability/2020-12-10-thanos-vs-thanos/ title="Thanos Querier vs Thanos Querier" class=dd-item><a href=/openshift-platform/observability/2020-12-10-thanos-vs-thanos/>Thanos Querier vs Thanos Querier</a></li></ul></li><li data-nav-id=/openshift-platform/virtualization/ title=Virtualization class=dd-item><a href=/openshift-platform/virtualization/ class=has-children><span class=menu-title><i class='fas fa-server'></i> Virtualization</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/virtualization/2025-12-29-openshift-virtualization-networking/ title="OpenShift Virtualization Networking - The Overview" class=dd-item><a href=/openshift-platform/virtualization/2025-12-29-openshift-virtualization-networking/>OpenShift Virtualization Networking - The Overview</a></li></ul></li><li data-nav-id=/openshift-platform/security/ title=Security class=dd-item><a href=/openshift-platform/security/ class=has-children><span class=menu-title><i class='fas fa-shield-alt'></i> Security</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/compliance/ title=Compliance class=dd-item><a href=/openshift-platform/security/compliance/ class=has-children><span class=menu-title><i class='fas fa-check-circle'></i> Compliance</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/compliance/2021-07-20-compliance-plugin-cli/ title="oc compliance command line plugin" class=dd-item><a href=/openshift-platform/security/compliance/2021-07-20-compliance-plugin-cli/>oc compliance command line plugin</a></li><li data-nav-id=/openshift-platform/security/compliance/2021-07-19-complianceoperator/ title="Compliance Operator" class=dd-item><a href=/openshift-platform/security/compliance/2021-07-19-complianceoperator/>Compliance Operator</a></li></ul></li><li data-nav-id=/openshift-platform/security/secrets-management/ title="Secrets Management" class=dd-item><a href=/openshift-platform/security/secrets-management/ class=has-children><span class=menu-title><i class='fas fa-key'></i> Secrets Management</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/secrets-management/2022-08-16-hashicorp-vault/ title="Secrets Management - Vault on OpenShift" class=dd-item><a href=/openshift-platform/security/secrets-management/2022-08-16-hashicorp-vault/>Secrets Management - Vault on OpenShift</a></li><li data-nav-id=/openshift-platform/security/secrets-management/2021-09-25-sealed_secrets/ title="Secure your secrets with Sealed Secrets" class=dd-item><a href=/openshift-platform/security/secrets-management/2021-09-25-sealed_secrets/>Secure your secrets with Sealed Secrets</a></li></ul></li><li data-nav-id=/openshift-platform/security/acs/ title="Advanced Cluster Security" class=dd-item><a href=/openshift-platform/security/acs/ class=has-children><span class=menu-title><i class='fas fa-user-shield'></i> Advanced Cluster Security</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/acs/2021-12-11-acsauth/ title="Advanced Cluster Security - Authentication" class=dd-item><a href=/openshift-platform/security/acs/2021-12-11-acsauth/>Advanced Cluster Security - Authentication</a></li></ul></li><li data-nav-id=/openshift-platform/security/authentication/ title=Authentication class=dd-item><a href=/openshift-platform/security/authentication/ class=has-children><span class=menu-title><i class='fas fa-user-shield'></i> Authentication</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/authentication/2025-05-22-keycloak-openshift-singlelogout/ title="Single log out from Keycloak and OpenShift" class=dd-item><a href=/openshift-platform/security/authentication/2025-05-22-keycloak-openshift-singlelogout/>Single log out from Keycloak and OpenShift</a></li><li data-nav-id=/openshift-platform/security/authentication/2025-05-17-step-by-step-keycloak-and-openshift/ title="Step by Step - Using Keycloak Authentication in OpenShift" class=dd-item><a href=/openshift-platform/security/authentication/2025-05-17-step-by-step-keycloak-and-openshift/>Step by Step - Using Keycloak Authentication in OpenShift</a></li></ul></li><li data-nav-id=/openshift-platform/security/certificates/ title=Certificates class=dd-item><a href=/openshift-platform/security/certificates/ class=has-children><span class=menu-title><i class='fas fa-certificate'></i> Certificates</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/certificates/2025-06-03-cert-manager-approver-policy/ title="Cert-Manager Policy Approver in OpenShift" class=dd-item><a href=/openshift-platform/security/certificates/2025-06-03-cert-manager-approver-policy/>Cert-Manager Policy Approver in OpenShift</a></li><li data-nav-id=/openshift-platform/security/certificates/2023-02-16-ssl-certificate-management/ title="SSL Certificate Management for OpenShift on AWS" class=dd-item><a href=/openshift-platform/security/certificates/2023-02-16-ssl-certificate-management/>SSL Certificate Management for OpenShift on AWS</a></li></ul></li><li data-nav-id=/openshift-platform/security/runtime-security/ title="Runtime Security" class=dd-item><a href=/openshift-platform/security/runtime-security/ class=has-children><span class=menu-title><i class='fas fa-eye'></i> Runtime Security</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/runtime-security/2023-11-26-running-falco/ title="Running Falco on OpenShift 4.12" class=dd-item><a href=/openshift-platform/security/runtime-security/2023-11-26-running-falco/>Running Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift-platform/security/runtime-security/2023-10-23-openshift-falco/ title="Setting up Falco on OpenShift 4.12" class=dd-item><a href=/openshift-platform/security/runtime-security/2023-10-23-openshift-falco/>Setting up Falco on OpenShift 4.12</a></li></ul></li><li data-nav-id=/openshift-platform/security/network-policies/ title="Network Policies" class=dd-item><a href=/openshift-platform/security/network-policies/ class=has-children><span class=menu-title><i class='fas fa-network-wired'></i> Network Policies</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/security/network-policies/2024-11-06-using-adminnetworkpolicies-and-baselineadminnetworkpolicies/ title="Introducing AdminNetworkPolicies" class=dd-item><a href=/openshift-platform/security/network-policies/2024-11-06-using-adminnetworkpolicies-and-baselineadminnetworkpolicies/>Introducing AdminNetworkPolicies</a></li></ul></li></ul></li><li data-nav-id=/openshift-platform/quay/ title=Quay class=dd-item><a href=/openshift-platform/quay/ class=has-children><span class=menu-title><i class='fas fa-box'></i> Quay</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/quay/2025-09-19-quay-integrate-keycloak/ title="Red Hat Quay Registry - Integrate Keycloak" class=dd-item><a href=/openshift-platform/quay/2025-09-19-quay-integrate-keycloak/>Red Hat Quay Registry - Integrate Keycloak</a></li><li data-nav-id=/openshift-platform/quay/2021-09-07-quay-upgrade-3.4/ title="Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator" class=dd-item><a href=/openshift-platform/quay/2021-09-07-quay-upgrade-3.4/>Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator</a></li><li data-nav-id=/openshift-platform/quay/2020-05-13-quay-tutorial1/ title="Red Hat Quay Registry - Overview and Installation" class=dd-item><a href=/openshift-platform/quay/2020-05-13-quay-tutorial1/>Red Hat Quay Registry - Overview and Installation</a></li></ul></li><li data-nav-id=/openshift-platform/gitops/ title=GitOps class=dd-item><a href=/openshift-platform/gitops/ class=has-children><span class=menu-title><i class='fas fa-code-branch'></i> GitOps</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/gitops/2023-11-03-quay-deployment-with-gitops/ title="Quay Deployment and Configuration using GitOps" class=dd-item><a href=/openshift-platform/gitops/2023-11-03-quay-deployment-with-gitops/>Quay Deployment and Configuration using GitOps</a></li><li data-nav-id=/openshift-platform/gitops/2023-03-20-operator-installation-with-argocd/ title="Operator installation with Argo CD" class=dd-item><a href=/openshift-platform/gitops/2023-03-20-operator-installation-with-argocd/>Operator installation with Argo CD</a></li><li data-nav-id=/openshift-platform/gitops/2022-11-04-argocd-and-serversideapply/ title="Using ServerSideApply with ArgoCD" class=dd-item><a href=/openshift-platform/gitops/2022-11-04-argocd-and-serversideapply/>Using ServerSideApply with ArgoCD</a></li><li data-nav-id=/openshift-platform/gitops/2020-08-06-argocd/ title="GitOps - Argo CD" class=dd-item><a href=/openshift-platform/gitops/2020-08-06-argocd/>GitOps - Argo CD</a></li></ul></li><li data-nav-id=/openshift-platform/service-mesh/ title="Service Mesh" class=dd-item><a href=/openshift-platform/service-mesh/ class=has-children><span class=menu-title><i class='fas fa-project-diagram'></i> Service Mesh</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/service-mesh/2020-05-13-istio-tutorial13/ title="Enable Automatic Route Creation" class=dd-item><a href=/openshift-platform/service-mesh/2020-05-13-istio-tutorial13/>Enable Automatic Route Creation</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-05-12-istio-tutorial12/ title="Authorization (RBAC)" class=dd-item><a href=/openshift-platform/service-mesh/2020-05-12-istio-tutorial12/>Authorization (RBAC)</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-30-istio-tutorial11/ title="Deploy Example Bookinfo Application" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-30-istio-tutorial11/>Deploy Example Bookinfo Application</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-10-istio-update/ title="Service Mesh 1.1 released" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-10-istio-update/>Service Mesh 1.1 released</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-09-istio-tutorial10/ title="Authentication JWT" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-09-istio-tutorial10/>Authentication JWT</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-08-istio-tutorial9/ title="Mutual TLS Authentication" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-08-istio-tutorial9/>Mutual TLS Authentication</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-07-istio-tutorial8/ title="Fault Injection" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-07-istio-tutorial8/>Fault Injection</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-06-istio-tutorial7/ title="Limit Egress/External Traffic" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-06-istio-tutorial7/>Limit Egress/External Traffic</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-03-istio-tutorial6/ title="Advanced Routing Example" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-03-istio-tutorial6/>Advanced Routing Example</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-04-01-istio-tutorial5/ title="Routing Example" class=dd-item><a href=/openshift-platform/service-mesh/2020-04-01-istio-tutorial5/>Routing Example</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-03-31-istio-tutorial4/ title="Ingress with custom domain" class=dd-item><a href=/openshift-platform/service-mesh/2020-03-31-istio-tutorial4/>Ingress with custom domain</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-03-30-istio-tutorial3/ title="Ingress Traffic" class=dd-item><a href=/openshift-platform/service-mesh/2020-03-30-istio-tutorial3/>Ingress Traffic</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-03-29-istio-tutorial2/ title="Deploy Microservices" class=dd-item><a href=/openshift-platform/service-mesh/2020-03-29-istio-tutorial2/>Deploy Microservices</a></li><li data-nav-id=/openshift-platform/service-mesh/2020-03-29-istio-tutorial1/ title=Installation class=dd-item><a href=/openshift-platform/service-mesh/2020-03-29-istio-tutorial1/>Installation</a></li></ul></li><li data-nav-id=/openshift-platform/other-topics/ title="Other Topics" class=dd-item><a href=/openshift-platform/other-topics/ class=has-children><span class=menu-title><i class='fas fa-ellipsis-h'></i> Other Topics</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/openshift-platform/other-topics/2025-12-15-hosted-control-planes-and-proxy/ title="Hosted Control Planes behind a Proxy" class=dd-item><a href=/openshift-platform/other-topics/2025-12-15-hosted-control-planes-and-proxy/>Hosted Control Planes behind a Proxy</a></li><li data-nav-id=/openshift-platform/other-topics/2021-01-27-writingoperatoransible/ title="Writing Operator using Ansible" class=dd-item><a href=/openshift-platform/other-topics/2021-01-27-writingoperatoransible/>Writing Operator using Ansible</a></li><li data-nav-id=/openshift-platform/other-topics/2020-04-16-tekton/ title="OpenShift Pipelines - Tekton Introduction" class=dd-item><a href=/openshift-platform/other-topics/2020-04-16-tekton/>OpenShift Pipelines - Tekton Introduction</a></li></ul></li></ul></li><li data-nav-id=/gitopscollection/ title="GitOps Episodes" class=dd-item><a href=/gitopscollection/ class=has-children><span class=menu-title><i class='fas fa-infinity'></i> GitOps Episodes</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/gitopscollection/2023-12-11-gitops-intro/ title="[Ep.1] Introducing the GitOps Approach" class=dd-item><a href=/gitopscollection/2023-12-11-gitops-intro/>[Ep.1] Introducing the GitOps Approach</a></li><li data-nav-id=/gitopscollection/2023-12-28-gitops-repostructure/ title="[Ep.2] Choosing the right Git repository structure" class=dd-item><a href=/gitopscollection/2023-12-28-gitops-repostructure/>[Ep.2] Choosing the right Git repository structure</a></li><li data-nav-id=/gitopscollection/2024-02-02-setup-argocd/ title="[Ep.3] Setup OpenShift GitOps/Argo CD" class=dd-item><a href=/gitopscollection/2024-02-02-setup-argocd/>[Ep.3] Setup OpenShift GitOps/Argo CD</a></li><li data-nav-id=/gitopscollection/2024-04-02-configure_app_of_apps/ title="[Ep.4] Configure App-of-Apps" class=dd-item><a href=/gitopscollection/2024-04-02-configure_app_of_apps/>[Ep.4] Configure App-of-Apps</a></li><li data-nav-id=/gitopscollection/2024-04-25-installing-compliance-operator/ title="[Ep.5] Setup & Configure Compliance Operator" class=dd-item><a href=/gitopscollection/2024-04-25-installing-compliance-operator/>[Ep.5] Setup & Configure Compliance Operator</a></li><li data-nav-id=/gitopscollection/2024-04-28-installing-advanced-cluster-security/ title="[Ep.6] Setup & Configure Advanced Cluster Security" class=dd-item><a href=/gitopscollection/2024-04-28-installing-advanced-cluster-security/>[Ep.6] Setup & Configure Advanced Cluster Security</a></li><li data-nav-id=/gitopscollection/2024-05-17-configure-minio-buckets/ title="[Ep.7] Configure Buckets in MinIO" class=dd-item><a href=/gitopscollection/2024-05-17-configure-minio-buckets/>[Ep.7] Configure Buckets in MinIO</a></li><li data-nav-id=/gitopscollection/2024-05-24-install-openshift-logging/ title="[Ep.8] Installing OpenShift Logging" class=dd-item><a href=/gitopscollection/2024-05-24-install-openshift-logging/>[Ep.8] Installing OpenShift Logging</a></li><li data-nav-id=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/ title="[Ep.9] Multiple Sources for Applications" class=dd-item><a href=/gitopscollection/2024-06-02-multisources-for-application-in-argocd/>[Ep.9] Multiple Sources for Applications</a></li><li data-nav-id=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/ title="[Ep.10] Update Cluster Version" class=dd-item><a href=/gitopscollection/2024-06-07-update-cluster-version-with-gitops/>[Ep.10] Update Cluster Version</a></li><li data-nav-id=/gitopscollection/2024-07-04-managing-certificates-with-gitops/ title="[Ep.11] Managing Certificates" class=dd-item><a href=/gitopscollection/2024-07-04-managing-certificates-with-gitops/>[Ep.11] Managing Certificates</a></li><li data-nav-id=/gitopscollection/2024-10-13-using-post-renderer/ title="[Ep.12] Using Kustomize Post-Renderer" class=dd-item><a href=/gitopscollection/2024-10-13-using-post-renderer/>[Ep.12] Using Kustomize Post-Renderer</a></li><li data-nav-id=/gitopscollection/2025-04-17-applicationset-defining-namespaces/ title="[Ep.13] ApplicationSet with Matrix Generator" class=dd-item><a href=/gitopscollection/2025-04-17-applicationset-defining-namespaces/>[Ep.13] ApplicationSet with Matrix Generator</a></li><li data-nav-id=/gitopscollection/2025-07-17-common-template-application/ title="[Ep.14] Reusable Argo CD Application Template" class=dd-item><a href=/gitopscollection/2025-07-17-common-template-application/>[Ep.14] Reusable Argo CD Application Template</a></li><li data-nav-id=/gitopscollection/2026-01-14-argocd-agent/ title="[Ep.15] OpenShift GitOps - Argo CD Agent" class=dd-item><a href=/gitopscollection/2026-01-14-argocd-agent/>[Ep.15] OpenShift GitOps - Argo CD Agent</a></li></ul></li><li data-nav-id=/securesupplychain/ title="Secure Supply Chain" class=dd-item><a href=/securesupplychain/ class=has-children><span class=menu-title><i class='fas fa-link'></i> Secure Supply Chain</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/securesupplychain/2023-06-15-securesupplychain-intro/ title="Introduction to a Secure Supply Chain" class=dd-item><a href=/securesupplychain/2023-06-15-securesupplychain-intro/>Introduction to a Secure Supply Chain</a></li><li data-nav-id=/securesupplychain/2023-06-16-securesupplychain-step1/ title="Step 1 - Listen to Events" class=dd-item><a href=/securesupplychain/2023-06-16-securesupplychain-step1/>Step 1 - Listen to Events</a></li><li data-nav-id=/securesupplychain/2023-06-17-securesupplychain-step2/ title="Step 2 - Pipelines" class=dd-item><a href=/securesupplychain/2023-06-17-securesupplychain-step2/>Step 2 - Pipelines</a></li><li data-nav-id=/securesupplychain/2023-06-18-securesupplychain-step3/ title="Step 3 - SonarQube" class=dd-item><a href=/securesupplychain/2023-06-18-securesupplychain-step3/>Step 3 - SonarQube</a></li><li data-nav-id=/securesupplychain/2023-06-19-securesupplychain-step4/ title="Step 4 - Verify Git Commit" class=dd-item><a href=/securesupplychain/2023-06-19-securesupplychain-step4/>Step 4 - Verify Git Commit</a></li><li data-nav-id=/securesupplychain/2023-06-20-securesupplychain-step5/ title="Step 5 - Build and Sign Image" class=dd-item><a href=/securesupplychain/2023-06-20-securesupplychain-step5/>Step 5 - Build and Sign Image</a></li><li data-nav-id=/securesupplychain/2023-06-21-securesupplychain-step6/ title="Step 6 - Scanning with ACS" class=dd-item><a href=/securesupplychain/2023-06-21-securesupplychain-step6/>Step 6 - Scanning with ACS</a></li><li data-nav-id=/securesupplychain/2023-06-22-securesupplychain-step7/ title="Step 7 - Generating a SBOM" class=dd-item><a href=/securesupplychain/2023-06-22-securesupplychain-step7/>Step 7 - Generating a SBOM</a></li><li data-nav-id=/securesupplychain/2023-06-23-securesupplychain-step8/ title="Step 8 - Updating Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-23-securesupplychain-step8/>Step 8 - Updating Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-24-securesupplychain-step9/ title="Step 9 - Linting Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-24-securesupplychain-step9/>Step 9 - Linting Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-25-securesupplychain-step10/ title="Step 10 - The Example Application" class=dd-item><a href=/securesupplychain/2023-06-25-securesupplychain-step10/>Step 10 - The Example Application</a></li><li data-nav-id=/securesupplychain/2023-06-26-securesupplychain-step11/ title="Step 11 - ACS Deployment Check" class=dd-item><a href=/securesupplychain/2023-06-26-securesupplychain-step11/>Step 11 - ACS Deployment Check</a></li><li data-nav-id=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature" class=dd-item><a href=/securesupplychain/2023-06-27-securesupplychain-step12/>Step 12 - Verify TLog Signature</a></li><li data-nav-id=/securesupplychain/2023-06-28-securesupplychain-step13/ title="Step 13 - Bring it to Production" class=dd-item><a href=/securesupplychain/2023-06-28-securesupplychain-step13/>Step 13 - Bring it to Production</a></li></ul></li><li data-nav-id=/integrations/ title=Integrations class=dd-item><a href=/integrations/ class=has-children><span class=menu-title><i class='fas fa-plug'></i> Integrations</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/integrations/general/ title=General class=dd-item><a href=/integrations/general/ class=has-children><span class=menu-title><i class='fas fa-toolbox'></i> General</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/integrations/general/2020-05-08-git-and-github-basics/ title="Basic usage of git" class=dd-item><a href=/integrations/general/2020-05-08-git-and-github-basics/>Basic usage of git</a></li><li data-nav-id=/integrations/general/2020-04-15-satellite-cheatsheet/ title="Red Hat Satellite Cheat Sheet" class=dd-item><a href=/integrations/general/2020-04-15-satellite-cheatsheet/>Red Hat Satellite Cheat Sheet</a></li></ul></li><li data-nav-id=/integrations/azure/ title=Azure class=dd-item><a href=/integrations/azure/ class=has-children><span class=menu-title><i class='fab fa-microsoft'></i> Azure</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/integrations/azure/2021-10-29-private-aro/ title="Stumbling into Azure Part II: Setting up a private ARO cluster" class=dd-item><a href=/integrations/azure/2021-10-29-private-aro/>Stumbling into Azure Part II: Setting up a private ARO cluster</a></li><li data-nav-id=/integrations/azure/2021-10-17-s2s-vpn/ title="Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing" class=dd-item><a href=/integrations/azure/2021-10-17-s2s-vpn/>Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing</a></li></ul></li><li data-nav-id=/integrations/java/ title=Java class=dd-item><a href=/integrations/java/ class=has-children><span class=menu-title><i class='fab fa-java'></i> Java</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/integrations/java/2022-02-25-jpa-disconnected-entity/ title="Adventures in Java Land: JPA disconnected entities" class=dd-item><a href=/integrations/java/2022-02-25-jpa-disconnected-entity/>Adventures in Java Land: JPA disconnected entities</a></li></ul></li></ul></li><li data-nav-id=/ansible/ title="Ansible Platform" class="dd-item
parent"><a href=/ansible/ class=has-children><span class=menu-title><i class='fas fa-robot'></i> Ansible Platform</span>
<i class="fas fa-chevron-right menu-chevron"></i></a><ul><li data-nav-id=/ansible/2021/11/ansible-style-guide/ title="Ansible Style Guide" class="dd-item active"><a href=/ansible/2021/11/ansible-style-guide/>Ansible Style Guide</a></li><li data-nav-id=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" class=dd-item><a href=/ansible/2021/10/automation-controller-and-ldap-authentication/>Automation Controller and LDAP Authentication</a></li><li data-nav-id=/ansible/2021/07/ansible-tower-and-downloading-collections/ title="Ansible Tower and downloading collections" class=dd-item><a href=/ansible/2021/07/ansible-tower-and-downloading-collections/>Ansible Tower and downloading collections</a></li><li data-nav-id=/ansible/2020/04/ansible-azure-resource-manager-example/ title="Ansible - Azure Resource Manager Example" class=dd-item><a href=/ansible/2020/04/ansible-azure-resource-manager-example/>Ansible - Azure Resource Manager Example</a></li><li data-nav-id=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ title="DO410 Ansible and Ansible Tower training notes" class=dd-item><a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/>DO410 Ansible and Ansible Tower training notes</a></li></ul></li><li data-nav-id=/helm-charts/ title="Helm Repository" class="dd-item
divider-before"><a href=/helm-charts/><span class=menu-title><i class='fas fa-dharmachakra'></i> Helm Repository</span></a></li><li data-nav-id=/gitops-catalog/ title="GitOps Catalog" class=dd-item><a href=/gitops-catalog/><span class=menu-title><i class='fas fa-th'></i> GitOps Catalog</span></a></li><li data-nav-id=/legaldisclosure/ title="Legal Disclosure" class=dd-item><a href=/legaldisclosure/><span class=menu-title><i class='fas fa-balance-scale'></i> Legal Disclosure</span></a></li><li data-nav-id=/rss/ title="RSS Feeds" class=dd-item><a href=/rss/><span class=menu-title><i class='fas fa-rss'></i> RSS Feeds</span></a></li></ul><div class=bookmarks-section id=bookmarks-section><h3 class=bookmarks-title><i class="fas fa-bookmark"></i>
Saved Articles
<span class=bookmarks-count style=display:none>0</span></h3><div class=bookmarks-empty id=bookmarks-empty><p>No saved articles yet.</p><p class=bookmarks-hint>Click the "Save" button on any article to bookmark it for later.</p></div><ul class=bookmarks-list id=bookmarks-list></ul><button class=bookmarks-clear-btn id=bookmarks-clear style=display:none>
<i class="fas fa-trash-alt"></i> Clear All</button></div><script>(function(){const t="blog-bookmarks";function n(){try{return JSON.parse(localStorage.getItem(t))||[]}catch{return[]}}function s(e){localStorage.setItem(t,JSON.stringify(e))}function o(t){let i=n();i=i.filter(e=>e.url!==t),s(i),e();const o=document.querySelector('.bookmark-btn[data-url="'+t+'"]');if(o){o.classList.remove("bookmarked");const e=o.querySelector(".bookmark-icon"),t=o.querySelector(".bookmark-text");e&&(e.classList.remove("fas"),e.classList.add("far")),t&&(t.textContent="Save")}}function e(){const e=n(),t=document.getElementById("bookmarks-list"),s=document.getElementById("bookmarks-empty"),i=document.getElementById("bookmarks-clear"),a=document.querySelector(".bookmarks-count");if(!t)return;if(a&&(a.textContent=e.length,a.style.display=e.length>0?"inline-block":"none"),e.length===0){t.innerHTML="",s&&(s.style.display="block"),i&&(i.style.display="none");return}s&&(s.style.display="none"),i&&(i.style.display="block"),t.innerHTML=e.map(e=>`
            <li class="bookmark-item">
                <a href="${e.url}" class="bookmark-link">
                    <span class="bookmark-item-title">${e.title}</span>
                    <span class="bookmark-item-meta">
                        <span class="bookmark-item-section">${e.section}</span>
                        ${e.date?'<span class="bookmark-item-date">'+e.date+"</span>":""}
                    </span>
                </a>
                <button class="bookmark-remove" data-url="${e.url}" title="Remove bookmark">
                    <i class="fas fa-times"></i>
                </button>
            </li>
        `).join(""),t.querySelectorAll(".bookmark-remove").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),o(this.dataset.url)})})}function i(){confirm("Remove all saved articles?")&&(localStorage.removeItem(t),e(),document.querySelectorAll(".bookmark-btn.bookmarked").forEach(e=>{e.classList.remove("bookmarked");const t=e.querySelector(".bookmark-icon"),n=e.querySelector(".bookmark-text");t&&(t.classList.remove("fas"),t.classList.add("far")),n&&(n.textContent="Save")}))}document.addEventListener("DOMContentLoaded",function(){e();const t=document.getElementById("bookmarks-clear");t&&t.addEventListener("click",i)}),window.addEventListener("storage",function(n){n.key===t&&e()}),window.addEventListener("bookmarks-changed",function(){e()})})()</script><section id=footer></section></div><div class=sidebar-stats><div class=sidebar-stats-item><i class="fas fa-file-alt fa-fw"></i>
<span>96 Articles</span></div><div class=sidebar-stats-item><i class="fas fa-calendar-check fa-fw"></i>
<span>Latest: Jan 14, 2026</span></div></div></nav><main id=body class=post-content role=main><div id=overlay></div><aside id=toc-field class="hidden lg:block tableOfContentContainer"><header id=TableOfContentsHeader>What's on this Page</header><nav id=TableOfContents><ul><li><a href=#_general_recommendations>General Recommendations</a></li><li><a href=#_optimize_playbook_execution>Optimize Playbook Execution</a></li><li><a href=#_name_tasks_and_plays>Name Tasks and Plays</a></li><li><a href=#_variables_in_task_names>Variables in Task Names</a></li><li><a href=#_omitting_unnecessary_information>Omitting Unnecessary Information</a></li><li><a href=#_names>Names</a></li><li><a href=#_use_modules_instead_of_command_or_shell>Use Modules instead of command or shell</a></li><li><a href=#_documenting_a_taskplay>Documenting a Task/Play</a></li><li><a href=#_end_a_file>End a File</a></li><li><a href=#_quotes>Quotes</a></li><li><a href=#_sudo>Sudo</a></li><li><a href=#_hosts_declarations>Hosts Declarations</a></li><li><a href=#_tasks_declarations>Tasks Declarations</a></li><li><a href=#_include_declaration>Include Declaration</a></li><li><a href=#_booleans>Booleans</a></li><li><a href=#_key_value_pairs>Key Value Pairs</a></li><li><a href=#_using_map_syntax>Using Map Syntax</a></li><li><a href=#_spacing>Spacing</a></li><li><a href=#_variable_names>Variable Names</a></li><li><a href=#_jinja_variables>Jinja Variables</a></li><li><a href=#_comparing>Comparing</a></li><li><a href=#_delegation>Delegation</a></li><li><a href=#_playbook_file_extension>Playbook File Extension</a></li><li><a href=#_template_file_extension>Template File Extension</a></li><li><a href=#_vaults>Vaults</a></li><li><a href=#_debug_and_comments>Debug and Comments</a></li><li><a href=#_use_modules_copy_or_templates_instead_of_linefile_or_blockfile>Use Modules copy or templates instead of linefile or blockfile</a></li><li><a href=#_use_module_synchronize_instead_of_copy_for_large_files>Use Module synchronize Instead of copy for Large Files</a></li><li><a href=#_do_not_show_sensitive_data_in_ansible_output>Do not Show Sensitive Data in Ansible Output</a></li><li><a href=#_use_block_module>Use Block-Module</a></li><li><a href=#_enable_cpu_and_memory_profiling>Enable CPU and Memory Profiling</a></li><li><a href=#_enable_task_and_role_profiling>Enable Task and Role Profiling</a></li><li><a href=#_directory_structure>Directory Structure</a></li></ul></nav></aside><div id=navigation><a class="nav nav-prev" href=/ansible/ title="Ansible Platform"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div><div id=main-content class="padding highlightable" tabindex=-1><header><div id=top-nav class=margin-bottom-15><section id=homelinks class=text-align-center><ul class="list-no-style margin-0 padding-0 text-align-left vertical-align-middle"><li class="list-horizontal padding-left-15 padding-right-15"><a class=padding-topnav href=/><i class='fas fa-home'></i> Home</a></li><li class="dropdown list-horizontal left padding-left-15 padding-right-15"><div class="submenu left relative inline-block"><a class=padding-topnav href=https://blog.stderr.at/authors><svg stroke="currentColor" fill="#d2d2d2" stroke-width="0" viewBox="0 0 17 17" class="relative z-20 h-6 w-6" height="1em" width="1em"><g/><path d="M16.499 1.843 15.096.44c-.566-.566-1.555-.566-2.122.0L5.438 7.976l-1.722 5.287 5.249-1.765 7.534-7.534c.283-.283.439-.66.439-1.061s-.156-.777-.439-1.06zM5.584 10.758l.638-1.957 1.92 1.919-1.942.653-.616-.615zM6.832 7.996l3.986-3.986 2.11 2.11-3.986 3.986-2.11-2.11zm4.693-4.693.729-.729 2.11 2.11-.729.729-2.11-2.11zM15.792 3.257l-.72.721-2.11-2.11.72-.721c.19-.189.519-.189.707.0l1.403 1.403c.094.095.146.22.146.354s-.052.258-.146.353zM15 7.5h1V17H0V2h7.5v1H1v13h14V7.5z"/></svg> About Us<i class='fa fa-chevron-down padding-left-25rem' '></i></a><div class="absolute submenu-div"><a href=/authors/thomas-jungbauer class="submenu-style submenu-link display-block"><i class='fas fa-user'></i>Thomas Jungbauer</a>
<a href=/authors/toni-schmidbauer class="submenu-style submenu-link display-block"><i class='fas fa-user'></i>Toni Schmidbauer</a>
<a href=/legaldisclosure class="submenu-style submenu-link display-block"><i class='fas fa-gavel'></i>Legal Disclosure</a></div></div></li><li class="dropdown list-horizontal left padding-left-15 padding-right-15"><div class="submenu left relative inline-block"><a class=padding-topnav href=https://blog.stderr.at/><i class='fas fa-compass padding-right-25rem'></i> Explore<i class='fa fa-chevron-down padding-left-25rem' '></i></a><div class="absolute submenu-div"><a href=/categories class="submenu-style submenu-link display-block"><i class='far fa-bookmark'></i>Categories</a>
<a href=/tags class="submenu-style submenu-link display-block"><i class='fas fa-tags'></i>Tags</a>
<a href=/archive class="submenu-style submenu-link display-block"><i class='fas fa-box'></i>Archive</a></div></div></li><li class="dropdown list-horizontal left padding-left-15 padding-right-15"><div class="submenu left relative inline-block"><a class=padding-topnav href=https://blog.stderr.at/><i class='fas fa-layer-group padding-right-25rem'></i> GitOps & Helm Charts<i class='fa fa-chevron-down padding-left-25rem' '></i></a><div class="absolute submenu-div"><a href=/gitops-catalog/ class="submenu-style submenu-link display-block"><i class='fas fa-th'></i>GitOps Catalog</a>
<a href=/helm-charts/ class="submenu-style submenu-link display-block"><svg fill="#d2d2d2" width="18" height="18" viewBox="0 0 256 297" style="vertical-align:middle;margin-right:8px"><path d="m60.349 70.537-.811-.767a77.726 77.726.0 01-.278-.266c-7.589-7.29-13.462-15.721-17.01-25.685-.951-2.673-1.68-5.397-1.621-8.262l.012-.375c.012-.285.011-.571.031-.856.268-3.877 2.863-5.836 6.652-4.918 1.195.31 2.351.753 3.447 1.321 4.007 2.01 7.297 4.948 10.317 8.185l.312.336a67.685 67.685.0 0113.066 20.108c.068.177.146.35.234.518a.308.308.0 00.061.074l.212.181.064.057a106.079 106.079.0 0148.733-14.954l-.043-.218-.112-.585a11.87 11.87.0 00-.073-.35l-.041-.17a67.666 67.666.0 01-1.596-22.23 50.571 50.571.0 012.674-13.09 18.838 18.838.0 013.294-6.118 9.436 9.436.0 011.902-1.697 4.226 4.226.0 014.832-.034 10.393 10.393.0 013.513 4.049 31.912 31.912.0 013.165 8.828 67.672 67.672.0 011.277 19.852 57.502 57.502.0 01-2.1 11.976c.714.132 1.428.258 2.14.382l3.2.552c2.481.43 4.946.88 7.38 1.458a112.29 112.29.0 0112.296 3.611c4.059 1.49 8.03 3.211 11.891 5.155 2.227 1.11 4.39 2.346 6.564 3.612l1.866 1.09c.936.548 1.877 1.096 2.829 1.637l.08-.163.178-.354c.06-.125.118-.254.167-.387a65.359 65.359.0 0119.79-28.128 22.711 22.711.0 017.11-4.14c.717-.25 1.46-.42 2.213-.508 3.768-.431 5.35 1.94 5.628 4.771a18.011 18.011.0 01-.465 6.228 52.875 52.875.0 01-6.147 14.357l-.308.493c-3.982 6.435-8.69 12.247-14.633 16.98l-.46.362a2.62 2.62.0 00-.12.1l-.192.177-.24.228-.098.09a106.935 106.935.0 0115.996 18.576 6.594 6.594.0 01-1.016.179c-6.373.01-12.746-.011-19.12.028a2.408 2.408.0 01-1.908-1.017 88.947 88.947.0 00-53.039-27.999 86.23 86.23.0 00-17.453-.75l-.76.047a88.064 88.064.0 00-49.207 18.785l-.44.349a84.25 84.25.0 00-10.21 9.529 2.844 2.844.0 01-2.324 1.057 1482.46 1482.46.0 00-10.958-.026l-8.6.005c.029-.111.077-.245.144-.398l.09-.193a7.07 7.07.0 01.107-.211l.123-.23.14-.245.157-.262.171-.277.186-.292.306-.464.337-.493.241-.343.384-.535.134-.183.419-.564.292-.386.302-.394.472-.604.491-.616.338-.418.346-.42.352-.425.36-.426.365-.428.558-.644.378-.43.382-.428.386-.426.39-.425c1.896-2.049 3.859-4.036 5.86-6.045l2.013-2.019c.675-.677 1.353-1.36 2.033-2.052zm155.187 136.407a106.248 106.248.0 01-14.42 16.339l1.12.933a65.151 65.151.0 0120.26 28.96 20.823 20.823.0 011.325 8.673 8.954 8.954.0 01-.363 1.95l-.087.271a4.335 4.335.0 01-4.907 3.021 13.373 13.373.0 01-4.067-1.206 30.816 30.816.0 01-5.523-3.498 64.717 64.717.0 01-19.627-27.589l-.262-.713-.357-.922a117.082 117.082.0 01-15.045 8.426 109.274 109.274.0 01-16.052 5.85 112.816 112.816.0 01-17.025 3.24l.078.41.07.373c.023.12.047.234.073.348l.042.168a65.667 65.667.0 011.787 21.92 48.604 48.604.0 01-2.66 13.52 47.067 47.067.0 01-2.505 5.26 8.054 8.054.0 01-1.407 1.788c-2.394 2.471-5.253 2.492-7.586-.045a16.409 16.409.0 01-2.35-3.379c-1.85-3.474-2.803-7.252-3.483-11.104a70.293 70.293.0 01-.818-15.918 56.83 56.83.0 011.568-10.873l.167-.667c.085-.32.162-.644.224-.969a.292.292.0 00-.015-.132l-.067-.23a3.701 3.701.0 01-.021-.082A105.937 105.937.0 0174.9 236.033l-.56 1.24-.102.231a66.452 66.452.0 01-18.164 24.56l-.423.355a22.954 22.954.0 01-7.247 4.186 7.272 7.272.0 01-3.919.42 4.282 4.282.0 01-3.19-2.55l-.06-.15c-.783-1.894-.718-3.859-.478-5.815l.067-.51a33.355 33.355.0 012.59-8.572 67.669 67.669.0 0115.947-22.714l.556-.52c.093-.086.184-.173.275-.262.086-.124.16-.256.22-.394A107.611 107.611.0 0143.287 206.7l.19-.017.65-.062c.193-.018.369-.03.545-.03 5.06-.005 10.12.009 15.179-.008l3.794-.018a2.83 2.83.0 012.228.978 88.388 88.388.0 0023.1 17.07l.6.304a84.178 84.178.0 0029.898 8.887c28.343 2.755 52.723-5.838 73.142-25.777a4.599 4.599.0 013.605-1.47c2.947.036 5.896.044 8.844.042l5.896-.01 2.949-.002h1.523l.106.356zm-26.342-90.316c.373.0.742.006 1.109.013l1.093.022c.724.013 1.439.015 2.148-.026l.531-.039c1.802-.163 3.091.481 4.405 1.692 6.323 5.826 12.7 11.592 19.071 17.364l3.966 3.595.45.4.675.595.799-.68c.171-.147.339-.293.503-.443a19230.8 19230.8.0 0023.608-21.525 3.277 3.277.0 012.362-.995l.167.005c1.21.049 2.422.045 3.66.036l1.498-.011c.252-.002.506-.003.761-.003v63.38a.948.948.0 01-.097.021l-.14.02-.18.02-.22.02-.255.017-.447.026-.897.037-1.06.032-1.188.025-1.817.025-1.639.01-1.653.002-1.082-.005-1.3-.013-.978-.015-.686-.015-.637-.017-.762-.028-.496-.024-.424-.027-.239-.02-.2-.02a4.685 4.685.0 01-.087-.012l-.141-.022v-32.098l-.323-.153-16.383 14.942-16.516-14.879-.316.116-.007 2.679v29.509h-16.497c-.016-.053-.031-.251-.046-.58l-.017-.455-.017-.575-.024-1.076-.023-1.314-.03-2.093-.033-3.101-.047-5.884-.032-5.84-.027-7.156-.017-8.245-.002-5.379.009-6.732.013-3.813.023-4.033.025-2.81.025-1.825.022-1.095.015-.588.017-.47.018-.345c.003-.046.006-.088.01-.124zm-152.24.073h16.398c.013.042.026.18.039.406l.018.404.018.53.016.652.025 1.19.036 2.508.027 2.424.028 3.479.037 6.391.017 4.372.018 8.267.003 5.583-.006 6.347-.01 4.294-.02 4.749-.022 3.515-.035 3.555-.02 1.461-.014.844-.016.732-.017.616-.017.494-.018.365c-.01.15-.02.25-.03.295H36.996a277.08 277.08.0 01-.048-6.9l.009-3.445-.001-1.722-.004-1.707-.002-3.422.003-6.924H16.63v23.904a1.2 1.2.0 01-.116.027l-.162.026-.205.024-.383.035-.303.021-.706.04-.61.025-.904.03-.737.02-1.043.02-1.66.022-1.716.01H6.66l-1.384-.009-1.551-.022-.939-.02-.84-.027-.553-.024-.329-.017-.293-.019-.367-.03a7.294 7.294.0 01-.103-.011l-.172-.023a1.687 1.687.0 01-.128-.024v-63.324h16.564v22.37a.972.972.0 00.096.02l.138.021.177.02.336.028.415.026.665.033.576.022.635.02 1.423.036 1.864.032 1.135.014 1.761.014 1.789.006 2.343-.005 1.395-.01 1.308-.017 1.193-.022 1.05-.028.88-.035.433-.023.357-.026.192-.02a.93.93.0 00.08-.009l.133-.02.012-4.084.003-1.375.002-2.853-.002-14.142zm36.054 63.45v-63.262c.03-.01.09-.02.18-.028l.22-.018.14-.01.525-.025.682-.025.826-.024 1.308-.029 1.52-.027 1.704-.025 4.374-.046 2.123-.016 5.002-.026 3.952-.01 4.384.002 3.563.012 2.737.019 1.99.022 1.67.028.567.013.732.021.58.024.296.017.22.018.08.01v13.482c-.528.038-1.073.11-1.619.111l-9.63.007-11.413-.002v10.487h20.058v13.95h-19.88a3.407 3.407.0 00-.078.448l-.03.255-.026.294-.037.505-.023.375-.03.615-.026.666-.027.951-.016.747-.01.764-.008 1.028.003 1.264.008.73.009.467.01.45.021.632.026.573.02.345.022.311.025.274.014.122c.508.035 1.052.102 1.597.103l9.63.007 11.415-.002v13.426h-39.38zm58.17.024a5.015 5.015.0 01-.035-.479l-.016-.437-.015-.562-.014-.68-.02-1.231-.018-1.466-.03-3.56-.02-3.516-.019-5.581-.01-7.949.006-10.192.022-8.11.03-6.587.03-4.327.03-3.08.026-2.056.014-.877.022-1.109.016-.594.016-.472.017-.343c.009-.138.017-.226.026-.26h16.338v46.775l.503.03.46.028.431.023c.14.005.279.009.417.009l9.701.005 11.45-.001v16.6h-39.358z"/></svg> Helm Charts</a>
<a href=/whats-new/2025-12-12-helm-charts-changelog/ class="submenu-style submenu-link display-block"><i class='fas fa-bell'></i>Helm Charts Repository Updates</a></div></div></li><li class=topnav-spacer></li><li class="list-horizontal theme-toggle-li"><button id=theme-toggle-btn class=theme-toggle-btn type=button aria-label="Switch to light mode" title="Switch to light mode">
<span class="theme-toggle-icon theme-toggle-sun"><i class="fas fa-sun"></i>
</span><span class="theme-toggle-icon theme-toggle-moon"><i class="fas fa-moon"></i></span></button></li><li class="list-horizontal topnav-help-li"><button class=topnav-help-btn onclick=window.ShortcutsModal&&window.ShortcutsModal.open() title="Keyboard shortcuts" aria-label="Show keyboard shortcuts">
<kbd>?</kbd></button></li><li class="list-horizontal topnav-search-li"><button class=topnav-search-btn onclick=window.SearchModal&&window.SearchModal.open() title=Search aria-label="Open search">
<i class="fas fa-search"></i>
<kbd class=topnav-search-kbd><span class=kbd-mac>âŒ˜K</span><span class=kbd-other>Ctrl+K</span></kbd></button></li></ul></section><div class=sub-top-nav><div id=breadcrumbs class="display-inline float-unset" itemscope itemtype=http://schema.org/BreadcrumbList><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle aria-label="Toggle Sidebar"><i class="fas fa-bars"><p class=hide>&nbsp;navi</p></i></a></span><span id=toc-menu aria-label="Table of Contents"><i class="fas fa-list-alt"><span class=hidden-toc>navigation</span></i></span>
<span class=links><span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/ansible/><span itemprop=name>Ansible Platform</span><meta itemprop=position content='2'></a></span> > Ansible Style Guide</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#_general_recommendations>General Recommendations</a></li><li><a href=#_optimize_playbook_execution>Optimize Playbook Execution</a></li><li><a href=#_name_tasks_and_plays>Name Tasks and Plays</a></li><li><a href=#_variables_in_task_names>Variables in Task Names</a></li><li><a href=#_omitting_unnecessary_information>Omitting Unnecessary Information</a></li><li><a href=#_names>Names</a></li><li><a href=#_use_modules_instead_of_command_or_shell>Use Modules instead of command or shell</a></li><li><a href=#_documenting_a_taskplay>Documenting a Task/Play</a></li><li><a href=#_end_a_file>End a File</a></li><li><a href=#_quotes>Quotes</a></li><li><a href=#_sudo>Sudo</a></li><li><a href=#_hosts_declarations>Hosts Declarations</a></li><li><a href=#_tasks_declarations>Tasks Declarations</a></li><li><a href=#_include_declaration>Include Declaration</a></li><li><a href=#_booleans>Booleans</a></li><li><a href=#_key_value_pairs>Key Value Pairs</a></li><li><a href=#_using_map_syntax>Using Map Syntax</a></li><li><a href=#_spacing>Spacing</a></li><li><a href=#_variable_names>Variable Names</a></li><li><a href=#_jinja_variables>Jinja Variables</a></li><li><a href=#_comparing>Comparing</a></li><li><a href=#_delegation>Delegation</a></li><li><a href=#_playbook_file_extension>Playbook File Extension</a></li><li><a href=#_template_file_extension>Template File Extension</a></li><li><a href=#_vaults>Vaults</a></li><li><a href=#_debug_and_comments>Debug and Comments</a></li><li><a href=#_use_modules_copy_or_templates_instead_of_linefile_or_blockfile>Use Modules copy or templates instead of linefile or blockfile</a></li><li><a href=#_use_module_synchronize_instead_of_copy_for_large_files>Use Module synchronize Instead of copy for Large Files</a></li><li><a href=#_do_not_show_sensitive_data_in_ansible_output>Do not Show Sensitive Data in Ansible Output</a></li><li><a href=#_use_block_module>Use Block-Module</a></li><li><a href=#_enable_cpu_and_memory_profiling>Enable CPU and Memory Profiling</a></li><li><a href=#_enable_task_and_role_profiling>Enable Task and Role Profiling</a></li><li><a href=#_directory_structure>Directory Structure</a></li></ul></nav></div></div><div class=social><a href="https://www.facebook.com/sharer/sharer.php?u=https%253A%252F%252Fblog.stderr.at%252Fansible%252F2021%252F11%252Fansible-style-guide%252F" target=_blank rel="noopener noreferrer" class="facebook no-highlight" aria-label="share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-facebook" width="24" height="24" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a href="https://twitter.com/intent/tweet?url=https%253A%252F%252Fblog.stderr.at%252Fansible%252F2021%252F11%252Fansible-style-guide%252F&amp;text=Ansible%2bStyle%2bGuide" target=_blank rel="noopener noreferrer" class="twitter no-highlight" aria-label="share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-x" width="100" height="100" viewBox="0 0 30 30"><path d="M26.37 26l-8.795-12.822.015.012L25.52 4h-2.65l-6.46 7.48L11.28 4H4.33l8.211 11.971L12.54 15.97 3.88 26h2.65l7.182-8.322L19.42 26h6.95zM10.23 6l12.34 18h-2.1L8.12 6h2.11z"/></svg></div></div></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%253A%252F%252Fblog.stderr.at%252Fansible%252F2021%252F11%252Fansible-style-guide%252F" target=_blank rel="noopener noreferrer" class="linkedin no-highlight" aria-label="share on LinkedIn"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg></div></div></a><a href="https://api.whatsapp.com/send?text=Ansible%2bStyle%2bGuide%20https%253A%252F%252Fblog.stderr.at%252Fansible%252F2021%252F11%252Fansible-style-guide%252F" target=_blank rel="noopener noreferrer" class="whatsapp no-highlight" aria-label="share on WhatsApp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a href="mailto:?subject=Ansible%2bStyle%2bGuide&amp;body=Ansible%2bStyle%2bGuide%250A%250AHowto%2bwrite%2band%2bdebug%2bAnsible%2bplaybooks%250A%250Ahttps%253A%252F%252Fblog.stderr.at%252Fansible%252F2021%252F11%252Fansible-style-guide%252F" class="email no-highlight" aria-label="share via Email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg></div></div></a><a href=/rss/ class="rss no-highlight" aria-label=RSS><div class="resp-sharing-button resp-sharing-button--rss resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.731 455.731"><g><rect x="0" y="0" style="fill:transparent" width="455.731" height="455.731"/><g><path style="" d="M296.208 159.16C234.445 97.397 152.266 63.382 64.81 63.382v64.348c70.268.0 136.288 27.321 185.898 76.931 49.609 49.61 76.931 115.63 76.931 185.898h64.348C391.986 303.103 357.971 220.923 296.208 159.16z"/><path style="" d="M64.143 172.273v64.348c84.881.0 153.938 69.056 153.938 153.939h64.348c0-120.364-97.922-218.287-218.286-218.287z"/><circle style="" cx="109.833" cy="346.26" r="46.088"/></g></g></svg></div></div></a></div></div></div></header><div id=head-tags><div class=tags><a class=tag-link href=/tags/ansible>Ansible</a>
<a class=tag-link href=/tags/controller>Controller</a>
<a class=tag-link href=/tags/automation-controller>Automation Controller</a>
<a class=tag-link href=/tags/style>Style</a>
<a class=tag-link href=/tags/styleguide>StyleGuide</a>
<a class=tag-link href=/tags/best-practices>Best Practices</a>
<a class=tag-link href=/tags/playbook>Playbook</a>
<a class=tag-link href=/tags/role>Role</a></div></div><div id=body-inner><h1 class="gradient-header article">Ansible Style Guide</h1><div class="categories tracked"><a id=textElement class="category-link no-highlight ansible" href=/categories/ansible>Ansible</a></div><p class="tracked article-meta"><span class=publish-date datetime=2021-11-30T00:00:00Z><i class="fas fa-calendar-alt"></i>
<strong>November 30, 2021</strong>
<span class=updated-date title="Last updated on December 18, 2025"><i class="fas fa-sync-alt"></i> Updated Dec 18, 2025
</span></span><span class=divider>-
</span><span class=author><a href=/authors/thomas-jungbauer><img class=avatar src=/img/authors/thomas-jungbauer.png alt="Thomas Jungbauer" width=35 height=35>
Thomas Jungbauer
</a></span><span class=divider>-
</span><span class=readtime title="3763 words"><i class="fas fa-clock"></i>
<strong>19 min read</strong>
<span class=word-count>(3763 words)</span></span><div class=bookmark-wrapper><button class=bookmark-btn data-url=/ansible/2021/11/ansible-style-guide/ data-title="Ansible Style Guide" data-section=ansible data-date=2021-11-30 title="Save for later">
<i class="far fa-bookmark bookmark-icon"></i>
<span class=bookmark-text>Save</span>
</button>
<button class=print-btn onclick=window.print() title="Print this article">
<i class="fas fa-print"></i>
<span>Print</span>
</button>
<button class=reader-mode-toggle title="Toggle reader mode (R)" aria-pressed=false>
<i class="fas fa-book-reader"></i>
<span class=toggle-text>Reader Mode</span></button></div><script>(function(){const n="blog-bookmarks";function e(){try{return JSON.parse(localStorage.getItem(n))||[]}catch{return[]}}function i(e){localStorage.setItem(n,JSON.stringify(e))}function a(t){return e().some(e=>e.url===t)}function r(n){const r=n.dataset.url,l=n.dataset.title,d=n.dataset.section,u=n.dataset.date;let a=e();const c=a.findIndex(e=>e.url===r);c>-1?(a.splice(c,1),t(n,!1),s("Bookmark removed")):(a.unshift({url:r,title:l,section:d,date:u,savedAt:(new Date).toISOString()}),t(n,!0),s("Article saved!")),i(a),o(),window.dispatchEvent(new CustomEvent("bookmarks-changed"))}function t(e,t){const n=e.querySelector(".bookmark-icon"),s=e.querySelector(".bookmark-text");t?(e.classList.add("bookmarked"),n.classList.remove("far"),n.classList.add("fas"),s.textContent="Saved"):(e.classList.remove("bookmarked"),n.classList.remove("fas"),n.classList.add("far"),s.textContent="Save")}function s(e){const n=document.querySelector(".bookmark-toast");n&&n.remove();const t=document.createElement("div");t.className="bookmark-toast",t.innerHTML='<i class="fas fa-check"></i> '+e,document.body.appendChild(t),setTimeout(()=>t.classList.add("show"),10),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)},2e3)}function o(){const t=document.querySelector(".bookmarks-count");if(t){const n=e().length;t.textContent=n,t.style.display=n>0?"inline-block":"none"}}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".bookmark-btn");e&&(t(e,a(e.dataset.url)),e.addEventListener("click",function(e){e.preventDefault(),r(this)})),o()})})()</script></p><div class=paragraph><p>You should always follow the <a href=https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html target=_blank rel=noopener>Best Practices</a> and <a href=https://ansible-lint.readthedocs.io/en/latest/ target=_blank rel=noopener>Ansible Lint</a> rules defined by the Ansible documentation when developing playbooks.</p></div><div class=paragraph><p>Although very basic, the <a href=https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html target=_blank rel=noopener>Best Practices</a> document gives a few guidelines to be able to carry out well-structured playbooks and roles, it contains recommendations that evolve with the project, so it is recommended to review it regularly. It is advisable to review the organization of content in Ansible.</p></div><div class=paragraph><p>The <a href=https://ansible-lint.readthedocs.io/en/latest/ target=_blank rel=noopener>Ansible Lint</a> documentation shows us through this tool the syntax rules that will be checked in the testing of roles and playbooks, the rules that will be checked are indicated in this document in their respective section.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>This style guide is meant as a base of playbook development. It is not the ultimate truth. Always verify and apply appropriate company rules. There are many additional references available, such as: <a href=https://github.com/whitecloud/ansible-styleguide class=bare>https://github.com/whitecloud/ansible-styleguide</a> or <a href=https://github.com/redhat-cop/automation-good-practices class=bare>https://github.com/redhat-cop/automation-good-practices</a></td></tr></tbody></table></div><div class=sect1><h2 id=_general_recommendations>General Recommendations</h2><div class=sectionbody><div class=ulist><ul><li><p>Treat your Ansible content like code: Any playbook, role, inventory or collection should be versionized using Git or a similar tool.</p></li><li><p>Iterate: start with basic playbook and refactor later</p></li><li><p>Use multiple Git repositories: on per role/collection, separate inventory from other repositories</p></li><li><p>Use human-meaningful names in inventory files</p></li><li><p>group hosts in inventory files</p></li><li><p>use a consistent <a href=#_directory_structure>Directory Structure</a></p></li></ul></div></div></div><div class=sect1><h2 id=_optimize_playbook_execution>Optimize Playbook Execution</h2><div class=sectionbody><div class="olist arabic"><ol class=arabic><li><p>Disable facts gathering if it is not required.</p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>Try not to use: <code>ansible_facts[â€˜hostnameâ€™]</code> (or â€˜nodenameâ€™)</p></li><li><p>Try to use <code>inventory_hostname</code> and <code>inventory_hostname_short</code> instead</p></li><li><p>It is possible to selectively gather facts (<code>gather_subnet</code>)</p></li><li><p>Consider caching facts</p></li></ol></div></li><li><p>Increase Parallelism</p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>Ansible runs 1st task on every host, then 2nd task on every host â€¦</p></li><li><p>Use â€œforksâ€ (default is 5) to control how many connections can be active (load will increase, try first with conservative values)</p></li><li><p>While testing forks analize <a href=#_enable_cpu_and_memory_profiling>Enable CPU and Memory Profiling</a></p></li></ol></div></li><li><p>If you use the module "copy" for large files: do not use â€œcopyâ€ module. Use â€œsynchronizeâ€ module instead (based on rsync)</p></li><li><p>Use lists when ever a modules support it (i.e. yum)
Instead of</p></li></ol></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>tasks:
 - name: Ensure the packages are installed
   yum:
     name: &#34;{{ item }}&#34;
     state: present
   loop:
     - httpd
     - mod_ssl
     - httpd-tools
     - mariadb-server
     - mariadb
     - php
     - php-mysqlnd</code></pre></div></div><div class=paragraph><p>use</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>tasks:
 - name: Ensure the packages are installed
   yum:
     state: present
     name:
       - httpd
       - mod_ssl
       - httpd-tools
       - mariadb-server
       - mariadb
       - php
       - php-mysqlnd</code></pre></div></div><div class="olist arabic"><ol class=arabic start=5><li><p>Optimize SSH Connections</p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>in <em>ansible.cfg</em> set</p><div class="olist lowerroman"><ol class=lowerroman type=i><li><p>ControlMaster</p></li><li><p>ControlPersist</p></li><li><p>PreferredAuthentications</p></li></ol></div></li></ol></div></li><li><p>Enabling <strong>Pipelining</strong></p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>Not enabled by default</p></li><li><p>reduces number of SSH operations</p></li><li><p>requires to disable <strong>requiertty</strong> in sudo options</p></li></ol></div></li></ol></div><hr></div></div><div class=sect1><h2 id=_name_tasks_and_plays>Name Tasks and Plays</h2><div class=sectionbody><div class=paragraph><p>Every task or play should be explicitly named in a way that the purpose is easily understood and can be referred to if the playbook has to be restarted from a certain task.</p></div><div class=paragraph><p>For example the following is hard to read and debug:</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash>PLAY [localhost]
********************************

TASK [include_vars]
********************************
ok: [localhost]

TASK [yum]
********************************
ok: [localhost]</code></pre></div></div><div class=paragraph><p>While with naming it is easier to follow what is happening:</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash>PLAY [Create a new virtual machine]
********************************

TASK [Include vmware-credentials]
********************************
ok: [localhost]

TASK [Install required packages with yum]
********************************
ok: [localhost]</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
# set another variable
- set_fact:
    my_second_var: &#34;{{ my_var }}&#34;</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: set another variable
  set_fact:
    my_second_var: &#34;{{ my_var }}&#34;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Better understanding what is currently happening in a play and better possibility to debug.</p></div><hr></div></div><div class=sect1><h2 id=_variables_in_task_names>Variables in Task Names</h2><div class=sectionbody><div class=paragraph><p>Include as much information as necessary to explain the purpose of a task. Make usage of variables inside a task name to create dynamic output messages.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>#bad
- name: &#39;Change status&#39;
  service:
    enabled: true
    name: &#39;httpd&#39;
    state: &#39;{{ state }}&#39;
  become: true</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>#good
- name: &#39;Change status of httpd to {{ state }}&#39;
  service:
    enabled: true
    name: &#39;httpd&#39;
    state: &#39;{{ state }}&#39;
  become: true</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>This will help to easily understand log outputs of playbooks.</p></div><hr></div></div><div class=sect1><h2 id=_omitting_unnecessary_information>Omitting Unnecessary Information</h2><div class=sectionbody><div class=paragraph><p>While name tasks in a playbook, <strong>do not</strong> include the name of the role which is currently executed, since Ansible will do this automatically.</p></div><div class=paragraph><p><strong class=big>Reason</strong><br>Avoiding the same output twice on the console will prevent confusions.</p></div><hr></div></div><div class=sect1><h2 id=_names>Names</h2><div class=sectionbody><div class=paragraph><p>All the newly created Ansible roles should follow the name convention using dashes if necessary:
<code>[company]-[action]-[function/technology]</code></p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
lvm</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
mycompany-setup-lvm</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>If using roles from Ansible Galaxy, it will keep consistency about which roles are created internally.</p></div><hr></div></div><div class=sect1><h2 id=_use_modules_instead_of_command_or_shell>Use Modules instead of command or shell</h2><div class=sectionbody><div class=paragraph><p>Before using the <code>command</code> or <code>shell</code> module, verify if there is already a module available which can avoid the usage of raw shell command.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: install httpd
  tasks:
    - command: &#34;yum install httpd&#34;</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: install packages
  tasks:
    - name: &#39;install httpd&#39;
      yum:
        name: &#39;httpd&#39;
        state: &#39;present&#39;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>While raw command could be seen as a security risk in general, another reason to avoid them is the loss of immutability of the ansible playbooks or roles. Ansible cannot verify if a command has been already executed before or not and will therefore execute it every time the playbook is running.</p></div><hr></div></div><div class=sect1><h2 id=_documenting_a_taskplay>Documenting a Task/Play</h2><div class=sectionbody><div class=paragraph><p>Every playbook, role or task should start with a documentation <em>why</em> this code has been written and what it does and should include an example usage if applicable. The comment should be followed by <code>---`</code> with no blank lines around it, to indicate the actual start of the yaml definition</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>#bad
- name: &#39;Change httpd status&#39;
  service:
    enabled: true
    name: &#39;httpd&#39;
    state: &#39;{{ state }}&#39;
  become: true</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>#good
# Example usage: ansible-playbook -e state=started playbook.yml
# This playbook changes the state of the httpd daemon

---

- name: &#39;Change httpd status&#39;
  service:
    enabled: true
    name: &#39;httpd&#39;
    state: &#39;{{ state }}&#39;
  become: true</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>This common programmatic practice helps to quickly understand the purpose and usage of a playbook or role.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Yamllint <a href=https://yamllint.readthedocs.io/en/stable/rules.html#module-yamllint.rules.document_start target=_blank rel=noopener>document-start rule</a></p></div><hr></div></div><div class=sect1><h2 id=_end_a_file>End a File</h2><div class=sectionbody><div class=paragraph><p>Files should be ended with a newline.</p></div><div class=paragraph><p><strong class=big>Reason</strong><br>This is common Unix best practice which avoids any prompt misalignment when printing files in a terminal.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Yamllint <a href=https://yamllint.readthedocs.io/en/stable/rules.html#module-yamllint.rules.new_line_at_end_of_file target=_blank rel=noopener>new-line-at-end-of-file rule</a></p></div><hr></div></div><div class=sect1><h2 id=_quotes>Quotes</h2><div class=sectionbody><div class=paragraph><p>Strings should be quoted, while quotes for booleans (e.g. true/false) or integers (i.g. 42) should be avoided.</p></div><div class=paragraph><p>Do <strong>NOT</strong> quote:</p></div><div class=ulist><ul><li><p>hosts: targets (e.g. hosts: databases rather than hosts: â€˜databasesâ€™)</p></li><li><p>include_tasks: and include_roles: target file names</p></li><li><p>task and role names</p></li><li><p>registered variables</p></li><li><p>number values</p></li><li><p>boolean values</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>It is possible to use single or double quotes. In this document single quotes are used, as it seems to be more common. Double quotes are often seen in European countries, especially German speaking countries. The most important thing is to stick to one style.</td></tr></tbody></table></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: &#39;start robot named my-robot&#39;
  service:
    name: my-robot
    state: started
    enabled: true
  become: true</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: &#39;start robot named my-robot&#39;
  service:
    name: &#39;my-robot&#39;
    state: &#39;started&#39;
    enabled: true
  become: true

# double quotes w/ nested single quotes
- name: &#39;start all robots&#39;
  service:
    name: &#39;{{ item[&#34;robot_name&#34;] }}&#39;
    state: &#39;started&#39;
    enabled: true
  with_items: &#39;{{ robots }}&#39;
  become: true

# double quotes to escape characters
- name &#39;print some text on two lines&#39;
  debug:
    msg: &#34;This text is on\ntwo lines&#34;

# folded scalar style
- name: &#39;robot infos&#39;
  debug:
    msg: &gt;
      Robot {{ item[&#39;robot_name&#39;] }} is {{ item[&#39;status&#39;] }} and in {{ item[&#39;az&#39;] }}
      availability zone with a {{ item[&#39;curiosity_quotient&#39;] }} curiosity quotient.
  with_items: robots

# folded scalar when the string has nested quotes already
- name: &#39;print some text&#39;
  debug:
    msg: &gt;
      &#34;I haven&#39;t the slightest idea,&#34; said the Hatter.

# do not quote booleans/numbers
- name: &#39;download google homepage&#39;
  get_url:
    dest: &#39;/tmp&#39;
    timeout: 60
    url: &#39;https://google.com&#39;
    validate_certs: true

# variables example 1
- name: &#39;set a variable&#39;
  set_fact:
    my_var: &#39;test&#39;

# variables example 2
- name: &#39;print my_var&#39;
  debug:
    var: my_var
  when: ansible_os_family == &#39;Darwin&#39;

# variables example 3
- name: &#39;set another variable&#39;
  set_fact:
    my_second_var: &#39;{{ my_var }}&#39;</code></pre></div></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Yamllint <a href=https://yamllint.readthedocs.io/en/stable/rules.html#module-yamllint.rules.quoted_strings target=_blank rel=noopener>quoted-strings rule</a></p></div><hr></div></div><div class=sect1><h2 id=_sudo>Sudo</h2><div class=sectionbody><div class=paragraph><p>Use the new become syntax when designating that a task needs to be run with sudo privileges</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>#bad
- name: &#39;template client.json to /etc/sensu/conf.d/&#39;
  template:
    dest: &#39;/etc/sensu/conf.d/client.json&#39;
    src: &#39;client.json.j2&#39;
  sudo: true</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: &#39;template client.json to /etc/sensu/conf.d/&#39;
  template:
    dest: &#39;/etc/sensu/conf.d/client.json&#39;
    src: &#39;client.json.j2&#39;
  become: true</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Using sudo was deprecated at <a href=https://docs.ansible.com/ansible/latest/user_guide/become.html>Ansible version 1.9.1</a></p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Ansible-lint <a href=https://docs.ansible.com/ansible-lint/rules/default_rules.html target=_blank rel=noopener>E103 rule</a></p></div><hr></div></div><div class=sect1><h2 id=_hosts_declarations>Hosts Declarations</h2><div class=sectionbody><div class=paragraph><p>Host sections be defined in such a way that it follows this general order:</p></div><div class="olist arabic"><ol class=arabic><li><p>host declaration</p></li><li><p>host options in alphabetical order</p></li><li><p>pre_tasks</p></li><li><p>roles</p></li><li><p>tasks</p></li></ol></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># example
- hosts: &#39;webservers&#39;
  remote_user: &#39;centos&#39;
  vars:
    tomcat_state: &#39;started&#39;
  pre_tasks:
    - name: &#39;set the timezone to America/Boise&#39;
      lineinfile:
        dest: &#39;/etc/environment&#39;
        line: &#39;TZ=America/Boise&#39;
        state: &#39;present&#39;
      become: true
  roles:
    - { role: &#39;tomcat&#39;, tags: &#39;tomcat&#39; }
  tasks:
    - name: &#39;start the tomcat service&#39;
      service:
        name: &#39;tomcat&#39;
        state: &#39;{{ tomcat_state }}&#39;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>A global definition about the order of these items, will create an easy and consistent human readable code.</p></div><hr></div></div><div class=sect1><h2 id=_tasks_declarations>Tasks Declarations</h2><div class=sectionbody><div class=paragraph><p>A task should be defined in such a way that it follows this general order:</p></div><div class="olist arabic"><ol class=arabic><li><p>task name</p></li><li><p>tags</p></li><li><p>task map declaration (e.g. service:)</p></li><li><p>task parameters in alphabetical order (remember to always use multi-line map syntax)</p></li><li><p>loop operators (e.g. with_items)</p></li><li><p>task options in alphabetical order (e.g. become, ignore_errors, register)</p></li></ol></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># example
- name: &#39;create some ec2 instances&#39;
  tags: &#39;ec2&#39;
  ec2:
    assign_public_ip: true
    image: &#39;ami-c7d092f7&#39;
    instance_tags:
      Name: &#39;{{ item }}&#39;
    key_name: &#39;my_key&#39;
  with_items: &#39;{{ instance_names }}&#39;
  ignore_errors: true
  register: ec2_output
  when: ansible_os_family == &#39;Darwin&#39;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>A global definition about the order of these items, will create an easy and consistent human readable code.</p></div><hr></div></div><div class=sect1><h2 id=_include_declaration>Include Declaration</h2><div class=sectionbody><div class=paragraph><p>For include statements, make sure to quote filenames and only use blank lines between include statements if they are multi-line (e.g. they have tags).</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- include: other_file.yml

- include: &#39;second_file.yml&#39;

- include: third_file.yml tags=third</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good

- include: &#39;other_file.yml&#39;
- include: &#39;second_file.yml&#39;

- include: &#39;third_file.yml&#39;
  tags: &#39;third&#39;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Using such syntax, will create an easy and consistent human readable code.</p></div><hr></div></div><div class=sect1><h2 id=_booleans>Booleans</h2><div class=sectionbody><div class=paragraph><p>Use true/false instead of yes/no (or 1/0).</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: &#39;start httpd&#39;
  service:
    name: &#39;httpd&#39;
    state: &#39;restarted&#39;
    enabled: 1
  become: &#39;yes&#39;</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: &#39;start httpd&#39;
  service:
    name: &#39;httpd&#39;
    state: &#39;restarted&#39;
    enabled: true
  become: true</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Ansible can read boolean values in many different ways, like: True/False, true/false, yes/no, 1/0. It makes sense to stick to one option, which is then equally used in any playbook or role. It is recommended to use true/false since Java and Javascript are using the same values for boolean values.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Yamllint <a href=https://yamllint.readthedocs.io/en/stable/rules.html#module-yamllint.rules.truthy target=_blank rel=noopener>truthy rule</a></p></div><div class=paragraph><p>Required config: <code>truthy: {allowed-values: ["true", "false"]}`</code></p></div><hr></div></div><div class=sect1><h2 id=_key_value_pairs>Key Value Pairs</h2><div class=sectionbody><div class=paragraph><p>Only one space should be used after the colon, when defining key/value pairs.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name : &#39;start httpd&#39;
  service:
    name    : &#39;httpd&#39;
    state   : &#39;restarted&#39;
    enabled : true
  become : true</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: &#39;start httpd&#39;
  service:
    name: &#39;httpd&#39;
    state: &#39;restarted&#39;
    enabled: true
  become: true</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>It increases human readability and reduces changeset collisions for version control.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Yamllint <a href=https://yamllint.readthedocs.io/en/stable/rules.html#module-yamllint.rules.colons target=_blank rel=noopener>colons rule</a></p></div><div class=paragraph><p>Required config: <code>colons: {max-spaces-before: 0, max-spaces-after: 1}</code></p></div><hr></div></div><div class=sect1><h2 id=_using_map_syntax>Using Map Syntax</h2><div class=sectionbody><div class=paragraph><p><strong>Always use the map syntax</strong> for better readability.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: &#39;create conf.d directory&#39;
  file: &#39;path=/etc/httpd/conf.d/ state=directory mode=0755 owner=httpd group=httpd&#39;
  become: true

- name: &#39;copy mod_ssl.conf to /etc/httpd/conf.d&#39;
  copy: &#39;dest=/etc/httpd/conf.d/ src=mod_ssl.conf&#39;
  become: true</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: &#39;create conf.d directory&#39;
  file:
    group: &#39;httpd&#39;
    mode: &#39;0755&#39;
    owner: &#39;httpd&#39;
    path: &#39;/etc/httpd/conf.d&#39;
    state: &#39;directory&#39;
  become: true

- name: &#39;copy mod_ssl.conf to /etc/httpd/conf.d&#39;
  copy:
    dest: &#39;/etc/httpd/conf.d/&#39;
    src: &#39;mod_ssl.conf&#39;
  become: true</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>It increases human readability and reduces changeset collisions for version control.</p></div><hr></div></div><div class=sect1><h2 id=_spacing>Spacing</h2><div class=sectionbody><div class=paragraph><p>You should have blank lines between two host blocks, between two task blocks, and between host and include blocks. When indenting, you should use 2 spaces to represent sub-maps, and multi-line maps should start with a <code>-</code>. For a more in-depth example of how spacing (and other things) please take a look at the example below</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># Example: ansible-playbook --ask-become-pass --ask-vault-pass style.yml
#
# This is a sample Ansible script to showcase all of our style decisions.
# Pay close attention to things like spacing, where we use quotes, etc.
# The only thing you can ignore is where comments are, except this first comment:
# It&#39;s generally a good idea to include some good information like sample usage
# at the beginning of your file, so that someone can run head on the script
# to see what they should do.
#
# A good rule of thumb on quoting is to quote anything that represents a value
# that does not represent either a primitive type, or something within the
# playbook; e.g. do not quote integers, booleans, variable names, boolean logic
# Variable names still need to be quoted when they are module parameters for
# Ansible to properly resolve them.
# You should also always have single quotes around the outer string, and
# double quotes on the inside.
# If for some reason this is not possible or it would require escaping quotes
# (which you should avoid if you can), use the scalar string operator (shown
# in this playbook).
#
# Directory structure style:
# Your directory structure should match the structure described by the Ansible
# developers: http://docs.ansible.com/ansible/playbooks_best_practices.html
#
# ---
#
# - include: &#39;role_name.yml&#39;
#   become: true # only if every task in the role requires super user
#
# The self-named yml file contains all of the actual role tasks.
#
# Header comments are followed by blank line, then --- to signify start of YAML,
# then another blank line, then the script.

---

- hosts: &#39;localhost&#39;
  tasks:
    - name: &#39;fail if someone tries to run this&#39;
      fail:
        msg: &#39;this playbook was not meant to actually be ran. just inspect the source!&#39;

- include: &#39;first_include.yml&#39; # quote filenames
- include: &#39;second_include.yml&#39; # no blank line needed between includes without tags

- include: &#39;third_include.yml&#39; # includes with tags should have blank lines between
  tags: &#39;third_include&#39;

- include: &#39;fourth_include.yml&#39;
  tags: &#39;fourth_include&#39;

- hosts: &#39;tag_environment_samplefruit&#39;
  remote_user: &#39;centos&#39; # options in alphabetical order
  vars:
    sample_str: &#39;dood&#39; # use snake_case for variable names
    sample_bool: true # do not quote booleans or integers
    sample_int: 42
  vars_files:
    - &#39;group_vars/secrets.yml&#39;
  pre_tasks: # then pre_tasks, roles, tasks
    - name: &#39;this runs a command that involves both single and double quotes&#39;
      command: &gt;
        echo &#34;I can&#39;t even&#34;
      args:
        chdir: &#39;/tmp&#39;

    - name: &#39;this command just involves double quotes&#39;
      command: &#39;echo &#34;Hey man&#34;&#39;
  roles:
    - { role: &#39;sample_role&#39;, tags: &#39;sample_role&#39; } # use this format for role listing
  tasks:
    - name: &#39;get list of directory permissions in /tmp&#39;
      command: &#39;ls -l /tmp&#39;
      register: tmp_listing # do not quote variable names when registering

    # A task should be defined in the following order:
    # name
    # tags
    # module
    # module arguments, alphabetical
    # loop operator (e.g. with_items, with_fileglob)
    # other options, alphabetical (e.g. become, ignore_errors, when)

    - name: &#39;a more complicated task to show where everything goes: touch all items from /tmp&#39;
      tags: &#39;debug&#39; # tags go immediately after name
      file:
        path: &#39;{{ item }}&#39; # use path for single file actions, dest/src for multi file actions
        state: &#39;touch&#39; # arguments go in alphabetical order
      with_items: tmp_listing.stdout_lines # loop things go immediately after module
      # the rest of the task options are in alphabetical order
      become: true # try to keep become only on the tasks that need it. If every task in a host uses become, then move it up to the host options
      ignore_errors: true
      when: ansible_os_family == &#39;Darwin&#39; and tmp_listing.stdout_lines | length &gt; 1

    - name: &#39;some modules can have maps in their maps (woah man)&#39;
      ec2:
        assign_public_ip: true
        group: [&#39;wca_ssh&#39;, &#39;wca_tomcat&#39;]
        image: &#39;ami-c7d092f7&#39;
        instance_tags:
          Name: &#39;instance&#39;
          service_tomcat: &#39;&#39;
        key_name: &#39;ops&#39;

- hosts: &#39;tag_environment_secondfruit&#39;
  tasks:
    - name: &#39;this task has multiple tags&#39;
      tags: [&#39;tagme&#39;, &#39;tagmetoo&#39;]
      set_fact:
        mr_fact: &#39;w&#39;

    - name: &#39;perform an action&#39;
      action: ec2_facts
      delegate_to: &#39;localhost&#39;

# newline at end of file</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>This produces nice looking code that is easy to read.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Yamllint <a href=https://yamllint.readthedocs.io/en/stable/rules.html#module-yamllint.rules.empty_lines target=_blank rel=noopener>empty-lines rule</a></p></div><hr></div></div><div class=sect1><h2 id=_variable_names>Variable Names</h2><div class=sectionbody><div class=paragraph><p>Names of variables should be as expressive as possible. <a href=https://en.wikipedia.org/wiki/Snake_case target=_blank rel=noopener><strong>snake_case</strong></a> for names will help to make the code human readable. The prefix should contain the name of the role.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: &#39;set some facts&#39;
  set_fact:
    myBoolean: true
    int: 20
    MY_STRING: &#39;test&#39;</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: &#39;set some facts&#39;
  set_fact:
    rolename_my_boolean: true
    rolename_my_int: 20
    rolename_my_string: &#39;test&#39;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Ansible uses snake_case for module names so it makes sense to extend this convention to variable names. Perfixing the variable with the role name, makes it immediately obvious where it is used.</p></div><hr></div></div><div class=sect1><h2 id=_jinja_variables>Jinja Variables</h2><div class=sectionbody><div class=paragraph><p>Use spaces around Jinja variable names to increase readability.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: set some facts
  set_fact:
    my_new_var: &#34;{{my_old_var}}&#34;</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: set some facts
  set_fact:
    my_new_var: &#34;{{ my_old_var }}&#34;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>A proper definition for how to create Jinja variables produces consistent and easily readable code.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Ansible-lint <a href=https://ansible-lint.readthedocs.io/en/latest/default_rules.html#variables-should-have-spaces-before-and-after-var-name target=_blank rel=noopener>E206 rule</a></p></div><hr></div></div><div class=sect1><h2 id=_comparing>Comparing</h2><div class=sectionbody><div class=paragraph><p>Do not compare to literal True/False.<br>Use <code>when: var</code> rather than <code>when: var == True</code> (or conversely <code>when: not var</code>).</p></div><div class=paragraph><p>Do not compare it to empty strings.<br>Use <code>when: var</code> rather than <code>when: var != ""</code> (or conversely <code>when: not var</code> rather than <code>when: var == ""</code>)</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: validate required variables
  fail:
    msg: &#34;No value specified for &#39;{{ item }}&#39;&#34;
  when: (vars[item] is undefined) or (vars[item] is defined and vars[item] | trim == &#34;&#34;)

  with_items: &#34;{{ appd_required_variables }}&#34;

- name: Create an user and add to the global group
  include_tasks: user.yml
  when:
  - username is defined
  - username != &#34;&#34;</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: Validate required variables
  fail:
    msg: &#34;No value specified for &#39;{{ item }}&#39;&#34;
  when: (vars[item] is undefined) or (vars[item] is defined and not vars[item] | trim == &#34;&#34;)
  with_items: &#34;{{ appd_required_variables }}&#34;

- name: Create an user and add to the global group
  include_tasks: user.yml
  when:
  - username is defined
  - username</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Avoid code complexity using quotes and standardize the way literals and empty strings are used</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Ansible-lint <a href=https://ansible-lint.readthedocs.io/en/latest/default_rules.html#don-t-compare-to-literal-true-false target=_blank rel=noopener>E601 rule</a></p></div><hr></div></div><div class=sect1><h2 id=_delegation>Delegation</h2><div class=sectionbody><div class=paragraph><p>Do not use local_action, use delegate_to: localhost</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: Send summary mail
  local_action:
    module: mail
    subject: &#34;Summary Mail&#34;
    to: &#34;{{ mail_recipient }}&#34;
    body: &#34;{{ mail_body }}&#34;
  run_once: true</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: Send summary mail
  mail:
    subject: &#34;Summary Mail&#34;
    to: &#34;{{ mail_recipient }}&#34;
    body: &#34;{{ mail_body }}&#34;
  delegate_to: localhost
  run_once: true</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Avoid complexity, standardization, flexibility and code readability. The module and its parameters are easy to read and can be delegated even to a third party server.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Ansible-lint <a href=https://ansible-lint.readthedocs.io/en/latest/default_rules.html#do-not-use-local-action-use-delegate-to-localhost target=_blank rel=noopener>E504 rule</a></p></div><hr></div></div><div class=sect1><h2 id=_playbook_file_extension>Playbook File Extension</h2><div class=sectionbody><div class=paragraph><p>All Ansible Yaml files should have a .yml extension (and NOT .YML, .yaml etc).</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
~/tasks.yaml</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
~/tasks.yml</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Ansible tooling (like ansible-galaxy init) creates files with a .yml extension. Also, the Ansible documentation website references files with a .yml extension several times. Because of this, it is normal in the Ansible community to use a .yml extension for all Ansible YAML files.</p></div><div class=paragraph><p><strong class=big>Lint rule</strong><br>Ansible-lint <a href=https://ansible-lint.readthedocs.io/en/latest/default_rules.html#use-yml-or-yaml-playbook-extension target=_blank rel=noopener>E205 rule</a></p></div><hr></div></div><div class=sect1><h2 id=_template_file_extension>Template File Extension</h2><div class=sectionbody><div class=paragraph><p>All Ansible Template files should have a .j2 extension.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
~/template.conf</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
~/template.conf.j2</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Ansible Template files will usually have the .j2 extension, which denotes the Jinja2 templating engine used.</p></div><hr></div></div><div class=sect1><h2 id=_vaults>Vaults</h2><div class=sectionbody><div class=paragraph><p>All Ansible Vault files should have a .vault extension (and NOT .yml, .YML, .yaml etc).</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
~/secrets.yml</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
~/secrets.vault</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>It is easier to control unencrypted files automatically for the specific .vault extension.</p></div><hr></div></div><div class=sect1><h2 id=_debug_and_comments>Debug and Comments</h2><div class=sectionbody><div class=paragraph><p>Do not overuse debug and comments in final code as much as possible. Use task and role names to explain what the task or role does. Use the verbose option under ansible for debugging purposes. If debug is used, assign a verbosity option. This will display the message only on certain debugging levels.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># bad
- name: print my_var
  debug:
    var: my_var
  when: ansible_os_family == &#34;Darwin&#34;</code></pre></div></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml># good
- name: print my_var
  debug:
    var: my_var
    verbosity: 2
  when: ansible_os_family == &#34;Darwin&#34;</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>It will keep clean code and consistency avoiding extra debug and comments. Extra debug will spend extra time when running the playbook or role.</p></div><hr></div></div><div class=sect1><h2 id=_use_modules_copy_or_templates_instead_of_linefile_or_blockfile>Use Modules copy or templates instead of linefile or blockfile</h2><div class=sectionbody><div class=paragraph><p>Instead of using the modules <em>linefile</em> and <em>blockfile</em>, which manage changes inside a file, it should be tried to use the modules <code>copy</code> or <code>template</code> instead, which will manage the whole file. For better future proof template should be preferred over copy.</p></div><div class=paragraph><p><strong class=big>Reason</strong><br>When using linefile/blockfile only a single line or a part of a file is managed. It is not easy to remember which part exactly is managed and which is not. Using the template module the whole file is managed by Ansible and there is no confusion about different parts of a file.
Moreover, regular expressions can be avoided, which are often used using linefile.</p></div><hr></div></div><div class=sect1><h2 id=_use_module_synchronize_instead_of_copy_for_large_files>Use Module synchronize Instead of copy for Large Files</h2><div class=sectionbody><div class=paragraph><p>Copying large files takes significantly longer than syncing it. The <code>synchronize</code> modules which are based on rsync can increase the time moving large files from one node to another (or even on the same node).</p></div></div></div><div class=sect1><h2 id=_do_not_show_sensitive_data_in_ansible_output>Do not Show Sensitive Data in Ansible Output</h2><div class=sectionbody><div class=paragraph><p>When using the template module and there are passwords or other sensitive data in the file, use the <code>no_log</code> option to hide this information.</p></div><div class=paragraph><p><strong class=big>Reason</strong><br>For obvious reasons the output of sensitive data on the screen (and logfile) should be prohibited.</p></div><hr></div></div><div class=sect1><h2 id=_use_block_module>Use Block-Module</h2><div class=sectionbody><div class=paragraph><p>Block can help to organize the code and can enable rollbacks.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang=yaml>- block:
    copy:
      src: critical.conf
      dest: /etc/critical/crit.conf
    service:
      name: critical
      state: restarted
  rescue:
   command: shutdown -h now</code></pre></div></div><div class=paragraph><p><strong class=big>Reason</strong><br>Using blocks groups critical tasks together and allows better management when a single task of this block fails.</p></div><hr></div></div><div class=sect1><h2 id=_enable_cpu_and_memory_profiling>Enable CPU and Memory Profiling</h2><div class=sectionbody><div class=paragraph><p>Enabling profiling is extremely useful when testing forks or to analyse memory and cpu consumption in general. It will present a summary of used CPU/memory for the whole play and per task.</p></div><div class=paragraph><p>To enable it:</p></div><div class="olist arabic"><ol class=arabic><li><p>Create a new <strong>control group</strong> - which is required for CPU and memory profiling</p><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash>cgcreate -a root:root -t root:root -g cpuacct,memory,pids:ansible_profile</code></pre></div></div></li><li><p>Configure <em>ansible.cfg</em></p><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-ini hljs" data-lang=ini>callback_whitelist=cgroup_perf_recap
[callback_cgroup_perf_recap]
control_group=ansible_profile</code></pre></div></div></li><li><p>Execute the playbook using <em>cgexec</em></p><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash>cgexec -g cpuacct,memory,pids:ansible_profile ansible-playbook x.yaml</code></pre></div></div></li><li><p>Analyse the usage</p><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash>Memory Execution Maximum: 11146.29MB
cpu Execution Maximum: 112.08%
pids Execution Maximum: 35.00

memory:
lab : creating network (b42e9945-0dc7-20b1-09d1-00000000000a): 11097.35MB â€¦..</code></pre></div></div></li></ol></div><hr></div></div><div class=sect1><h2 id=_enable_task_and_role_profiling>Enable Task and Role Profiling</h2><div class=sectionbody><div class=paragraph><p>The following can be enabled as well, to help debugging playbooks and roles:</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-ini hljs" data-lang=ini>    [defaults]
    callback_whitelist = profile_tasks, profile_role, timer</code></pre></div></div><div class=paragraph><p>Timer: duration of playbook execution (activated by default)
profile_tasks/role: displays execution time per tasks/role</p></div><div class=paragraph><p>This will generate an output like the following:</p></div><div class=imageblock><div class=content><img src=/ansible/images/profiling.png alt=Profiling></div></div><hr></div></div><div class=sect1><h2 id=_directory_structure>Directory Structure</h2><div class=sectionbody><div class=paragraph><p>A consistent directory structure is important to easily understand all playbooks and roles which are written. Ansible knows many different folder structures, any can be used. However, it is important to stick to one structure.</p></div><div class=paragraph><p>The following is an example. Not all folders are usually used and working with collections will change such structure a little bit.</p></div><div class=listingblock><div class=content><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash>.
â”œâ”€â”€ ansible.cfg
â”œâ”€â”€ ansible_modules
â”œâ”€â”€ group_vars
â”‚   â”œâ”€â”€ webservers
â”‚   â””â”€â”€ all
â”œâ”€â”€ hosts
â”‚   â”œâ”€â”€ webserver01
â”‚   â””â”€â”€ webserver02
â”œâ”€â”€ host_vars
â”œâ”€â”€ modules
â”œâ”€â”€ playbooks
â”‚   â””â”€â”€ ansible-cmdb.yml
â””â”€â”€ roles
    â”œâ”€â”€ requirements.yml
    â”œâ”€â”€ galaxy
        â””â”€â”€ dev-sec.ssh-hardening
            â””â”€â”€ auditd
        â”œâ”€â”€ files
        â”‚   â”œâ”€â”€ auditd.conf
        â”‚   â”œâ”€â”€ audit.yml
        â”œâ”€â”€ handlers
        â”‚   â””â”€â”€ main.yml
        â”œâ”€â”€ meta
        â”‚   â””â”€â”€ main.yml
        â””â”€â”€ tasks
            â””â”€â”€ main.yml</code></pre></div></div></div></div><section class=related-articles aria-labelledby=related-heading><h3 id=related-heading><i class="fas fa-link"></i> Related Articles</h3><div class=related-grid><a href=/ansible/2021/10/automation-controller-and-ldap-authentication/ class="related-card no-highlight no-image"><div class=related-card-content><span class=related-card-category>Ansible
</span><span class=related-card-title>Automation Controller and LDAP Authentication</span>
<span class=related-card-meta><time datetime=2021-10-25>Oct 25, 2021
</time><span class=related-card-author>Â· Thomas Jungbauer</span></span></div></a><a href=/ansible/2021/07/ansible-tower-and-downloading-collections/ class="related-card no-highlight no-image"><div class=related-card-content><span class=related-card-category>Ansible
</span><span class=related-card-title>Ansible Tower and downloading collections</span>
<span class=related-card-meta><time datetime=2021-07-31>Jul 31, 2021
</time><span class=related-card-author>Â· Toni Schmidbauer</span></span></div></a><a href=/ansible/2020/04/ansible-azure-resource-manager-example/ class="related-card no-highlight no-image"><div class=related-card-content><span class=related-card-category>Ansible
</span><span class=related-card-title>Ansible - Azure Resource Manager Example</span>
<span class=related-card-meta><time datetime=2020-04-27>Apr 27, 2020
</time><span class=related-card-author>Â· Thomas Jungbauer</span></span></div></a><a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ class="related-card no-highlight no-image"><div class=related-card-content><span class=related-card-category>Ansible
</span><span class=related-card-title>DO410 Ansible and Ansible Tower training notes</span>
<span class=related-card-meta><time datetime=2020-04-06>Apr 6, 2020
</time><span class=related-card-author>Â· Thomas Jungbauer</span></span></div></a></div></section><div class=comments-section id=comments><hr class=comments-divider><h3 class=comments-title><i class="fas fa-comments"></i> Discussion</h3><div id=comments-consent class=comments-consent><div class=consent-box><i class="fab fa-github consent-icon"></i><p class=consent-text>Comments are powered by <strong>GitHub Discussions</strong>.
To participate, you'll need a GitHub account.</p><p class=consent-notice><i class="fas fa-info-circle"></i>
By loading comments, you agree to GitHub's
<a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank rel=noopener>Privacy Policy</a>.
Your data is processed by GitHub, not by this website.</p><button id=load-comments-btn class=load-comments-btn>
<i class="fas fa-comment-dots"></i> Load Comments
</button>
<label class=remember-choice><input type=checkbox id=remember-consent>
<span>Remember my choice for this site</span></label></div></div><div id=giscus-container class=giscus-container style=display:none></div></div><script>(function(){const t=document.getElementById("comments-consent"),e=document.getElementById("giscus-container"),n=document.getElementById("load-comments-btn"),s=document.getElementById("remember-consent"),o="giscus-consent";localStorage.getItem(o)==="granted"&&i(),n&&n.addEventListener("click",function(){s&&s.checked&&localStorage.setItem(o,"granted"),i()});function i(){t&&(t.style.display="none"),e&&(e.style.display="block");const n=document.createElement("script");n.src="https://giscus.app/client.js",n.setAttribute("data-repo","stderrat/stderrat.github.io"),n.setAttribute("data-repo-id","MDEwOlJlcG9zaXRvcnkyNTA1Mjc4OTU="),n.setAttribute("data-category","Comments"),n.setAttribute("data-category-id","DIC_kwDODu7Al84Czfdq"),n.setAttribute("data-mapping","pathname"),n.setAttribute("data-strict","0"),n.setAttribute("data-reactions-enabled","1"),n.setAttribute("data-emit-metadata","0"),n.setAttribute("data-input-position","top"),n.setAttribute("data-theme","preferred_color_scheme"),n.setAttribute("data-lang","en"),n.setAttribute("data-loading","lazy"),n.crossOrigin="anonymous",n.async=!0,e.appendChild(n)}})()</script><footer class=footline></footer></div></div><div id=navigation-bottom><a class="readme-a margin-right-5 margin-bottom-2 inline-flex relative no-highlight" href=/ansible/ title="Ansible Platform"><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-left btn-bottom-prev"></i>
<span class=btn-bottom-text></span> Ansible Platform</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a><a class="readme-a inline-flex relative no-highlight" href=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" style=margin-right:0><div class="w-100 h-100 readmore-btn transition-transform hover:translate-x-2 hover:translate-y-2"><i class="fa fa-chevron-right btn-bottom-next"></i>
<span class=btn-bottom-text></span> Automation Controller and LDAP Authentication</div><div class="absolute w-100 h-100 top-2 left-2 to-beta from-alpha via-alpha btn-gradient-background"></div></a></div><div class=copyright><p>Copyright &copy; 2020 - 2026 Toni Schmidbauer & Thomas Jungbauer</p></div></main><script>(function(){document.addEventListener("DOMContentLoaded",function(){var e,t=document.querySelector(".read-progress");if(!t)return;t.classList.add("position-fixed");function n(){var n,s=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight;e>0&&(n=Math.min(s/e*100,100),t.style.width=n+"%")}e=!1,window.addEventListener("scroll",function(){e||(window.requestAnimationFrame(function(){n(),e=!1}),e=!0)},{passive:!0}),n(),window.addEventListener("resize",n,{passive:!0})})})()</script><div style=left:-1e3px;overflow:scroll;position:absolute;top:-1e3px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1769174902></script><script src=/js/perfect-scrollbar.jquery.min.js?1769174902></script><script src=/js/featherlight.min.js?1769174902></script><script src=/js/webp-upgrade.js?1769174902></script><script src=/js/highlight.pack.js?1769174902></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/learn.js?1769174902></script><script src=/js/yaub.js?1769174902></script><script src=/js/reader-mode.js?1769174902></script><script src=/js/theme-toggle.js?1769174902></script><link href=/pagefind/pagefind-ui.css rel=stylesheet><script src=/pagefind/pagefind-ui.js></script><script src=/js/search-modal.js?1769174902></script><script src=/js/shortcuts-modal.js?1769174902></script><script>function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(".article-box").click(function(e){return window.location=$(this).attr("href"),e.stopPropagation(),!1})</script><script src=/js/js-yaml/js-yaml.min.js?1769174902></script><script src=/js/d3/d3-color.min.js?1769174902></script><script src=/js/d3/d3-dispatch.min.js?1769174902></script><script src=/js/d3/d3-drag.min.js?1769174902></script><script src=/js/d3/d3-ease.min.js?1769174902></script><script src=/js/d3/d3-interpolate.min.js?1769174902></script><script src=/js/d3/d3-selection.min.js?1769174902></script><script src=/js/d3/d3-timer.min.js?1769174902></script><script src=/js/d3/d3-transition.min.js?1769174902></script><script src=/js/d3/d3-zoom.min.js?1769174902></script><script src=/mermaid/mermaid.js?1769174902></script><script>window.relearn=window.relearn||{},window.relearn.themeUseMermaid=!0,window.relearn.mermaidConfig={securityLevel:"loose"},window.T_Reset_view="Reset view",window.T_View_reset="View reset",window.showToast=window.showToast||function(e){console.log("Toast:",e)},typeof mermaid!="undefined"&&mermaid.initialize({startOnLoad:!1,securityLevel:"loose",theme:"default"})</script><div class=keyboard-hints id=keyboard-hints><div class="keyboard-hint keyboard-hint-left"><kbd>â†</kbd>
<span>Previous</span></div><div class=keyboard-hint-center><span class=hint-text>Use arrow keys to navigate</span>
<button class=hint-dismiss id=hint-dismiss title="Got it!">âœ“</button></div><div class="keyboard-hint keyboard-hint-right"><span>Next</span>
<kbd>â†’</kbd></div></div><div class="keyboard-flash keyboard-flash-left" id=flash-left><kbd>â†</kbd></div><div class="keyboard-flash keyboard-flash-right" id=flash-right><kbd>â†’</kbd></div><script>(function(){const t="keyboard-hints-dismissed",e=document.getElementById("keyboard-hints"),i=document.getElementById("hint-dismiss"),n=document.getElementById("flash-left"),s=document.getElementById("flash-right");function o(){return localStorage.getItem(t)==="true"}function a(){if(!e)return;o()?e.style.display="none":setTimeout(function(){e.classList.add("show"),setTimeout(function(){o()||(e.classList.remove("show"),e.classList.add("fade-out"))},8e3)},2e3)}i&&i.addEventListener("click",function(){localStorage.setItem(t,"true"),e.classList.remove("show"),e.classList.add("fade-out"),setTimeout(function(){e.style.display="none"},300)}),document.addEventListener("keydown",function(i){if(i.target.tagName==="INPUT"||i.target.tagName==="TEXTAREA")return;i.which===37&&n?(n.classList.add("show"),setTimeout(function(){n.classList.remove("show")},300)):i.which===39&&s&&(s.classList.add("show"),setTimeout(function(){s.classList.remove("show")},300)),(i.which===37||i.which===39)&&e&&!o()&&(localStorage.setItem(t,"true"),e.classList.remove("show"))}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})()</script><script>(function(){document.querySelectorAll('pre code[class*="language-"], pre code[class*="hljs"]').forEach(function(e){let t=null;const n=e.className.split(" ");for(const e of n){if(e.startsWith("language-")){t=e.replace("language-","");break}const s=["yaml","yml","bash","shell","sh","javascript","js","typescript","ts","python","py","go","golang","json","html","css","dockerfile","docker","ruby","rb","java","sql","xml","markdown","md","rust","rs","terraform","tf","hcl","ansible","helm","c","cpp","csharp","php","perl","lua","r","scala","kotlin","swift","groovy","powershell","ini","toml","nginx","apache","diff","plaintext","text","console","log"];if(s.includes(e.toLowerCase())){t=e;break}}if(t&&t.toLowerCase()!=="mermaid"){const n=e.parentElement;if(n&&n.tagName==="PRE"&&!n.parentElement.classList.contains("code-block-wrapper")){const e=document.createElement("div");e.className="code-block-wrapper",e.style.cssText="position: relative; margin-top: 1.5em;";const s=document.createElement("span");s.className="code-language-badge",s.textContent=t.toUpperCase(),n.parentNode.insertBefore(e,n),e.appendChild(s),e.appendChild(n),n.style.borderTopRightRadius="0"}}})})()</script><script>(function(){var t,n,s,e=document.querySelectorAll(".scroll-reveal");if(e.length===0)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){e.forEach(function(e){e.classList.add("revealed")});return}document.body.classList.add("js-ready"),t=window.innerHeight,e.forEach(function(e){var n=e.getBoundingClientRect();n.top<t&&setTimeout(function(){e.classList.add("revealed")},50)}),n={root:null,rootMargin:"0px 0px -30px 0px",threshold:.1},s=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("revealed"),t.unobserve(e.target))})},n),e.forEach(function(e){e.classList.contains("revealed")||s.observe(e)})})()</script></body></html>