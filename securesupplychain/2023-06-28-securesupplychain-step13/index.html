<!doctype html><html lang=en class="js csstransforms3d"><head><meta name=google-site-verification content="yq2Ib3doJVHVlEW2wtHap5WY54JhS2CCvI40y30F0FI"><meta charset=utf-8><meta name=color-scheme content="dark light"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.101.0"><meta name=description content="Step 13 Secure Supply Chain"><meta name=author content="Toni Schmidbauer & Thomas Jungbauer"><meta name=keywords content="OCP,Tekton,OpenShift,Pipleines,CI/CD,Supply Chain,Rekor"><link rel=canonical href=https://blog.stderr.at/securesupplychain/2023-06-28-securesupplychain-step13/><link rel=icon href=/images/favicon.ico type=image/png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-180x180.png><link rel=apple-touch-icon sizes=128x128 href=/images/apple-touch-icon-128x128.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-touch-icon-72x72.png><link rel=apple-touch-icon href=/images/apple-touch-icon-57x57.png><link rel="shortcut icon" href=/images/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><title>Step 13 - Bring it to Production :: TechBlog about OpenShift/Ansible/Satellite and much more</title><link rel=manifest href=/manifest.json><meta name=theme-color content="#317EFB"><link href=/css/nucleus.min.css?1700511411 rel=stylesheet><link href=/css/fontawesome-all.min.css?1700511411 rel=stylesheet><link href=/css/font-awesome-animation.min.css?1700511411 rel=stylesheet><link href=/css/hybrid.css?1700511411 rel=stylesheet><link href=/css/featherlight.min.css?1700511411 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1700511411 rel=stylesheet><link href=/css/auto-complete.css?1700511411 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1700511411 rel=stylesheet><link href=/css/theme.min.css?1700511411 rel=stylesheet><link href=/css/hugo-theme.css?1700511411 rel=stylesheet><link href=/css/theme-yaub.css?1700511411 rel=stylesheet><script src=/js/jquery-3.6.0.min.js?1700511411></script>
<script src=/js/jquery.waypoints.min.js?1700511411></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/securesupplychain/2023-06-28-securesupplychain-step13/><button onclick=scrollTopAnimated() id=myBtn class="top-btn button fa fa-arrow-up" title="Go to top"></button>
<span class=read-progress></span><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><p class="fa fa-cloud-upload-alt faa-float animated"></p><span class=text>YAUB</span><p class=logoarea><span class="text small">Yet another Useless Blog</span></p></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1700511411></script>
<script type=text/javascript src=/js/auto-complete.js?1700511411></script>
<script type=text/javascript>var baseurl="https://blog.stderr.at/"</script><script type=text/javascript src=/js/search.js?1700511411></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/openshift/ title=OpenShift class=dd-item><a href=/openshift/>OpenShift</a><ul><li data-nav-id=/openshift/2023-11-03-quay-deployment-with-gitops/ title="Quay Deployment and Configuration using GitOps" class=dd-item><a href=/openshift/2023-11-03-quay-deployment-with-gitops/>Quay Deployment and Configuration using GitOps</a></li><li data-nav-id=/openshift/2023-10-23-openshift-falco/ title="Setting up Falco on OpenShift 4.12" class=dd-item><a href=/openshift/2023-10-23-openshift-falco/>Setting up Falco on OpenShift 4.12</a></li><li data-nav-id=/openshift/2023-10-18-force-machineconfig-rollout/ title="How to force a MachineConfig rollout" class=dd-item><a href=/openshift/2023-10-18-force-machineconfig-rollout/>How to force a MachineConfig rollout</a></li><li data-nav-id=/openshift/2023-03-20-operator-installation-with-argocd/ title="Operator installation with Argo CD" class=dd-item><a href=/openshift/2023-03-20-operator-installation-with-argocd/>Operator installation with Argo CD</a></li><li data-nav-id=/openshift/2023-02-16-ssl-certificate-management/ title="SSL Certificate Management for OpenShift on AWS" class=dd-item><a href=/openshift/2023-02-16-ssl-certificate-management/>SSL Certificate Management for OpenShift on AWS</a></li><li data-nav-id=/openshift/2022-11-04-argocd-and-serversideapply/ title="Using ServerSideApply with ArgoCD" class=dd-item><a href=/openshift/2022-11-04-argocd-and-serversideapply/>Using ServerSideApply with ArgoCD</a></li><li data-nav-id=/openshift/2022-08-16-hashicorp-vault/ title="Secrets Management - Vault on OpenShift" class=dd-item><a href=/openshift/2022-08-16-hashicorp-vault/>Secrets Management - Vault on OpenShift</a></li><li data-nav-id=/openshift/2022-04-22-multi-cloud-gateway/ title="Overview of Red Hat's Multi Cloud Gateway (Noobaa)" class=dd-item><a href=/openshift/2022-04-22-multi-cloud-gateway/>Overview of Red Hat's Multi Cloud Gateway (Noobaa)</a></li><li data-nav-id=/openshift/2021-09-25-sealed_secrets/ title="Secure your secrets with Sealed Secrets" class=dd-item><a href=/openshift/2021-09-25-sealed_secrets/>Secure your secrets with Sealed Secrets</a></li><li data-nav-id=/openshift/2021-02-27-understanding-block-devices/ title="Understanding RWO block device handling in OpenShift" class=dd-item><a href=/openshift/2021-02-27-understanding-block-devices/>Understanding RWO block device handling in OpenShift</a></li><li data-nav-id=/openshift/2021-01-27-writingoperatoransible/ title="Writing Operator using Ansible" class=dd-item><a href=/openshift/2021-01-27-writingoperatoransible/>Writing Operator using Ansible</a></li><li data-nav-id=/openshift/2020-12-10-thanos-vs-thanos/ title="Thanos Querier vs Thanos Querier" class=dd-item><a href=/openshift/2020-12-10-thanos-vs-thanos/>Thanos Querier vs Thanos Querier</a></li><li data-nav-id=/openshift/2020-08-06-argocd/ title="GitOps - Argo CD" class=dd-item><a href=/openshift/2020-08-06-argocd/>GitOps - Argo CD</a></li><li data-nav-id=/openshift/2020-04-16-tekton/ title="OpenShift Pipelines - Tekton Introduction" class=dd-item><a href=/openshift/2020-04-16-tekton/>OpenShift Pipelines - Tekton Introduction</a></li><li data-nav-id=/openshift/2020-04-01-oc-commands/ title="Helpful oc / kubectl commands" class=dd-item><a href=/openshift/2020-04-01-oc-commands/>Helpful oc / kubectl commands</a></li></ul></li><li data-nav-id=/day-2/ title="OpenShift Day-2" class=dd-item><a href=/day-2/>OpenShift Day-2</a><ul><li data-nav-id=/day-2/etcd/ title=etcd class=dd-item><a href=/day-2/etcd/>etcd</a><ul><li data-nav-id=/day-2/etcd/2022-01-29-automatedetcdbackup/ title="Automated ETCD Backup" class=dd-item><a href=/day-2/etcd/2022-01-29-automatedetcdbackup/>Automated ETCD Backup</a></li></ul></li><li data-nav-id=/day-2/labels_environmets/ title="Labels & Environments" class=dd-item><a href=/day-2/labels_environmets/>Labels & Environments</a><ul><li data-nav-id=/day-2/labels_environmets/2022-01-12-creatingenvironment/ title="Working with Environments" class=dd-item><a href=/day-2/labels_environmets/2022-01-12-creatingenvironment/>Working with Environments</a></li></ul></li><li data-nav-id=/day-2/pod-placement/ title="Pod Placement" class=dd-item><a href=/day-2/pod-placement/>Pod Placement</a><ul><li data-nav-id=/day-2/pod-placement/2021-08-26-podplacement-intro/ title=Introduction class=dd-item><a href=/day-2/pod-placement/2021-08-26-podplacement-intro/>Introduction</a></li><li data-nav-id=/day-2/pod-placement/2021-08-29-node-affinity/ title="Node Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-29-node-affinity/>Node Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-27-podplacement/ title=NodeSelector class=dd-item><a href=/day-2/pod-placement/2021-08-27-podplacement/>NodeSelector</a></li><li data-nav-id=/day-2/pod-placement/2021-08-28-affinity/ title="Pod Affinity/Anti-Affinity" class=dd-item><a href=/day-2/pod-placement/2021-08-28-affinity/>Pod Affinity/Anti-Affinity</a></li><li data-nav-id=/day-2/pod-placement/2021-08-30-taints/ title="Taints and Tolerations" class=dd-item><a href=/day-2/pod-placement/2021-08-30-taints/>Taints and Tolerations</a></li><li data-nav-id=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints" class=dd-item><a href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/>Topology Spread Constraints</a></li><li data-nav-id=/day-2/pod-placement/2021-09-01-descheduler/ title="Using Descheduler" class=dd-item><a href=/day-2/pod-placement/2021-09-01-descheduler/>Using Descheduler</a></li></ul></li></ul></li><li data-nav-id=/securesupplychain/ title="Secure Supply Chain" class="dd-item
parent"><a href=/securesupplychain/>Secure Supply Chain</a><ul><li data-nav-id=/securesupplychain/2023-06-15-securesupplychain-intro/ title="Introduction to a Secure Supply Chain" class=dd-item><a href=/securesupplychain/2023-06-15-securesupplychain-intro/>Introduction to a Secure Supply Chain</a></li><li data-nav-id=/securesupplychain/2023-06-16-securesupplychain-step1/ title="Step 1 - Listen to Events" class=dd-item><a href=/securesupplychain/2023-06-16-securesupplychain-step1/>Step 1 - Listen to Events</a></li><li data-nav-id=/securesupplychain/2023-06-17-securesupplychain-step2/ title="Step 2 - Pipelines" class=dd-item><a href=/securesupplychain/2023-06-17-securesupplychain-step2/>Step 2 - Pipelines</a></li><li data-nav-id=/securesupplychain/2023-06-18-securesupplychain-step3/ title="Step 3 - SonarQube" class=dd-item><a href=/securesupplychain/2023-06-18-securesupplychain-step3/>Step 3 - SonarQube</a></li><li data-nav-id=/securesupplychain/2023-06-19-securesupplychain-step4/ title="Step 4 - Verify Git Commit" class=dd-item><a href=/securesupplychain/2023-06-19-securesupplychain-step4/>Step 4 - Verify Git Commit</a></li><li data-nav-id=/securesupplychain/2023-06-20-securesupplychain-step5/ title="Step 5 - Build and Sign Image" class=dd-item><a href=/securesupplychain/2023-06-20-securesupplychain-step5/>Step 5 - Build and Sign Image</a></li><li data-nav-id=/securesupplychain/2023-06-21-securesupplychain-step6/ title="Step 6 - Scanning with ACS" class=dd-item><a href=/securesupplychain/2023-06-21-securesupplychain-step6/>Step 6 - Scanning with ACS</a></li><li data-nav-id=/securesupplychain/2023-06-22-securesupplychain-step7/ title="Step 7 - Generating a SBOM" class=dd-item><a href=/securesupplychain/2023-06-22-securesupplychain-step7/>Step 7 - Generating a SBOM</a></li><li data-nav-id=/securesupplychain/2023-06-23-securesupplychain-step8/ title="Step 8 - Updating Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-23-securesupplychain-step8/>Step 8 - Updating Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-24-securesupplychain-step9/ title="Step 9 - Linting Kubernetes Manifests" class=dd-item><a href=/securesupplychain/2023-06-24-securesupplychain-step9/>Step 9 - Linting Kubernetes Manifests</a></li><li data-nav-id=/securesupplychain/2023-06-25-securesupplychain-step10/ title="Step 10 - The Example Application" class=dd-item><a href=/securesupplychain/2023-06-25-securesupplychain-step10/>Step 10 - The Example Application</a></li><li data-nav-id=/securesupplychain/2023-06-26-securesupplychain-step11/ title="Step 11 - ACS Deployment Check" class=dd-item><a href=/securesupplychain/2023-06-26-securesupplychain-step11/>Step 11 - ACS Deployment Check</a></li><li data-nav-id=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature" class=dd-item><a href=/securesupplychain/2023-06-27-securesupplychain-step12/>Step 12 - Verify TLog Signature</a></li><li data-nav-id=/securesupplychain/2023-06-28-securesupplychain-step13/ title="Step 13 - Bring it to Production" class="dd-item active"><a href=/securesupplychain/2023-06-28-securesupplychain-step13/>Step 13 - Bring it to Production</a></li></ul></li><li data-nav-id=/compliance/ title=Compliance class=dd-item><a href=/compliance/>Compliance</a><ul><li data-nav-id=/compliance/2021/07/oc-compliance-command-line-plugin/ title="oc compliance command line plugin" class=dd-item><a href=/compliance/2021/07/oc-compliance-command-line-plugin/>oc compliance command line plugin</a></li><li data-nav-id=/compliance/2021/07/compliance-operator/ title="Compliance Operator" class=dd-item><a href=/compliance/2021/07/compliance-operator/>Compliance Operator</a></li></ul></li><li data-nav-id=/service-mesh/ title="Service Mesh" class=dd-item><a href=/service-mesh/>Service Mesh</a><ul><li data-nav-id=/service-mesh/2020/05/enable-automatic-route-creation/ title="Enable Automatic Route Creation" class=dd-item><a href=/service-mesh/2020/05/enable-automatic-route-creation/>Enable Automatic Route Creation</a></li><li data-nav-id=/service-mesh/2020/05/authorization-rbac/ title="Authorization (RBAC)" class=dd-item><a href=/service-mesh/2020/05/authorization-rbac/>Authorization (RBAC)</a></li><li data-nav-id=/service-mesh/2020/04/deploy-example-bookinfo-application/ title="Deploy Example Bookinfo Application" class=dd-item><a href=/service-mesh/2020/04/deploy-example-bookinfo-application/>Deploy Example Bookinfo Application</a></li><li data-nav-id=/service-mesh/2020/04/service-mesh-1.1-released/ title="Service Mesh 1.1 released" class=dd-item><a href=/service-mesh/2020/04/service-mesh-1.1-released/>Service Mesh 1.1 released</a></li><li data-nav-id=/service-mesh/2020/04/authentication-jwt/ title="Authentication JWT" class=dd-item><a href=/service-mesh/2020/04/authentication-jwt/>Authentication JWT</a></li><li data-nav-id=/service-mesh/2020/04/mutual-tls-authentication/ title="Mutual TLS Authentication" class=dd-item><a href=/service-mesh/2020/04/mutual-tls-authentication/>Mutual TLS Authentication</a></li><li data-nav-id=/service-mesh/2020/04/fault-injection/ title="Fault Injection" class=dd-item><a href=/service-mesh/2020/04/fault-injection/>Fault Injection</a></li><li data-nav-id=/service-mesh/2020/04/limit-egress/external-traffic/ title="Limit Egress/External Traffic" class=dd-item><a href=/service-mesh/2020/04/limit-egress/external-traffic/>Limit Egress/External Traffic</a></li><li data-nav-id=/service-mesh/2020/04/advanced-routing-example/ title="Advanced Routing Example" class=dd-item><a href=/service-mesh/2020/04/advanced-routing-example/>Advanced Routing Example</a></li><li data-nav-id=/service-mesh/2020/04/routing-example/ title="Routing Example" class=dd-item><a href=/service-mesh/2020/04/routing-example/>Routing Example</a></li><li data-nav-id=/service-mesh/2020/03/ingress-with-custom-domain/ title="Ingress with custom domain" class=dd-item><a href=/service-mesh/2020/03/ingress-with-custom-domain/>Ingress with custom domain</a></li><li data-nav-id=/service-mesh/2020/03/ingress-traffic/ title="Ingress Traffic" class=dd-item><a href=/service-mesh/2020/03/ingress-traffic/>Ingress Traffic</a></li><li data-nav-id=/service-mesh/2020/03/deploy-microservices/ title="Deploy Microservices" class=dd-item><a href=/service-mesh/2020/03/deploy-microservices/>Deploy Microservices</a></li><li data-nav-id=/service-mesh/2020/03/installation/ title=Installation class=dd-item><a href=/service-mesh/2020/03/installation/>Installation</a></li></ul></li><li data-nav-id=/general/ title=General class=dd-item><a href=/general/>General</a><ul><li data-nav-id=/general/2020/05/basic-usage-of-git/ title="Basic usage of git" class=dd-item><a href=/general/2020/05/basic-usage-of-git/>Basic usage of git</a></li><li data-nav-id=/general/2020/04/red-hat-satellite-cheat-sheet/ title="Red Hat Satellite Cheat Sheet" class=dd-item><a href=/general/2020/04/red-hat-satellite-cheat-sheet/>Red Hat Satellite Cheat Sheet</a></li></ul></li><li data-nav-id=/ansible/ title=Ansible class=dd-item><a href=/ansible/>Ansible</a><ul><li data-nav-id=/ansible/2021/11/ansible-style-guide/ title="Ansible Style Guide" class=dd-item><a href=/ansible/2021/11/ansible-style-guide/>Ansible Style Guide</a></li><li data-nav-id=/ansible/2021/10/automation-controller-and-ldap-authentication/ title="Automation Controller and LDAP Authentication" class=dd-item><a href=/ansible/2021/10/automation-controller-and-ldap-authentication/>Automation Controller and LDAP Authentication</a></li><li data-nav-id=/ansible/2021/07/ansible-tower-and-downloading-collections/ title="Ansible Tower and downloading collections" class=dd-item><a href=/ansible/2021/07/ansible-tower-and-downloading-collections/>Ansible Tower and downloading collections</a></li><li data-nav-id=/ansible/2020/04/ansible-azure-resource-manager-example/ title="Ansible - Azure Resource Manager Example" class=dd-item><a href=/ansible/2020/04/ansible-azure-resource-manager-example/>Ansible - Azure Resource Manager Example</a></li><li data-nav-id=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ title="DO410 Ansible and Ansible Tower training notes" class=dd-item><a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/>DO410 Ansible and Ansible Tower training notes</a></li></ul></li><li data-nav-id=/acs/ title="Advanced Cluster Security" class=dd-item><a href=/acs/>Advanced Cluster Security</a><ul><li data-nav-id=/acs/2021-12-11-acsauth/ title="Advanced Cluster Security - Authentication" class=dd-item><a href=/acs/2021-12-11-acsauth/>Advanced Cluster Security - Authentication</a></li></ul></li><li data-nav-id=/azure/ title=Azure class=dd-item><a href=/azure/>Azure</a><ul><li data-nav-id=/azure/2021-10-29-private-aro/ title="Stumbling into Azure Part II: Setting up a private ARO cluster" class=dd-item><a href=/azure/2021-10-29-private-aro/>Stumbling into Azure Part II: Setting up a private ARO cluster</a></li><li data-nav-id=/azure/2021-10-17-s2s-vpn/ title="Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing" class=dd-item><a href=/azure/2021-10-17-s2s-vpn/>Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing</a></li></ul></li><li data-nav-id=/java/ title=Java class=dd-item><a href=/java/>Java</a><ul><li data-nav-id=/java/2022-02-25-jpa-disconnected-entity/ title="Adventures in Java Land: JPA disconnected entities" class=dd-item><a href=/java/2022-02-25-jpa-disconnected-entity/>Adventures in Java Land: JPA disconnected entities</a></li></ul></li><li data-nav-id=/quay/ title=Quay class=dd-item><a href=/quay/>Quay</a><ul><li data-nav-id=/quay/2021-09-07-quay-upgrade-3.4/ title="Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator" class=dd-item><a href=/quay/2021-09-07-quay-upgrade-3.4/>Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator</a></li><li data-nav-id=/quay/2020-05-13-quay-tutorial1/ title="Red Hat Quay Registry - Overview and Installation" class=dd-item><a href=/quay/2020-05-13-quay-tutorial1/>Red Hat Quay Registry - Overview and Installation</a></li></ul></li><li data-nav-id=/legaldisclosure/ title="Legal Disclosure" class=dd-item><a href=/legaldisclosure/>Legal Disclosure</a></li><li data-nav-id=/rss/ title="RSS Feeds" class=dd-item><a href=/rss/>RSS Feeds</a></li></ul><section id=shortcuts><h3 class=shortcut-title>More</h3><ul><li><a class=padding href=https://blog.stderr.at/tags><i class='fas fa-tags'></i> Tags</a></li><li><a class=padding href=https://blog.stderr.at/categories><i class='far fa-bookmark'></i> Catagories</a></li><li><a class=padding href=https://blog.stderr.at/archive><i class='fas fa-box'></i> Archive</a></li><li><a class=padding href=https://charts.stderr.at/><i class='fas fa-book'></i> Helm Charts</a></li><li><a class=padding href=https://www.redhat.com><i class='fab fa-redhat'></i> Red Hat</a></li></ul></section><section id=footer></section></div></nav><section id=body class=post-content><div id=overlay></div><aside id=toc-field class="hidden lg:block tableOfContentContainer"><header id=TableOfContentsHeader>What's on this Page</header><nav id=TableOfContents><ul><li><a href=#_goals>Goals</a></li><li><a href=#_create_a_token_at_github>Create a token at GitHub</a></li><li><a href=#_task_create_a_new_branch>Task: Create a new branch</a></li><li><a href=#_task_create_a_pull_request>Task: Create a Pull request</a></li><li><a href=#_review_the_whole_pipeline>Review the whole Pipeline</a></li><li><a href=#_execute_full_pipeline_e2e>Execute full Pipeline E2E</a><ul><li><a href=#_update_application>Update application</a></li></ul></li><li><a href=#_conclusion>Conclusion</a></li></ul></nav><div id=navigation><a class=nav-prev href=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature"><i class="fa fa-chevron-left"></i></a>
<a class=nav-next href=/compliance/ title=Compliance style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></aside><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://schema.org/BreadcrumbList><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/><span itemprop=name>YAUB Yet Another Useless Blog</span><meta itemprop=position content="1"></a></span>> <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/securesupplychain/><span itemprop=name>Secure Supply Chain</span><meta itemprop=position content="2"></a></span>> Step 13 - Bring it to Production</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#_goals>Goals</a></li><li><a href=#_create_a_token_at_github>Create a token at GitHub</a></li><li><a href=#_task_create_a_new_branch>Task: Create a new branch</a></li><li><a href=#_task_create_a_pull_request>Task: Create a Pull request</a></li><li><a href=#_review_the_whole_pipeline>Review the whole Pipeline</a></li><li><a href=#_execute_full_pipeline_e2e>Execute full Pipeline E2E</a><ul><li><a href=#_update_application>Update application</a></li></ul></li><li><a href=#_conclusion>Conclusion</a></li></ul></nav></div></div><div class=social><a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.stderr.at%2fsecuresupplychain%2f2023-06-28-securesupplychain-step13%2f" class="facebook no-highlight" aria-label="share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-facebook" width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&url=https%3a%2f%2fblog.stderr.at%2fsecuresupplychain%2f2023-06-28-securesupplychain-step13%2f&text=Step%2013%20-%20Bring%20it%20to%20Production" class="twitter no-highlight" aria-label="share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5.0-78.8 35.3-78.8 78.8.0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3C20 26 16.1 39.6 16.1 54c0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1.0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4.0-12.6-.4-18.8-1.1C34.9 299 76.3 312 120.8 312c144.9.0 224.1-120 224.1-224.1.0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg></div></div></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.stderr.at%2fsecuresupplychain%2f2023-06-28-securesupplychain-step13%2f&source=https%3a%2f%2fblog.stderr.at%2fsecuresupplychain%2f2023-06-28-securesupplychain-step13%2f&title=Step%2013%20-%20Bring%20it%20to%20Production&summary=Step%2013%20-%20Bring%20it%20to%20Production" class="linkedin no-highlight" aria-label="share on Linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg></div></div></a><a href="whatsapp://send?text=Step%2013%20-%20Bring%20it%20to%20Production%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aStep%2013%20Secure%20Supply%20Chain%0a%0ahttps%3a%2f%2fblog.stderr.at%2fsecuresupplychain%2f2023-06-28-securesupplychain-step13%2f%0a" class="whatsapp no-highlight" aria-label="share on Whatsapp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-whatsapp" width="24" height="24" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a><a href="mailto:?subject=TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more - Step%2013%20-%20Bring%20it%20to%20Production.&body=Step%2013%20-%20Bring%20it%20to%20Production%2c%20by%20TechBlog%20about%20OpenShift%2fAnsible%2fSatellite%20and%20much%20more%0aStep%2013%20Secure%20Supply%20Chain%0a%0ahttps%3a%2f%2fblog.stderr.at%2fsecuresupplychain%2f2023-06-28-securesupplychain-step13%2f%0a" class="email no-highlight" aria-label="share on Email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg></div></div></a></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/tags/ocp>OCP</a>
<a class=tag-link href=/tags/tekton>Tekton</a>
<a class=tag-link href=/tags/openshift>OpenShift</a>
<a class=tag-link href=/tags/pipleines>Pipleines</a>
<a class=tag-link href=/tags/ci/cd>CI/CD</a>
<a class=tag-link href=/tags/supply-chain>Supply Chain</a>
<a class=tag-link href=/tags/rekor>Rekor</a></div></div><div id=body-inner><h1>Step 13 - Bring it to Production</h1><p class=tracked><time class="f6 mv4 dib tracked" datetime=2023-06-27T00:00:00Z><strong>June 27, 2023</strong></time>
- By:
Thomas Jungbauer
( Lastmod: 2023-07-05 ) - <span class=readtime><strong>7 min read</strong></span></p><div class=paragraph><p>If you reached this article, congratulations! You read through tons of pages to build up a Pipeline. The last two steps in our Pipeline are: Creating a new branch and creating a pull request, with the changes of the image tag that must be approved and will be merged then (We will not update the main branch directly!). Finally, we will do a "real" update to the application to see the actual changes.</p></div><div class=sect1><h2 id=_goals>Goals</h2><div class=sectionbody><div class=paragraph><p>The goals of this step are:</p></div><div class=ulist><ul><li><p>Create a task that creates a new branch in Git repository.</p></li><li><p>Create a task that creates a pull request in Git repository.</p></li><li><p>Perform a full End2End run of the Pipeline and approve the pull request.</p></li></ul></div></div></div><div class=sect1><h2 id=_create_a_token_at_github>Create a token at GitHub</h2><div class=sectionbody><div class=paragraph><p>To create a pull request we need to authenticate against the Git api. For this, we will need a token. In GitHub open your personal settings (by clicking on your avatar) and then go to "Developer settings".</p></div><div class=paragraph><p>Select "Personal access tokens" and "fine-graining tokens" to create a new token.</p></div><div class=imageblock><div class=content><img src="/SecureSupplyChain/images/step13-github_pta.png?width=400px" alt="GitHub Personal Access Token"></div><div class=title>Figure 1. GitHub Personal Access Token</div></div><div class=paragraph><p>Enter the required fields:</p></div><div class=ulist><ul><li><p>Name: Secure Supply Chain</p></li><li><p>Expiration: Whatever your like (max is 1 year)</p></li><li><p>Repository access: Only select repositories</p></li><li><p>Select your repository, for example: tjungbauer/securing-software-supply-chain</p></li><li><p>Permissions: "Pull requests" > Read and write</p></li></ul></div><div class=imageblock><div class=content><img src="/SecureSupplyChain/images/step13-github_pta_created.png?width=600px" alt="GitHub Personal Access Token Created"></div><div class=title>Figure 2. GitHub Personal Access Token Created</div></div><div class=paragraph><p>Save the created token and create the following secret:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>kind: Secret
apiVersion: v1
metadata:
  name: github-token
  namespace: ci
stringData:
  token: &lt;Token Value&gt; <i class=conum data-value=1></i><b>(1)</b>
type: Opaque</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Clear-text token. If already base64 encoded, change <em>stringData</em> to <em>data</em>.</td></tr></tbody></table></div></div></div><div class=sect1><h2 id=_task_create_a_new_branch>Task: Create a new branch</h2><div class=sectionbody><div class=paragraph><p>Since we do not update the main branch directly, we will create a new (feature) branch, that will be used for a pull request and can be deleted after the pull request has been merged.</p></div><div class="olist arabic"><ol class=arabic><li><p>Create the following Task object</p><div class=paragraph><p>This Task will use git commands to create a new feature-branch and pushes the changes into that branch.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: new-branch-manifest-repo
  namespace: ci
spec:
  description: &gt;-
    This task creates a branch for a PR to point to the image tag created with
    the short commit.
  params:
    - description: Used to tag the built image.
      name: image
      type: string
    - default: main
      description: Target branch to push to
      name: target-branch
      type: string
    - default: Tekton Pipeline
      description: Git user name for performing the push operation.
      name: git_user_name
      type: string
    - default: tekton@tekton.com
      description: Git user email for performing the push operation.
      name: git_user_email
      type: string
    - description: File in which the image configuration is stored.
      name: configuration_file
      type: string
    - description: Repo in which the image configuration is stored.
      name: repository
      type: string
  steps:
    - image: registry.redhat.io/openshift-pipelines/pipelines-git-init-rhel8:v1.10.4-4
      name: git
      resources: {}
      script: &gt;-
        # Setting up the git config.

        git config --global user.email &#34;$(params.git_user_email)&#34;

        git config --global user.name &#34;$(params.git_user_name)&#34;


        # Checkout target branch to avoid the detached HEAD state

        TMPDIR=$(mktemp -d)


        cd $TMPDIR

        git clone $(params.repository) <i class=conum data-value=1></i><b>(1)</b>

        cd securing-software-supply-chain

        git checkout -b $(params.target-branch) <i class=conum data-value=2></i><b>(2)</b>


        # Set to the short commit value passed as parameter.

        # Notice the enclosing &#34; to keep it as a string in the resulting YAML.

        IMAGE=\&#34;$(params.image)\&#34;


        sed -i &#34;s#\(.*value:\s*\).*#\1 ${IMAGE}#&#34; $(params.configuration_file)


        git add $(params.configuration_file) <i class=conum data-value=3></i><b>(3)</b>

        git commit -m &#34;Automatically updated manifest to point to image tag
        $IMAGE&#34;

        git push origin $(params.target-branch)</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Clone the main repository.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Create a new feature branch.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Add, commit, and push everything to the new branch.</td></tr></tbody></table></div></li><li><p>Modify the Pipeline object</p><div class=paragraph><p>The Task must be added to the Pipeline, it provides several required parameters.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>    - name: create-prod-manifest-branch
      params:
        - name: image
          value: &#39;$(params.IMAGE_REPO):$(params.IMAGE_TAG)&#39;
        - name: configuration_file
          value: $(params.MANIFEST_FILE_PROD)
        - name: repository
          value: $(params.MANIFEST_REPO)
        - name: git_user_name
          value: $(params.COMMIT_AUTHOR)
        - name: target-branch
          value: feature-for-$(params.COMMIT_SHA)
      runAfter:
        - acs-deploy-check
        - verify-tlog-signature
      taskRef:
        kind: Task
        name: new-branch-manifest-repo</code></pre></div></div></li></ol></div></div></div><div class=sect1><h2 id=_task_create_a_pull_request>Task: Create a Pull request</h2><div class=sectionbody><div class="olist arabic"><ol class=arabic><li><p>Create the following Task object</p><div class=paragraph><p>The following task will take the token and create a new pull request at GitHub:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: git-open-pull-request
  namespace: ci
spec:
  description: &gt;-
    This task will open a PR on Github based on several parameters. This could
    be useful in GitOps repositories for example.
  params:
    - default: api.github.com
      description: |
        The GitHub host, adjust this if you run a GitHub enteprise or Gitea
      name: GITHUB_HOST_URL
      type: string
    - default: &#39;&#39;
      description: |
        The API path prefix, GitHub Enterprise has a prefix e.g. /api/v3
      name: API_PATH_PREFIX
      type: string
    - description: |
        The GitHub repository full name, e.g.: tektoncd/catalog
      name: REPO_FULL_NAME
      type: string
    - default: github
      description: &gt;
        The name of the kubernetes secret that contains the GitHub token,
        default: github
      name: GITHUB_TOKEN_SECRET_NAME
      type: string
    - default: token
      description: &gt;
        The key within the kubernetes secret that contains the GitHub token,
        default: token
      name: GITHUB_TOKEN_SECRET_KEY
      type: string
    - default: Bearer
      description: &gt;
        The type of authentication to use. You could use the less secure &#34;Basic&#34;
        for example
      name: AUTH_TYPE
      type: string
    - description: |
        The name of the branch where your changes are implemented.
      name: HEAD
      type: string
    - description: |
        The name of the branch you want the changes pulled into.
      name: BASE
      type: string
    - description: |
        The body description of the pull request.
      name: BODY
      type: string
    - description: |
        The title of the pull request.
      name: TITLE
      type: string
  results:
    - description: Number of the created pull request.
      name: NUMBER
      type: string
    - description: URL of the created pull request.
      name: URL
      type: string
  steps:
    - env:
        - name: PULLREQUEST_NUMBER_PATH
          value: $(results.NUMBER.path)
        - name: PULLREQUEST_URL_PATH
          value: $(results.URL.path)
      image: &#39;registry.access.redhat.com/ubi8/python-38:1&#39;
      name: open-pr
      resources: {}
      script: &gt;-
        #!/usr/libexec/platform-python <i class=conum data-value=1></i><b>(1)</b>

        &#34;&#34;&#34;This script will open a PR on Github&#34;&#34;&#34;

        import json

        import os

        import sys

        import http.client

        github_token = <i class=conum data-value=2></i><b>(2)</b>
        open(&#34;/etc/github-open-pr/$(params.GITHUB_TOKEN_SECRET_KEY)&#34;,
        &#34;r&#34;).read()

        open_pr_url = &#34;/repos/$(params.REPO_FULL_NAME)/pulls&#34;

        data = { <i class=conum data-value=3></i><b>(3)</b>
            &#34;head&#34;: &#34;$(params.HEAD)&#34;,
            &#34;base&#34;: &#34;$(params.BASE)&#34;,
            &#34;title&#34;: &#34;&#34;&#34;$(params.TITLE)&#34;&#34;&#34;,
            &#34;body&#34;: &#34;&#34;&#34;$(params.BODY)&#34;&#34;&#34;
        }

        print(&#34;Sending this data to GitHub: &#34;)

        print(data)

        authHeader = &#34;Bearer &#34; + github_token

        giturl = &#34;api.&#34;+&#34;$(params.GITHUB_HOST_URL)&#34;

        conn = http.client.HTTPSConnection(giturl)

        conn.request(
            &#34;POST&#34;,
            open_pr_url,
            body=json.dumps(data),
            headers={
                &#34;User-Agent&#34;: &#34;OpenShift Pipelines&#34;,
                &#34;Authorization&#34;: authHeader.strip(),
                &#34;Accept&#34;: &#34;application/vnd.github+json&#34;,
                &#34;Content-Type&#34;: &#34;application/json&#34;,
                &#34;X-GitHub-Api-Version&#34;: &#34;2022-11-28&#34;
            })

        resp = conn.getresponse()

        if not str(resp.status).startswith(&#34;2&#34;):
            print(&#34;Error: %d&#34; % (resp.status))
            print(resp.read())
            sys.exit(1)
        else:
            # https://docs.github.com/en/rest/reference/pulls#create-a-pull-request
            body = json.loads(resp.read().decode())

            open(os.environ.get(&#39;PULLREQUEST_NUMBER_PATH&#39;), &#39;w&#39;).write(f&#39;{body[&#34;number&#34;]}&#39;)
            open(os.environ.get(&#39;PULLREQUEST_URL_PATH&#39;), &#39;w&#39;).write(body[&#34;html_url&#34;])

            print(&#34;GitHub pull request created for $(params.REPO_FULL_NAME): &#34;
                  f&#39;number={body[&#34;number&#34;]} url={body[&#34;html_url&#34;]}&#39;)
      volumeMounts:
        - mountPath: /etc/github-open-pr
          name: githubtoken
          readOnly: true
  volumes:
    - name: githubtoken
      secret:
        secretName: $(params.GITHUB_TOKEN_SECRET_NAME)</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Python script to create the pull request.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>The token from the secret object.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>The data we will send to GitHub.</td></tr></tbody></table></div></li><li><p>Modify the Pipeline object</p><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>    - name: issue-prod-pull-request
      params:
        - name: GITHUB_HOST_URL
          value: $(params.REPO_HOST)
        - name: GITHUB_TOKEN_SECRET_NAME
          value: github-token
        - name: REPO_FULL_NAME
          value: $(params.MANIFEST_REPO_NAME)
        - name: HEAD
          value: feature-for-$(params.COMMIT_SHA)
        - name: BASE
          value: main
        - name: BODY
          value: Update prod image for $(params.COMMIT_MESSAGE)
        - name: TITLE
          value: &#39;Production update: $(params.COMMIT_MESSAGE)&#39;
      runAfter:
        - create-prod-manifest-branch
      taskRef:
        kind: Task
        name: git-open-pull-request</code></pre></div></div></li></ol></div></div></div><div class=sect1><h2 id=_review_the_whole_pipeline>Review the whole Pipeline</h2><div class=sectionbody><div class=paragraph><p>We did it, we created a Secure Supply Chain using Tekton Tasks. The full Pipeline now looks like this:</p></div><div class=imageblock><div class=content><img src=/SecureSupplyChain/images/step13-pipeline.png alt="Pipeline Details"></div><div class=title>Figure 3. Pipeline Details</div></div><div class=paragraph><p>The last step will create a pull request on Git. When this request is approved and merged, the update will finally happen in the production environment. This is a manual process to have control what comes in production and what does not.</p></div></div></div><div class=sect1><h2 id=_execute_full_pipeline_e2e>Execute full Pipeline E2E</h2><div class=sectionbody><div class=paragraph><p>It is time to execute the whole pipeline now end to end. We will do a real update to the application now, so we can see the differences.</p></div><div class=paragraph><p>As described in step 10, the DEV and PROD environments are running on the same cluster. In the field, this will probably not happen, but for now, it is good enough. GitOps/Argo CD monitors any changes and automatically updates whenever the Git repository (Kubernetes Manifests) is changed. During the PipelineRun we will update the image tag for DEV, which automatically rolls out and create a Pull request which is waiting for approval and will roll out the changes onto production.</p></div><div class=paragraph><p>Both environments have a route to access the application. At the moment both will look the same:</p></div><div class=imageblock><div class=content><img src="/SecureSupplyChain/images/step13-dev_origin.png?width=600px" alt="Globex DEV origin"></div><div class=title>Figure 4. Globex DEV origin</div></div><div class=sect2><h3 id=_update_application>Update application</h3><div class=paragraph><p>The repository of Globex UI is forked at: <a href=https://github.com/tjungbauer/globex-ui class=bare>https://github.com/tjungbauer/globex-ui</a>. We used it throughout this journey to update the README.md file.
The readme file does not really change anything. So, let’s update the UI itself.</p></div><div class=paragraph><p>look for the file <strong>src/index.html</strong> and add the following line before <code>&lt;/body></code></p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-html data-lang=html>&lt;center&gt;&lt;strong&gt;My very important update&lt;/strong&gt;&lt;/center&gt;</code></pre></div></div><div class=paragraph><p>Save this change and push it to GitHub.
This will trigger the Pipeline which is running quite long. However, once it is finished, the DEV environment should now show the new line in the UI.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>After the pipeline updated the image tag in Git, the GitOps process must fetch this change. This may take a while. You can speed this up by refreshing the "Application" inside the Argo CD interface. It should then automatically synchronize.</td></tr></tbody></table></div><div class=paragraph><p>The update can now be seen in the browser. The "important update" is visible at the bottom of the page.</p></div><div class=imageblock><div class=content><img src="/SecureSupplyChain/images/step13-dev_updated.png?width=600px" alt="Globex DEV updated"></div><div class=title>Figure 5. Globex DEV updated</div></div><div class=paragraph><p>The production environment was not yet updated. Instead, a pull request has been created:</p></div><div class=imageblock><div class=content><img src="/SecureSupplyChain/images/step13-open_pr.png?width=600px" alt="Open pull request"></div><div class=title>Figure 6. Open pull request</div></div><div class=paragraph><p>This request can be reviewed and merged. As you can see there was only one change in the files:</p></div><div class=imageblock><div class=content><img src=/SecureSupplyChain/images/step13-pr_fileschanged.png alt="Open pull request - changed files"></div><div class=title>Figure 7. Open pull request - changed files</div></div><div class=paragraph><p>Merge the pull request and wait until Argo CD fetched the changes and updates the production environment. This is it, the changes are done and promoted to production:</p></div><div class=imageblock><div class=content><img src="/SecureSupplyChain/images/step13-prod_updated.png?width=600px" alt="Globex PROD updated"></div><div class=title>Figure 8. Globex PROD updated</div></div></div></div></div><div class=sect1><h2 id=_conclusion>Conclusion</h2><div class=sectionbody><div class=paragraph><p>This concludes this journey to a Secure Supply Chain using Tekton (OpenShift Pipelines). Is this the best must-have you need to do? No, it is an example, a demonstration. Feel free to use and modify it. You can also use other tools for the tasks or the pipeline as such. It does not matter if you use Tekton, Jenkins, Gitlab Runner etc. What is important is that you secure your whole supply chain as much as possible.
Any image you create should be signed to ensure that the source can be trusted. Every source code should be verified against best practices and all images should be scanned for vulnerabilities and policy violations during the build AND the deployment process.</p></div></div></div><footer class=footline></footer></div></div><div id=navigation-bottom><a class="nav-prev btn btn-default" href=/securesupplychain/2023-06-27-securesupplychain-step12/ title="Step 12 - Verify TLog Signature"><i class="fa fa-chevron-left btn-bottom-prev"></i><span class=btn-bottom-text>Previous:</span> Step 12 - Verify TLog Signature</a>
<a class="nav-next btn btn-default" href=/compliance/ title=Compliance style=margin-right:0><i class="fa fa-chevron-right btn-bottom-next"></i><span class=btn-bottom-text>Next:</span> Compliance</a></div><div class=copyright><p>Copyright &copy; 2020 - 2023 Toni Schmidbauer & Thomas Jungbauer</p><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn target=_blank rel="noopener noreferrer">Hugo Learn Theme</i></a> and <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a></p></div></section><script>(function(){$("document").ready(function(){var s=$(".read-progress").waypoint({handler:function(e){e=="down"?($(".read-progress").addClass("position-fixed"),$(".read-progress").css("top",0)):($(".read-progress").removeClass("position-fixed"),$(".read-progress").css("top"))}}),t=$(window).height(),e=$(".post-content").height();$(window).on("scroll",n),$(window).on("resize",function(){t=$(window).height(),e=$(".post-content").height(),n()});function n(){var s=$(this).scrollTop(),o=$(".post-content").offset().top,i=e-(e-(t-(o-s))),n=i/e*100,n=n>100?100:n;$(".read-progress").width(n+"%")}})})()</script><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1700511416></script>
<script src=/js/perfect-scrollbar.min.js?1700511416></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1700511416></script>
<script src=/js/jquery.sticky.js?1700511416></script>
<script src=/js/featherlight.min.js?1700511416></script>
<script src=/js/highlight.pack.js?1700511416></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1700511416></script>
<script src=/js/learn.js?1700511416></script>
<script src=/js/hugo-learn.js?1700511416></script>
<script src=/js/yaub.js?1700511416></script>
<script>window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target.getAttribute("id");e.intersectionRatio>0&&(clearActiveStatesInTableOfContents(),document.querySelector(`aside nav li a[href="#${t}"]`).parentElement.classList.add("active"))})});document.querySelectorAll("h1[id],h2[id],h3[id]").forEach(t=>{e.observe(t)})});function clearActiveStatesInTableOfContents(){document.querySelectorAll("aside nav li").forEach(e=>{e.classList.remove("active")})}</script><script type=text/javascript>function scrollTopAnimated(){$("html, body").animate({scrollTop:"0"},500)}</script><script>function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(".summary-box").click(function(){return window.location=$(this).find("a").attr("href"),!1})</script></body></html>