<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta name=google-site-verification content="yq2Ib3doJVHVlEW2wtHap5WY54JhS2CCvI40y30F0FI">
<meta charset=utf-8>
<meta name=color-scheme content="dark light">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.87.0">
<meta name=description content="Evicting pods using the Descheduler">
<meta name=author content="Toni Schmidbauer & Thomas Jungbauer">
<link rel=icon href=/images/favicon.ico type=image/png>
<link rel=apple-touch-icon sizes=152x152 href=/images/apple-touch-icon-152x152.png>
<link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon-180x180.png>
<link rel=apple-touch-icon sizes=128x128 href=/images/apple-touch-icon-128x128.png>
<link rel=apple-touch-icon sizes=144x144 href=/images/apple-touch-icon-144x144.png>
<link rel=apple-touch-icon sizes=114x114 href=/images/apple-touch-icon-114x114.png>
<link rel=apple-touch-icon sizes=72x72 href=/images/apple-touch-icon-72x72.png>
<link rel=apple-touch-icon href=/images/apple-touch-icon-57x57.png>
<link rel="shortcut icon" href=/images/favicon.ico>
<link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png>
<link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png>
<link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png>
<link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png>
<link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png>
<link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png>
<link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png>
<title>Using Descheduler :: TechBlog about OpenShift/Ansible/Satellite and much more</title>
<link rel=manifest href=/manifest.json>
<meta name=theme-color content="#317EFB">
<link href=/css/nucleus.min.css?1638208418 rel=stylesheet>
<link href=/css/fontawesome-all.min.css?1638208418 rel=stylesheet>
<link href=/css/font-awesome-animation.min.css?1638208418 rel=stylesheet>
<link href=/css/hybrid.css?1638208418 rel=stylesheet>
<link href=/css/featherlight.min.css?1638208418 rel=stylesheet>
<link href=/css/perfect-scrollbar.min.css?1638208418 rel=stylesheet>
<link href=/css/auto-complete.css?1638208418 rel=stylesheet>
<link href=/css/atom-one-dark-reasonable.css?1638208418 rel=stylesheet>
<link href=/css/theme.min.css?1638208418 rel=stylesheet>
<link href=/css/hugo-theme.css?1638208418 rel=stylesheet>
<link href=/css/theme-yaub.css?1638208418 rel=stylesheet>
<script src=/js/jquery-3.6.0.min.js?1638208418></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
</head>
<body data-url=/day-2/pod-placement/2021-09-01-descheduler/>
<button onclick=scrollTopAnimated() id=myBtn class="top-btn button fa fa-arrow-up" title="Go to top"></button>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href=/>
<p class="fa fa-cloud-upload-alt faa-float animated"></p>
<span class=text>YAUB</span>
<p class=logoarea><span class="text small">Yet another Useless Blog</span></p>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/js/lunr.min.js?1638208418></script>
<script type=text/javascript src=/js/auto-complete.js?1638208418></script>
<script type=text/javascript>var baseurl="https://blog.stderr.at/"</script>
<script type=text/javascript src=/js/search.js?1638208418></script>
</div>
<div class=togglemode>
<button id=dark-mode-toggle class="btn-toggle btn-default btn">Toggle Dark-Mode</button>
</div>
<section id=homelinks>
<ul>
<li>
<a class=padding href=/><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</section>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/openshift/ title=OpenShift class=dd-item>
<a href=/openshift/>
OpenShift
</a>
<ul>
<li data-nav-id=/openshift/2021-09-25-sealed_secrets/ title="Secure your secrets with Sealed Secrets" class=dd-item>
<a href=/openshift/2021-09-25-sealed_secrets/>
Secure your secrets with Sealed Secrets
</a>
</li>
<li data-nav-id=/openshift/2021-02-27-understanding-block-devices/ title="Understanding RWO block device handling in OpenShift" class=dd-item>
<a href=/openshift/2021-02-27-understanding-block-devices/>
Understanding RWO block device handling in OpenShift
</a>
</li>
<li data-nav-id=/openshift/2021-01-27-writingoperatoransible/ title="Writing Operator using Ansible" class=dd-item>
<a href=/openshift/2021-01-27-writingoperatoransible/>
Writing Operator using Ansible
</a>
</li>
<li data-nav-id=/openshift/2020-12-10-thanos-vs-thanos/ title="Thanos Querier vs Thanos Querier" class=dd-item>
<a href=/openshift/2020-12-10-thanos-vs-thanos/>
Thanos Querier vs Thanos Querier
</a>
</li>
<li data-nav-id=/openshift/2020-08-06-argocd/ title="GitOps - Argo CD" class=dd-item>
<a href=/openshift/2020-08-06-argocd/>
GitOps - Argo CD
</a>
</li>
<li data-nav-id=/openshift/2020-04-16-tekton/ title="OpenShift Pipelines - Tekton Introduction" class=dd-item>
<a href=/openshift/2020-04-16-tekton/>
OpenShift Pipelines - Tekton Introduction
</a>
</li>
<li data-nav-id=/openshift/2020-04-01-oc-commands/ title="Helpful oc / kubectl commands" class=dd-item>
<a href=/openshift/2020-04-01-oc-commands/>
Helpful oc / kubectl commands
</a>
</li>
</ul>
</li>
<li data-nav-id=/day-2/ title="OpenShift Day-2" class="dd-item
parent">
<a href=/day-2/>
OpenShift Day-2
</a>
<ul>
<li data-nav-id=/day-2/etcd/ title=etcd class=dd-item>
<a href=/day-2/etcd/>
etcd
</a>
<ul>
<li data-nav-id=/day-2/etcd/2021-11-29-automatedetcdbackup/ title="Automated ETCD Backup" class=dd-item>
<a href=/day-2/etcd/2021-11-29-automatedetcdbackup/>
Automated ETCD Backup
</a>
</li>
</ul>
</li>
<li data-nav-id=/day-2/labels_environmets/ title="Labels & Environments" class=dd-item>
<a href=/day-2/labels_environmets/>
Labels & Environments
</a>
<ul>
<li data-nav-id=/day-2/labels_environmets/2021-11-12-creatingenvironment/ title="Working with Environments" class=dd-item>
<a href=/day-2/labels_environmets/2021-11-12-creatingenvironment/>
Working with Environments
</a>
</li>
</ul>
</li>
<li data-nav-id=/day-2/pod-placement/ title="Pod Placement" class="dd-item
parent">
<a href=/day-2/pod-placement/>
Pod Placement
</a>
<ul>
<li data-nav-id=/day-2/pod-placement/2021-08-26-podplacement-intro/ title=Introduction class=dd-item>
<a href=/day-2/pod-placement/2021-08-26-podplacement-intro/>
Introduction
</a>
</li>
<li data-nav-id=/day-2/pod-placement/2021-08-29-node-affinity/ title="Node Affinity" class=dd-item>
<a href=/day-2/pod-placement/2021-08-29-node-affinity/>
Node Affinity
</a>
</li>
<li data-nav-id=/day-2/pod-placement/2021-08-27-podplacement/ title=NodeSelector class=dd-item>
<a href=/day-2/pod-placement/2021-08-27-podplacement/>
NodeSelector
</a>
</li>
<li data-nav-id=/day-2/pod-placement/2021-08-28-affinity/ title="Pod Affinity/Anti-Affinity" class=dd-item>
<a href=/day-2/pod-placement/2021-08-28-affinity/>
Pod Affinity/Anti-Affinity
</a>
</li>
<li data-nav-id=/day-2/pod-placement/2021-08-30-taints/ title="Taints and Tolerations" class=dd-item>
<a href=/day-2/pod-placement/2021-08-30-taints/>
Taints and Tolerations
</a>
</li>
<li data-nav-id=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints" class=dd-item>
<a href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/>
Topology Spread Constraints
</a>
</li>
<li data-nav-id=/day-2/pod-placement/2021-09-01-descheduler/ title="Using Descheduler" class="dd-item active">
<a href=/day-2/pod-placement/2021-09-01-descheduler/>
Using Descheduler
</a>
</li>
</ul>
</li>
</ul>
</li>
<li data-nav-id=/compliance/ title=Compliance class=dd-item>
<a href=/compliance/>
Compliance
</a>
<ul>
<li data-nav-id=/compliance/2021/07/oc-compliance-command-line-plugin/ title="oc compliance command line plugin" class=dd-item>
<a href=/compliance/2021/07/oc-compliance-command-line-plugin/>
oc compliance command line plugin
</a>
</li>
<li data-nav-id=/compliance/2021/07/compliance-operator/ title="Compliance Operator" class=dd-item>
<a href=/compliance/2021/07/compliance-operator/>
Compliance Operator
</a>
</li>
</ul>
</li>
<li data-nav-id=/service-mesh/ title="Service Mesh" class=dd-item>
<a href=/service-mesh/>
Service Mesh
</a>
<ul>
<li data-nav-id=/service-mesh/2020/05/enable-automatic-route-creation/ title="Enable Automatic Route Creation" class=dd-item>
<a href=/service-mesh/2020/05/enable-automatic-route-creation/>
Enable Automatic Route Creation
</a>
</li>
<li data-nav-id=/service-mesh/2020/05/authorization-rbac/ title="Authorization (RBAC)" class=dd-item>
<a href=/service-mesh/2020/05/authorization-rbac/>
Authorization (RBAC)
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/deploy-example-bookinfo-application/ title="Deploy Example Bookinfo Application" class=dd-item>
<a href=/service-mesh/2020/04/deploy-example-bookinfo-application/>
Deploy Example Bookinfo Application
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/service-mesh-1.1-released/ title="Service Mesh 1.1 released" class=dd-item>
<a href=/service-mesh/2020/04/service-mesh-1.1-released/>
Service Mesh 1.1 released
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/authentication-jwt/ title="Authentication JWT" class=dd-item>
<a href=/service-mesh/2020/04/authentication-jwt/>
Authentication JWT
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/mutual-tls-authentication/ title="Mutual TLS Authentication" class=dd-item>
<a href=/service-mesh/2020/04/mutual-tls-authentication/>
Mutual TLS Authentication
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/fault-injection/ title="Fault Injection" class=dd-item>
<a href=/service-mesh/2020/04/fault-injection/>
Fault Injection
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/limit-egress/external-traffic/ title="Limit Egress/External Traffic" class=dd-item>
<a href=/service-mesh/2020/04/limit-egress/external-traffic/>
Limit Egress/External Traffic
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/advanced-routing-example/ title="Advanced Routing Example" class=dd-item>
<a href=/service-mesh/2020/04/advanced-routing-example/>
Advanced Routing Example
</a>
</li>
<li data-nav-id=/service-mesh/2020/04/routing-example/ title="Routing Example" class=dd-item>
<a href=/service-mesh/2020/04/routing-example/>
Routing Example
</a>
</li>
<li data-nav-id=/service-mesh/2020/03/ingress-with-custom-domain/ title="Ingress with custom domain" class=dd-item>
<a href=/service-mesh/2020/03/ingress-with-custom-domain/>
Ingress with custom domain
</a>
</li>
<li data-nav-id=/service-mesh/2020/03/ingress-traffic/ title="Ingress Traffic" class=dd-item>
<a href=/service-mesh/2020/03/ingress-traffic/>
Ingress Traffic
</a>
</li>
<li data-nav-id=/service-mesh/2020/03/deploy-microservices/ title="Deploy Microservices" class=dd-item>
<a href=/service-mesh/2020/03/deploy-microservices/>
Deploy Microservices
</a>
</li>
<li data-nav-id=/service-mesh/2020/03/installation/ title=Installation class=dd-item>
<a href=/service-mesh/2020/03/installation/>
Installation
</a>
</li>
</ul>
</li>
<li data-nav-id=/general/ title=General class=dd-item>
<a href=/general/>
General
</a>
<ul>
<li data-nav-id=/general/2020/05/basic-usage-of-git/ title="Basic usage of git" class=dd-item>
<a href=/general/2020/05/basic-usage-of-git/>
Basic usage of git
</a>
</li>
<li data-nav-id=/general/2020/04/red-hat-satellite-cheat-sheet/ title="Red Hat Satellite Cheat Sheet" class=dd-item>
<a href=/general/2020/04/red-hat-satellite-cheat-sheet/>
Red Hat Satellite Cheat Sheet
</a>
</li>
</ul>
</li>
<li data-nav-id=/ansible/ title=Ansible class=dd-item>
<a href=/ansible/>
Ansible
</a>
<ul>
<li data-nav-id=/ansible/2021/10/automation-controller-ad-ldap-authentication/ title="Automation Controller ad LDAP Authentication" class=dd-item>
<a href=/ansible/2021/10/automation-controller-ad-ldap-authentication/>
Automation Controller ad LDAP Authentication
</a>
</li>
<li data-nav-id=/ansible/2021/07/ansible-tower-and-downloading-collections/ title="Ansible Tower and downloading collections" class=dd-item>
<a href=/ansible/2021/07/ansible-tower-and-downloading-collections/>
Ansible Tower and downloading collections
</a>
</li>
<li data-nav-id=/ansible/2020/04/ansible-azure-resource-manager-example/ title="Ansible - Azure Resource Manager Example" class=dd-item>
<a href=/ansible/2020/04/ansible-azure-resource-manager-example/>
Ansible - Azure Resource Manager Example
</a>
</li>
<li data-nav-id=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/ title="DO410 Ansible and Ansible Tower training notes" class=dd-item>
<a href=/ansible/2020/04/do410-ansible-and-ansible-tower-training-notes/>
DO410 Ansible and Ansible Tower training notes
</a>
</li>
</ul>
</li>
<li data-nav-id=/azure/ title=Azure class=dd-item>
<a href=/azure/>
Azure
</a>
<ul>
<li data-nav-id=/azure/2021-10-29-private-aro/ title="Stumbling into Azure Part II: Setting up a private ARO cluster" class=dd-item>
<a href=/azure/2021-10-29-private-aro/>
Stumbling into Azure Part II: Setting up a private ARO cluster
</a>
</li>
<li data-nav-id=/azure/2021-10-17-s2s-vpn/ title="Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing" class=dd-item>
<a href=/azure/2021-10-17-s2s-vpn/>
Stumbling into Azure Part I: Building a site-to-site VPN tunnel for testing
</a>
</li>
</ul>
</li>
<li data-nav-id=/quay/ title=Quay class=dd-item>
<a href=/quay/>
Quay
</a>
<ul>
<li data-nav-id=/quay/2021-09-07-quay-upgrade-3.4/ title="Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator" class=dd-item>
<a href=/quay/2021-09-07-quay-upgrade-3.4/>
Stumbling into Quay: Upgrading from 3.3 to 3.4 with the quay-operator
</a>
</li>
<li data-nav-id=/quay/2020-05-13-quay-tutorial1/ title="Red Hat Quay Registry - Overview and Installation" class=dd-item>
<a href=/quay/2020-05-13-quay-tutorial1/>
Red Hat Quay Registry - Overview and Installation
</a>
</li>
</ul>
</li>
<li data-nav-id=/archive/ title=Archive class=dd-item>
<a href=/archive/>
Archive
</a>
</li>
<li data-nav-id=/legaldisclosure/ title="Legal Disclosure" class=dd-item>
<a href=/legaldisclosure/>
Legal Disclosure
</a>
</li>
<li data-nav-id=/rss/ title="RSS Feeds" class=dd-item>
<a href=/rss/>
RSS Feeds
</a>
</li>
</ul>
<section id=shortcuts>
<h3 class=shortcut-title>More</h3>
<ul>
<li>
<a class=padding href=https://blog.stderr.at/tags><i class="fas fa-tags"></i> Tags</a>
</li>
<li>
<a class=padding href=https://blog.stderr.at/categories><i class="far fa-bookmark"></i> Catagories</a>
</li>
<li>
<a class=padding href=https://www.redhat.com><i class="fab fa-redhat"></i> Red Hat</a>
</li>
</ul>
</section>
<section id=footer>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<aside id=toc-field class="hidden lg:block tableOfContentContainer">
<header id=TableOfContentsHeader>What's on this Page</header>
<nav id=TableOfContents>
<ul>
<li><a href=#_pod_placement_series>Pod Placement Series</a></li>
<li><a href=#_descheduler_profiles>Descheduler Profiles</a></li>
<li><a href=#_descheduler_mechanism>Descheduler mechanism</a></li>
<li><a href=#_installing_the_descheduler>Installing the Descheduler</a></li>
</ul>
</nav>
<div id=navigation>
<a class=nav-prev href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints"> <i class="fa fa-chevron-left"></i></a>
<a class=nav-next href=/compliance/ title=Compliance style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</aside>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://schema.org/BreadcrumbList>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/> <span itemprop=name>YAUB Yet Another Useless Blog</span><meta itemprop=position content="1"></a></span> > <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/day-2/> <span itemprop=name>OpenShift Day-2</span><meta itemprop=position content="2"></a></span> > <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/day-2/pod-placement/> <span itemprop=name>Pod Placement</span><meta itemprop=position content="3"></a></span> > Using Descheduler
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#_pod_placement_series>Pod Placement Series</a></li>
<li><a href=#_descheduler_profiles>Descheduler Profiles</a></li>
<li><a href=#_descheduler_mechanism>Descheduler mechanism</a></li>
<li><a href=#_installing_the_descheduler>Installing the Descheduler</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
<div class=tags>
<a class=tag-link href=/tags/ocp>OCP</a>
<a class=tag-link href=/tags/day-2>Day-2</a>
<a class=tag-link href=/tags/openshift>OpenShift</a>
<a class=tag-link href=/tags/descheduler>Descheduler</a>
</div>
</div>
<div id=body-inner>
<h1>
Using Descheduler
</h1>
<p class=tracked>
<time class="f6 mv4 dib tracked" datetime=2021-08-26T00:00:00Z>
<strong>August 26, 2021</strong>
</time>
- By:
Thomas Jungbauer
( Lastmod: 2021-09-03 )
</p>
<div class=paragraph>
<p><strong>Descheduler</strong> is a new feature which is GA since OpenShift 4.7. It can be used to evict pods from nodes based on specific strategies. The evicted pod is then scheduled on another node (by the Scheduler) which is more suitable.</p>
</div>
<div class=paragraph>
<p>This feature can be used when:</p>
</div>
<div class=ulist>
<ul>
<li>
<p>nodes are under/over-utilized</p>
</li>
<li>
<p>pod or node affinity, taints or labels have changed and are no longer valid for a running pod</p>
</li>
<li>
<p>node failures</p>
</li>
<li>
<p>pods have been restarted too many times</p>
</li>
</ul>
</div>
<div class=sect1>
<h2 id=_pod_placement_series>Pod Placement Series</h2>
<div class=sectionbody>
<div class=paragraph>
<p>Please check out other ways of pod placements:</p>
</div>
<div class=paragraph>
<div class=expand>
<div class=expand-label style=cursor:pointer onclick="$h=$(this),$h.next('div').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('div').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right'})})">
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
<a>Expand me...</a>
</span>
</div>
<div class=expand-content style=display:none>
<div class="olist arabic">
<ol class=arabic>
<li>
<p><a href=/openshift/day-2/pod-placement-nodeselector/>NodeSelector</a></p>
</li>
<li>
<p><a href=/openshift/day-2/pod-placement-pod-affinity/>Pod Affinity and Anti Affinity</a></p>
</li>
<li>
<p><a href=/openshift/day-2/pod-placement-node-affinity/>Node Affinity</a></p>
</li>
<li>
<p><a href=/openshift/day-2/pod-placement-taints-and-tolerations>Taints and Tolerations</a></p>
</li>
<li>
<p><a href=/openshift/day-2/pod-placement-topology-spread-constraints/>Topology Spread Constraints</a></p>
</li>
<li>
<p><a href=/openshift/day-2/descheduler/>Descheduler</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class=sect1>
<h2 id=_descheduler_profiles>Descheduler Profiles</h2>
<div class=sectionbody>
<div class=paragraph>
<p>The following descheduler profiles are known and one or multiple can be configured for the Descheduler. Each profiles enables certain strategies which the Descheduler is leveraging.
Since the strategies names are more or less self explaining, I did not add their full description here. Instead detailed information can be found at: <a href=https://docs.openshift.com/container-platform/4.8/nodes/scheduling/nodes-descheduler.html#nodes-descheduler-profiles_nodes-descheduler target=_blank rel=noopener>Descheduler Profiles</a></p>
</div>
<div class=ulist>
<ul>
<li>
<p><code>AffinityAndTaints</code> - removes pods that violates affinity and anti-affinity rules or taints</p>
<div class=ulist>
<ul>
<li>
<p>RemovePodsViolatingInterPodAntiAffinity</p>
</li>
<li>
<p>RemovePodsViolatingNodeAffinity</p>
</li>
<li>
<p>RemovePodsViolatingNodeTaints</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>TopologyAndDuplicates</code> - evicts pods which are not evenly spreaded or which are violating the topology domain</p>
<div class=ulist>
<ul>
<li>
<p>RemovePodsViolatingTopologySpreadConstraint</p>
</li>
<li>
<p>RemoveDuplicates</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>LifecycleAndUtilization</code> - evicts long-running pods to balance resource usage of nodes</p>
<div class=ulist>
<ul>
<li>
<p>RemovePodsHavingTooManyRestarts - Pods that are restarted more than 100 times</p>
</li>
<li>
<p>LowNodeUtilization - removes pods from overutilized nodes.</p>
<div class=ulist>
<ul>
<li>
<p>A node is considered underutilized if its usage is below 20% for all thresholds (CPU, memory, and number of pods).</p>
</li>
<li>
<p>A node is considered overutilized if its usage is above 50% for any of the thresholds (CPU, memory, and number of pods).</p>
</li>
</ul>
</div>
</li>
<li>
<p>PodLifeTime - evicts pods that are too old</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class=sect1>
<h2 id=_descheduler_mechanism>Descheduler mechanism</h2>
<div class=sectionbody>
<div class=paragraph>
<p>The following rules are followed by the Descheduler to ensure that eviction of pods does not go wild. Therefore the following pods will never be evicted:</p>
</div>
<div class=ulist>
<ul>
<li>
<p>pods in openshift-* or kube-system namespaces</p>
</li>
<li>
<p>pods with priorityClassName equal to <code>system-cluster-critical</code> or <code>system-node-critical</code></p>
</li>
<li>
<p>pods which cannot be recreated, for example: static or stand-alone pods/jobs or pods without a replication controller or replica set</p>
</li>
<li>
<p>pods of a daemon set</p>
</li>
<li>
<p>pods with local storage</p>
</li>
<li>
<p>pods which are violating the pod disruption budget</p>
</li>
</ul>
</div>
</div>
</div>
<div class=sect1>
<h2 id=_installing_the_descheduler>Installing the Descheduler</h2>
<div class=sectionbody>
<div class=paragraph>
<p>The Descheduler is not installed by default and must be installed after the cluster has been initiated. This is done by installed the <strong>Kube Descheduler</strong> Operator.</p>
</div>
<div class=paragraph>
<p>First we create a separate namespace for our operator, including a label:</p>
</div>
<div class=listingblock>
<div class=content>
<pre class=highlight><code class=language-bash data-lang=bash>oc adm new-project openshift-kube-descheduler-operator

oc label ns/openshift-kube-descheduler-operator openshift.io/cluster-monitoring=true</code></pre>
</div>
</div>
<div class=paragraph>
<p>Then we search for the <strong>Kube Descheduler</strong> operator and install it, using the newly created namespace:</p>
</div>
<div class=imageblock>
<div class=content>
<img src="/Day-2/images/descheduler-install.png?height=400px" alt="Install Descheduler Operator">
</div>
<div class=title>Figure 1. Install Descheduler Operator</div>
</div>
<div class=paragraph>
<p>After a few moments the operator will be installed.</p>
</div>
<div class=paragraph>
<p>You can now create a Descheduler instance either via UI (wizard) or by using the following specification:</p>
</div>
<div class=listingblock>
<div class=content>
<pre class=highlight><code class=language-yaml data-lang=yaml>apiVersion: operator.openshift.io/v1
kind: KubeDescheduler
metadata:
  name: cluster
  namespace: openshift-kube-descheduler-operator
spec:
  deschedulingIntervalSeconds: 3600 <i class=conum data-value=1></i><b>(1)</b>
  logLevel: Normal <i class=conum data-value=2></i><b>(2)</b>
  managementState: Managed
  operatorLogLevel: Normal <i class=conum data-value=3></i><b>(3)</b>
  profiles: <i class=conum data-value=4></i><b>(4)</b>
  - AffinityAndTaints
  - TopologyAndDuplicates
  - LifecycleAndUtilization</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class=conum data-value=1></i><b>1</b></td>
<td>Defines the time interval the descheduler is running. Default is 3600 seconds</td>
</tr>
<tr>
<td><i class=conum data-value=2></i><b>2</b></td>
<td>Defines logging for overall component. Can be Normal, Debug, Trace or TraceAll</td>
</tr>
<tr>
<td><i class=conum data-value=3></i><b>3</b></td>
<td>Defines logging for the operator itself. Can be Normal, Debug, Trace or TraceAll</td>
</tr>
<tr>
<td><i class=conum data-value=4></i><b>4</b></td>
<td>Enables on or multiple profiles the Descheduler should consider</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation-bottom>
<a class="nav-prev btn btn-default" href=/day-2/pod-placement/2021-08-31-topologyspreadcontraints/ title="Topology Spread Constraints"> <i class="fa fa-chevron-left btn-bottom-prev"></i><span class=btn-bottom-text>Previous: </span> Topology Spread Constraints</a>
<a class="nav-next btn btn-default" href=/compliance/ title=Compliance style=margin-right:0><i class="fa fa-chevron-right btn-bottom-next"></i><span class=btn-bottom-text>Next:</span> Compliance</a>
</div>
<div class=copyright>
<p>Copyright &copy; 2020 - 2021 Toni Schmidbauer & Thomas Jungbauer</p>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn target=_blank rel="noopener noreferrer">Hugo Learn Theme</i></a> and <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a></p>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/js/clipboard.min.js?1638208425></script>
<script src=/js/perfect-scrollbar.min.js?1638208425></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1638208425></script>
<script src=/js/jquery.sticky.js?1638208425></script>
<script src=/js/featherlight.min.js?1638208425></script>
<script src=/js/highlight.pack.js?1638208425></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/js/modernizr.custom-3.6.0.js?1638208425></script>
<script src=/js/learn.js?1638208425></script>
<script src=/js/hugo-learn.js?1638208425></script>
<script src=/js/yaub.js?1638208425></script>
<script>window.addEventListener('DOMContentLoaded',()=>{const a=new IntersectionObserver(a=>{a.forEach(a=>{const b=a.target.getAttribute('id');a.intersectionRatio>0&&(clearActiveStatesInTableOfContents(),document.querySelector(`aside nav li a[href="#${b}"]`).parentElement.classList.add('active'))})});document.querySelectorAll('h1[id],h2[id],h3[id],h4[id]').forEach(b=>{a.observe(b)})});function clearActiveStatesInTableOfContents(){document.querySelectorAll('aside nav li').forEach(a=>{a.classList.remove('active')})}</script>
<script type=text/javascript>function scrollTopAnimated(){$("html, body").animate({scrollTop:"0"},500)}</script>
<script>function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(".summary-box").click(function(){return window.location=$(this).find("a").attr("href"),!1})</script>
<script>const btn=document.querySelector(".btn-toggle"),prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)"),currentTheme=localStorage.getItem("theme");currentTheme=="dark"?document.body.classList.toggle("dark-theme"):currentTheme=="light"&&document.body.classList.toggle("light-theme"),btn.addEventListener("click",function(){var a;prefersDarkScheme.matches?(document.body.classList.toggle("light-theme"),a=document.body.classList.contains("light-theme")?"light":"dark"):(document.body.classList.toggle("dark-theme"),a=document.body.classList.contains("dark-theme")?"dark":"light"),localStorage.setItem("theme",a)})</script>
</body>
</html>